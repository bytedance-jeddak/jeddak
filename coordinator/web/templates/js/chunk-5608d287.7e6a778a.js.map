{"version":3,"sources":["webpack:///./src/views/TaskDetail/LossAndTime.vue?3bcd","webpack:///./src/views/TaskDetail/Procedure.vue?df98","webpack:///./src/views/TaskDetail.vue?616c","webpack:///./src/views/TaskDetail/TrainAndValidate.vue?a56b","webpack:///./src/views/TaskDetail.vue?022d","webpack:///./node_modules/echarts/lib/extension.js","webpack:///./node_modules/echarts/lib/component/title/install.js","webpack:///./node_modules/echarts/lib/component/dataZoom/helper.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","webpack:///./node_modules/echarts/lib/component/helper/sliderMove.js","webpack:///./node_modules/echarts/lib/scale/Scale.js","webpack:///./node_modules/echarts/lib/data/OrdinalMeta.js","webpack:///./node_modules/echarts/lib/scale/helper.js","webpack:///./node_modules/echarts/lib/scale/Ordinal.js","webpack:///./node_modules/echarts/lib/scale/Interval.js","webpack:///./node_modules/echarts/lib/data/helper/dataStackHelper.js","webpack:///./node_modules/echarts/lib/layout/barGrid.js","webpack:///./node_modules/echarts/lib/scale/Time.js","webpack:///./node_modules/echarts/lib/scale/Log.js","webpack:///./node_modules/echarts/lib/coord/scaleRawExtentInfo.js","webpack:///./node_modules/echarts/lib/coord/axisHelper.js","webpack:///./node_modules/echarts/lib/component/dataZoom/AxisProxy.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installCommon.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","webpack:///./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack:///./node_modules/echarts/lib/data/DataDiffer.js","webpack:///./node_modules/echarts/lib/component/helper/listComponent.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/history.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack:///./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack:///./node_modules/echarts/lib/component/helper/BrushController.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/component/helper/brushHelper.js","webpack:///./node_modules/echarts/lib/component/helper/BrushTargetManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack:///./node_modules/echarts/lib/component/toolbox/install.js","webpack:///./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack:///./node_modules/echarts/lib/component/axis/AxisView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack:///./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack:///./node_modules/echarts/lib/component/axisPointer/viewHelper.js","webpack:///./node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","webpack:///./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack:///./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack:///./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack:///./node_modules/echarts/lib/component/axisPointer/install.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack:///./node_modules/echarts/lib/component/tooltip/helper.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack:///./node_modules/echarts/lib/component/tooltip/install.js","webpack:///./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack:///./node_modules/echarts/lib/coord/axisModelCommonMixin.js","webpack:///./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack:///./node_modules/echarts/lib/coord/axisDefault.js","webpack:///./node_modules/echarts/lib/coord/axisCommonTypes.js","webpack:///./node_modules/echarts/lib/coord/axisModelCreator.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack:///./node_modules/echarts/lib/coord/axisTickLabelBuilder.js","webpack:///./node_modules/echarts/lib/coord/Axis.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack:///./node_modules/echarts/lib/component/axis/axisSplitHelper.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/component/grid/installSimple.js","webpack:///./node_modules/echarts/lib/component/grid/install.js","webpack:///./node_modules/echarts/lib/component/legend/LegendModel.js","webpack:///./node_modules/echarts/lib/component/legend/LegendView.js","webpack:///./node_modules/echarts/lib/component/legend/legendFilter.js","webpack:///./node_modules/echarts/lib/component/legend/legendAction.js","webpack:///./node_modules/echarts/lib/component/legend/installLegendPlain.js","webpack:///./node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","webpack:///./node_modules/echarts/lib/component/legend/ScrollableLegendView.js","webpack:///./node_modules/echarts/lib/component/legend/scrollableLegendAction.js","webpack:///./node_modules/echarts/lib/component/legend/installLegendScroll.js","webpack:///./node_modules/echarts/lib/component/legend/install.js","webpack:///./node_modules/echarts/lib/component/dataZoom/InsideZoomModel.js","webpack:///./node_modules/echarts/lib/component/helper/RoamController.js","webpack:///./node_modules/echarts/lib/component/dataZoom/roams.js","webpack:///./node_modules/echarts/lib/component/dataZoom/InsideZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomInside.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SliderZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SliderZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomSlider.js","webpack:///./node_modules/echarts/lib/component/dataZoom/install.js","webpack:///./node_modules/echarts/lib/component/marker/checkMarkerInSeries.js","webpack:///./node_modules/echarts/lib/component/marker/MarkerModel.js","webpack:///./node_modules/echarts/lib/component/marker/MarkAreaModel.js","webpack:///./node_modules/echarts/lib/data/helper/dimensionHelper.js","webpack:///./node_modules/echarts/lib/data/DataDimensionInfo.js","webpack:///./node_modules/echarts/lib/data/List.js","webpack:///./node_modules/echarts/lib/component/marker/markerHelper.js","webpack:///./node_modules/echarts/lib/component/marker/MarkerView.js","webpack:///./node_modules/echarts/lib/coord/CoordinateSystem.js","webpack:///./node_modules/echarts/lib/component/marker/MarkAreaView.js","webpack:///./node_modules/echarts/lib/component/marker/installMarkArea.js","webpack:///./node_modules/echarts/lib/data/helper/completeDimensions.js","webpack:///./node_modules/echarts/lib/data/helper/createDimensions.js","webpack:///./node_modules/echarts/lib/model/referHelper.js","webpack:///./node_modules/echarts/lib/chart/helper/createListFromArray.js","webpack:///./node_modules/echarts/lib/chart/line/LineSeries.js","webpack:///./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack:///./node_modules/echarts/lib/chart/helper/Symbol.js","webpack:///./node_modules/echarts/lib/chart/helper/SymbolDraw.js","webpack:///./node_modules/echarts/lib/chart/line/helper.js","webpack:///./node_modules/echarts/lib/util/vendor.js","webpack:///./node_modules/echarts/lib/chart/line/lineAnimationDiff.js","webpack:///./node_modules/echarts/lib/chart/line/poly.js","webpack:///./node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","webpack:///./node_modules/echarts/lib/chart/line/LineView.js","webpack:///./node_modules/echarts/lib/layout/points.js","webpack:///./node_modules/echarts/lib/processor/dataSample.js","webpack:///./node_modules/echarts/lib/chart/line/install.js","webpack:///./node_modules/echarts/lib/chart/graph/categoryFilter.js","webpack:///./node_modules/echarts/lib/chart/graph/categoryVisual.js","webpack:///./node_modules/echarts/lib/chart/graph/edgeVisual.js","webpack:///./node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","webpack:///./node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","webpack:///./node_modules/echarts/lib/chart/graph/simpleLayout.js","webpack:///./node_modules/echarts/lib/chart/graph/graphHelper.js","webpack:///./node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","webpack:///./node_modules/echarts/lib/chart/graph/circularLayout.js","webpack:///./node_modules/echarts/lib/chart/graph/forceHelper.js","webpack:///./node_modules/echarts/lib/chart/graph/forceLayout.js","webpack:///./node_modules/echarts/lib/coord/View.js","webpack:///./node_modules/echarts/lib/chart/graph/createView.js","webpack:///./node_modules/echarts/lib/chart/helper/LinePath.js","webpack:///./node_modules/echarts/lib/chart/helper/Line.js","webpack:///./node_modules/echarts/lib/chart/helper/LineDraw.js","webpack:///./node_modules/echarts/lib/component/helper/roamHelper.js","webpack:///./node_modules/echarts/lib/chart/graph/adjustEdge.js","webpack:///./node_modules/echarts/lib/chart/graph/GraphView.js","webpack:///./node_modules/echarts/lib/data/Graph.js","webpack:///./node_modules/echarts/lib/data/helper/linkList.js","webpack:///./node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","webpack:///./node_modules/echarts/lib/visual/LegendVisualProvider.js","webpack:///./node_modules/echarts/lib/chart/graph/GraphSeries.js","webpack:///./node_modules/echarts/lib/action/roamHelper.js","webpack:///./node_modules/echarts/lib/chart/graph/install.js","webpack:///./node_modules/zrender/lib/canvas/Layer.js","webpack:///./node_modules/zrender/lib/canvas/Painter.js","webpack:///./node_modules/echarts/lib/renderer/installCanvasRenderer.js","webpack:///./src/views/TaskDetail/LossAndTime.vue?ba47","webpack:///src/views/TaskDetail/LossAndTime.vue","webpack:///./src/views/TaskDetail/LossAndTime.vue?6b98","webpack:///./src/views/TaskDetail/LossAndTime.vue?df6e","webpack:///./src/views/TaskDetail/TrainAndValidate.vue?515c","webpack:///src/views/TaskDetail/TrainAndValidate.vue","webpack:///./src/views/TaskDetail/TrainAndValidate.vue?f0aa","webpack:///./src/views/TaskDetail/TrainAndValidate.vue?63b8","webpack:///./src/views/TaskDetail/Procedure.vue?9f49","webpack:///src/views/TaskDetail/Procedure.vue","webpack:///./src/views/TaskDetail/Procedure.vue?6bfc","webpack:///./src/views/TaskDetail/Procedure.vue?694b","webpack:///src/views/TaskDetail.vue","webpack:///./src/views/TaskDetail.vue?44be","webpack:///./src/views/TaskDetail.vue?93e8","webpack:///./src/views/TaskDetail.vue?ee27"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","push","_v","changeAlias","downloadOutput","task_info","task_id","stopTask","slot","deleteTask","staticStyle","_s","party_name","party_names","class","status","_f","create_time","update_time","task_json_visible","alias","_l","item","index","key","value","index2","_e","task_info_display_control","metrics","length","m","procedure","task_json_dict","loss_and_time","train_and_validate","error_msg","msg","refreshLog","model","callback","$$v","scroll_to_bottom","expression","task_log","copyTaskJSON","staticRenderFns","extensions","extensionRegisters","registerPreprocessor","registerProcessor","registerPostInit","registerPostUpdate","registerAction","registerCoordinateSystem","registerLayout","registerVisual","registerTransform","registerLoading","registerMap","PRIORITY","ComponentModel","ComponentView","Component","SeriesModel","Series","ChartView","Chart","registerComponentModel","ComponentModelClass","registerClass","registerComponentView","ComponentViewClass","registerSeriesModel","SeriesModelClass","registerChartView","ChartViewClass","registerSubTypeDefaulter","componentType","defaulter","registerPainter","painterType","PainterCtor","use","ext","singleExt","install","_super","TitleModel","_this","apply","arguments","type","layoutMode","ignoreSize","defaultOption","zlevel","z","show","text","target","subtext","subtarget","left","top","backgroundColor","borderColor","borderWidth","padding","itemGap","textStyle","fontSize","fontWeight","color","subtextStyle","TitleView","prototype","titleModel","ecModel","api","group","removeAll","get","textStyleModel","getModel","subtextStyleModel","textAlign","textVerticalAlign","textEl","style","fill","getTextColor","disableBox","z2","textRect","getBoundingRect","subText","subTextEl","y","height","verticalAlign","link","sublink","triggerEvent","silent","eventData","componentIndex","add","groupRect","layoutOption","getBoxLayoutParams","width","layoutRect","getWidth","getHeight","x","markRedraw","alignStyle","align","setStyle","margin","getItemStyle","rect","shape","r","subPixelOptimize","registers","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","seriesModel","coordType","getAxisMainType","axisDim","findEffectedDataZooms","payload","foundNewLink","axisRecords","effectedModels","effectedModelMap","eachComponent","mainType","query","dataZoomModel","uid","addToEffected","processSingle","isLinked","dataZoom","set","markAxisControlled","isLink","eachTargetAxis","axisIndex","axisIdxArr","collectReferCoordSysModelInfo","coordSysInfoWrap","infoList","infoMap","axisModel","getComponent","coordSysModel","getCoordSysModel","coordSysUid","coordSysInfo","axisModels","DataZoomAxisInfo","indexList","indexMap","axisCmptIdx","DataZoomModel","_autoThrottle","_noTarget","_rangePropMode","init","option","parentModel","inputRawOption","retrieveRawOption","settledOption","mergeDefaultAndTheme","_doInit","mergeOption","newOption","thisOption","_setDefaultThrottle","_updateRangeUse","names","_resetTarget","optionOrient","targetAxisIndexMap","_targetAxisInfoMap","hasAxisSpecified","_fillSpecifiedTargetAxis","_orient","_makeAutoOrientByTargetAxis","_fillAutoTargetAxisByOrient","each","axisInfo","refering","getReferringComponents","specified","models","orient","needAuto","findComponents","setParallelAxis","filter","gridModel_1","axModel","dim","hasOwnProperty","globalOption","throttle","animation","animationDurationUpdate","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","noTarget","getFirstTargetAxisModel","firstAxisModel","context","call","getAxisProxy","getAxisModel","__dzAxisProxy","setRawRange","opt","setCalculatedRange","name","getPercentRange","axisProxy","findRepresentativeAxisProxy","getDataPercentWindow","getValueRange","getDataValueWindow","firstProxy","axisDimList","keys","i","j","proxy","hostedBy","getRangePropMode","slice","getOrient","dependencies","filterMode","start","end","ret","SelectDataZoomModel","DataZoomView","SelectDataZoomView","sliderMove","delta","handleEnds","extent","handleIndex","minSpan","maxSpan","extentSpan","restrict","Math","max","handleSpan","abs","originalDistSign","getSpanSign","currDistSign","extentMinSpan","realExtent","sign","span","dist","extend","min","Infinity","Scale","setting","_setting","_extent","getSetting","unionExtent","other","unionExtentFromData","data","getApproximateExtent","getExtent","setExtent","thisExtent","isNaN","isInExtentRange","isBlank","_isBlank","setBlank","clazz","OrdinalMeta","categories","_needCollect","needCollect","_deduplication","deduplication","createByAxisModel","getName","dedplication","getOrdinal","category","_getOrCreateMap","parseAndCollect","map","NaN","_map","obj","roundNumber","number","intervalScaleNiceTicks","splitNumber","minInterval","maxInterval","result","interval","precision","intervalPrecision","getIntervalPrecision","niceTickExtent","ceil","floor","fixExtent","idx","isFinite","contain","val","normalize","OrdinalScale","ordinalMeta","_ordinalMeta","parse","round","rank","_getTickNumber","scale","getRawOrdinalNumber","getTicks","ticks","getMinorTicks","setSortInfo","info","infoOrdinalNumbers","ordinalNumbers","ordinalsByTick","_ordinalNumbersByTick","ticksByOrdinal","_ticksByOrdinalNumber","tickNum","allCategoryLen","len","ordinalNumber","unusedOrdinal","ordinal","ticksByOrdinalNumber","tickNumber","ordinalNumbersByTick","getLabel","tick","cateogry","count","getOrdinalMeta","niceTicks","niceExtent","Ordinal","IntervalScale","_interval","_intervalPrecision","parseFloat","getInterval","setInterval","_niceExtent","expandToNicedExtent","safeLimit","lastNiceTick","minorTicks","nextTick","prevTick","minorTicksGroup","minorInterval","minorTick","dataNum","format","reverse","expandSize","fixMax","fixMin","Interval","enableDataStack","dimensionInfoList","stackedByDimInfo","stackedDimInfo","stackResultDimension","stackedOverDimension","byIndex","stackedCoordDimension","mayStack","dimensionInfo","isExtraCoord","coordDim","createInvertedIndices","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","coordDimIndex","isCalculationCoord","stackedDimension","stackedByDimension","isStackedByIndex","isDimensionStacked","stackedDim","getCalculationInfo","getStackedDimension","targetDim","STACK_PREFIX","LARGE_BAR_MIN_WIDTH","LargeArr","Float32Array","Array","getSeriesStackId","seriesIndex","getAxisKey","axis","prepareLayoutBarSeries","seriesType","seriesModels","eachSeriesByType","isOnCartesian","isInLargeMode","getValueAxesMinGaps","barSeries","axisValues","cartesian","coordinateSystem","baseAxis","getBaseAxis","getData","mapDimension","cnt","axisMinGaps","valuesInAxis","sort","a","b","makeColumnLayout","seriesInfoList","bandWidth","axisExtent","getBandWidth","minGap","scaleSpan","barWidth","barMaxWidth","barMinWidth","barGap","barCategoryGap","axisKey","stackId","doCalBarWidthAndOffset","columnsMap","seriesInfo","columnsOnAxis","remainedWidth","autoWidthCount","categoryGap","gap","stacks","maxWidth","minWidth","coordSysName","categoryGapPercent","columnCount","barGapPercent","autoWidth","column","finalWidth","lastColumn","widthSum","offset","retrieveColumnLayout","barWidthAndOffset","createRenderPlanner","pipelineContext","large","getValueAxisStart","valueAxis","stacked","toGlobalCoord","dataToCoord","bisect","lo","hi","mid","TimeScale","settings","useUTC","_minLevelUnit","second","getFormattedLabel","labelFormatter","isUTC","lang","level","innerTicks","getIntervalTicks","_approxInterval","concat","d","Date","getFullYear","getMonth","getDate","approxTickNum","scaleIntervalsLen","scaleIntervals","isUnitValueSame","unit","valueA","valueB","dateA","dateB","isSame","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","getFirstTimestampOfUnit","date","unitName","outDate","getTime","bottomUnitName","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","out","dateTime","notAdd","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","startTick","endTick","getterName","setterName","unshift","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","nextPrimaryTimeUnit","levelTicksRemoveDuplicated","i_1","tickValue","targetTickNum","levelsTicksInExtent","maxLevel","k","Time","scaleProto","intervalScaleProto","roundingErrorFix","mathFloor","mathCeil","mathPow","pow","mathLog","log","LogScale","base","_originalScale","originalScale","originalExtent","powVal","_fixMin","fixRoundingError","_fixMax","err","proto","originalVal","Log","ScaleRawExtentInfo","_prepareParams","dataExtent","_dataMin","_dataMax","isOrdinal","_isOrdinal","_needCrossZero","getNeedCrossZero","modelMinRaw","_modelMinRaw","_modelMinNum","parseAxisModelMinMax","modelMaxRaw","_modelMaxRaw","_modelMaxNum","_axisDataLen","getCategories","boundaryGap","boundaryGapArr","_boundaryGapInner","calculate","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","determinedMin","_determinedMin","determinedMax","_determinedMax","modifyDataMinMax","minMaxName","DATA_MIN_MAX_ATTR","setDeterminedMinMax","attr","DETERMINED_MIN_MAX_ATTR","freeze","frozen","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","scaleType","rawExtentResult","barSeriesModels","isBaseAxisAndHasBarSeries_1","adjustedScale","adjustScaleForOverflow","axisLength","barsOnCurrentAxis","undefined","minOverflow","maxOverflow","totalOverFlow","oldRange","oldRangePercentOfNew","overflowBuffer","niceScaleExtent","extentInfo","createScaleByModel","axisType","locale","getLocaleModel","getClass","ifAxisCrossZero","makeLabelFormatter","getLabelModel","categoryTickStart","tpl","label","replace","cb","getAxisRawValue","estimateLabelUnionRect","realNumberScaleTicks","categoryScaleExtent","axisLabelModel","step","unrotatedSingleRect","getTextRect","singleRect","rotateTextRect","union","rotate","rotateRadians","PI","beforeWidth","beforeHeight","afterWidth","cos","sin","afterHeight","rotatedRect","BoundingRect","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","mapDimensionsAll","dataDim","unionAxisExtentFromData","seriesExtent","asc","AxisProxy","dimName","_dimName","_axisIndex","_dataZoomModel","_valueWindow","_percentWindow","getTargetSeriesModels","eachSeries","axisMainType","getMinMaxSpan","_minMaxSpan","calculateDataWindow","hasPropModeValue","_dataExtent","percentExtent","percentWindow","valueWindow","prop","boundPercent","boundValue","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","reset","targetSeries","calculateDataExtent","_updateMinMaxSpan","dataWindow","_setAxisModel","filterData","seriesData","dataDims","filterSelf","dataIndex","leftOut","rightOut","hasValue","thisHasValue","thisLeftOut","thisRightOut","setData","isInWindow","range","selectRange","setApproximateExtent","minMaxSpan","percentSpan","valueSpan","toFixed","dataZoomProcessor","getTargetSeries","eachAxisModel","proxyList","seriesModelMap","overallReset","percentRange","valueRange","startValue","endValue","installDataZoomAction","installed","installCommon","PROCESSOR","FILTER","SelectZoomModel","SelectZoomView","ToolboxFeature","registerFeature","ctor","getFeature","ToolboxModel","optionUpdated","feature","featureOpt","featureName","Feature","getDefaultOption","borderRadius","itemSize","showTitle","iconStyle","emphasis","tooltip","position","dataIndexMapValueLength","valNumOrArrLengthMoreThan2","defaultKeyGetter","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","diffMode","_old","_new","_oldKeyGetter","_newKeyGetter","_diffModeMultiple","func","_add","update","_update","updateManyToOne","_updateManyToOne","updateOneToMany","_updateOneToMany","remove","_remove","execute","_executeOneToOne","newDataIndexMap","oldDataKeyArr","newDataKeyArr","_initIndexMap","oldKey","newIdxMapVal","newIdxMapValLen","newIdx","shift","_performRestAdd","_executeMultiple","oldDataIndexMap","oldIdxMapVal","oldIdxMapValLen","newKey","idxMapValLen","arr","keyArr","keyGetterName","cbModeMultiple","idxMapVal","componentModel","boxLayoutParams","viewportSize","makeBackground","ToolboxView","toolboxModel","featureOpts","features","_features","featureNames","_featureNames","processFeature","eachChild","icon","titleText","__title","emphasisState","ensureState","emphasisTextConfig","textConfig","textContent","getTextContent","emphasisTextState","states","emphasisTextStyle","makeFont","offsetX","offsetY","needPutOnTop","topOffset","newIndex","oldIndex","oldName","featureModel","Model","newTitle","title","isUserFeatureName","onclick","isToolboxFeature","unusable","createIconPaths","setIconStatus","iconName","iconPaths","iconStatus","dispose","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","iconStr","path","graphic","pathEmphasisState","ignore","setTextContent","el","itemName","formatterParamsExtra","hoverStyle","defaultTextPosition","stroke","setTextConfig","hide","updateView","indexOf","SaveAsImage","isSvg","getZr","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","MouseEvent","env","browser","newEdge","ie","edge","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","n","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","document","createElement","body","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","html","tab","$a","download","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","getLocale","canvasSupported","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","line","bar","stack","seriesOptGenreator","series","generateNewSeriesTypes","subType","seriesId","id","newSeriesOpt","coordSys","categoryAxis","getAxesByScale","radio","currentType","tiled","dispatchAction","markPoint","markLine","isStack","echarts","event","BLOCK_SPLITER","join","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","getOtherAxis","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","columns","rawData","getRawData","mapArray","lines","items","assembleOtherSeries","vals","dimensions","argLen","getContentFromModel","str","trim","isTSVFormat","block","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","header","parseListContents","seriesName","name_1","hasName","parseContents","blockMetaList","blocks","blockMeta","DataView","container","getDom","_dom","root","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","self","e","Error","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","inner","newSnapshot","storedSnapshots","getStoreSnapshots","batchItem","dataZoomId","snapshot","queryComponents","pop","head","clear","snapshots","store","RestoreOption","from","resetOption","Restore","ATTR","take","zr","resourceKey","userKey","getStore","release","uKey","isTaken","BRUSH_PANEL_GLOBAL","mathMin","mathMax","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","w","s","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","brushStyle","lineWidth","transformable","brushMode","removeOnClick","baseUID","BrushController","_track","_covers","_handlers","_zr","_uid","pointerHandlers","handler","eventName","enableBrush","brushOption","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","_brushOption","off","setPanels","panelOpts","panels_1","_panels","panelId","mount","enableGlobalPan","thisGroup","rotation","scaleX","scaleY","_transform","getLocalTransform","updateCovers","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","controller","creatingCover","_creatingCover","oldGetKey","getKey","addOrUpdate","cover","__brushOption","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","Eventful","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","traverse","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","transform","pn","isTargetByCursor","getPanelByCover","covers","originalLength","areas","trigger","isEnd","shouldShowCover","track","p2","p1","dx","dy","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","draggable","cursor","drift","driftRect","ondragend","nameSequence","opacity","invisible","updateBaseRect","localRange","handleSize","xa","ya","x2","y2","x2a","y2a","widtha","heighta","updateRectShape","mainEl","childAt","useStyle","childOfName","globalDir","getGlobalDirection1","getGlobalDirection2","h","setShape","pointsToRect","clipByPanel","strokeNoScale","formatRectRange","getTransform","localDirName","inverseMap","right","bottom","dir","localDirNameSeq","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","point","localD","transformCoordToLocal","localZero","clipPath","points","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","_dragging","setCursorStyle","preventDefault","rawE","mainShapeContain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","mousedown","handleDragEnd","mousemove","mouseup","lineX","getLineRenderer","lineY","returnInput","localTrack","ends","polygon","xyIndex","otherExtent","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","makeRectIsTargetByCursor","targetModel","boundingRect","create","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","finder","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","builder","include","setOutputRanges","matchOutputRanges","area","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","values","xyMinMax","targetInfo","findTargetInfo","coordSyses","setInputRanges","rangeOffset","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","includeMainTypes","grid","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","gridModel","cartesians","getCartesians","getAxis","panelRectBuilders","xAxisDeclared","yAxisDeclared","geo","geoModels","geoModel","xAxisModel","yAxisModel","master","getRect","clone","applyTransform","axisConvert","to","rangeOrCoordRange","clamp","xminymin","pointToData","dataToPoint","xmaxymax","p","axisNameIndex","coordToData","toLocalCoord","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","DATA_ZOOM_ID_BASE","DataZoomFeature","_brushController","_onBrush","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","_dispatchZoomAction","findDataZoom","minValueSpan","maxValueSpan","found","dzModel","has","batch","zoom","back","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","xAxisIndex","yAxisIndex","xAxisId","yAxisId","zoomActive","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","$fromToolbox","DataZoom","collect","axesInfo","seriesInvolved","coordSysAxesInfo","coordSysMap","collectAxesInfo","collectSeriesInfo","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","getCoordinateSystems","axisPointerEnabled","coordSysKey","makeKey","axesInfoInCoordSys","baseTooltipModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","triggerTooltip","axisPointerModel","axisPointerShow","isHandleTrigger","makeAxisPointerModel","snap","involveSeries","useHandle","linkGroup","groupIndex","getLinkGroupIndex","mapper","tooltipAxisPointerModel","fields","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","crossStyle","lineStyle","seriesTooltipTrigger","seriesTooltipShow","seriesDataCount","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisInfo","getAxisPointerModel","axisPointerClazz","AxisView","axisPointerClass","_doUpdateAxisPointerClass","updateAxisPointer","axisPointer","_axisPointer","_disposeAxisPointer","forceRender","Clazz","getAxisPointerClass","registerAxisPointerClass","bind","BaseAxisPointer","animationThreshold","_axisModel","_axisPointerModel","_api","_lastValue","_lastStatus","_group","handle","_handle","elOption","makeElOption","graphicKey","_lastGraphicKey","moveAnimation","_moveAnimation","determineAnimation","doUpdateProps","updateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","updateMandatoryProps","_renderHandle","isCategoryAxis","useSnap","pointerOption","pointer","pointerEl","labelEl","updateLabelShowHide","updateHandleTransform","isInit","handleModel","onmousemove","onmousedown","_onHandleDragMove","_onHandleDragEnd","_moveHandleToValue","getHandleTransProps","getHandleTransform","trans","_payloadInfo","stopAnimation","lastProp","_doDispatchAxisPointer","payloadInfo","cursorPoint","tooltipOption","doClear","buildLabel","xy","wh","xDimIndex","animationModel","props","propsEqual","lastProps","newProps","equals_1","AxisBuilder","labelOffset","nameDirection","tickDirection","labelDirection","handleAutoShown","transformGroup","updateTransform","_transformGroup","hasBuilder","builders","getGroup","innerTextLayout","axisRotation","textRotation","direction","rotationDiff","makeAxisEventDataBase","isLabelSilent","tooltipOpt","axisLine","shown","matrix","pt1","pt2","lineCap","getLineStyle","x1","y1","strokeContainThreshold","anid","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","sqrt","symbol","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","axisName","labelLayout","axisNameAvailableWidth","nameLocation","gapSignal","pos","isNameLocationCenter","nameRotation","endTextLayout","textFont","getFont","truncateOpt","ellipsis","nameTruncateMaxWidth","font","overflow","__fullText","targetType","decomposeTransform","textPosition","textRotate","inverse","onLeft","tickEls","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","lastTick","ignoreEl","isTwoLabelOverlapped","current","next","firstRect","nextRect","mRotationBack","intersect","createTicks","ticksCoords","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","coord","tickEl","autoBatch","tickModel","lineStyleModel","getTicksCoords","minorTickModel","minorTicksCoords","getMinorTicksCoords","minorTickLineStyle","minorTicksEls","axisLabelShow","labelModel","labelMargin","labels","getViewLabels","labelRotation","labelRotate","rawCategoryData","labelItem","formattedLabel","rawLabel","itemLabelModel","rawCategoryItem","getShallow","buildElStyle","axisPointerType","styleModel","getAreaStyle","buildLabelElOption","labelPos","getValueLabel","formatter","paddings","confineInContainer","bgColor","viewWidth","viewHeight","seriesDataIndices","params_1","axisDimension","idxItem","getSeriesByIndex","dataIndexInside","dataParams","getDataParams","getTransformedPosition","layoutInfo","buildCartesianSingleLabelElOption","textLayout","makeLineShape","makeRectShape","layout","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","axisPosition","rectBound","onZero","axisOffset","posBound","onZeroCoord","dirMap","labelInside","isCartesian2DSeries","findAxisModels","axisModelMap","v","CartesianAxisPointer","getCartesian","getGlobalExtent","pixelValue","elStyle","pointerShapeBuilder","dimIndex","currPosition","cursorOtherValue","tooltipOptions","targetShape","getAxisDimIndex","shadow","AxisPointerModel","shadowStyle","size","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","register","node","records","initGlobalListeners","record","useHandler","eventType","dis","makeDispatchAction","dispatchTooltipFinally","pendings","initialized","doEnter","onLeave","actuallyPayload","showLen","showTip","hideLen","hideTip","currTrigger","pendingList","unregister","AxisPointerView","triggerOn","findPointFromSeries","getItemGraphicEl","getTooltipPosition","isStacked","baseAxisDim","baseDataOffset","baseDim","stackedData","getValues","axisTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","list","updaters","showPointer","showTooltip","coordSysContainsPoint","containPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","containData","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","Number","MAX_VALUE","minDiff","seriesNestestValue","dataIndices","getAxisTooltipData","nestestValue","indicesOfNearest","diff","getRawIndex","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","axisId","valueLabelOpt","outputAxesInfo","valItem","sampleItem","escapeConnect","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","notBlur","STATISTIC","TooltipModel","showContent","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","transitionDuration","enterable","extraCssText","animationEasingUpdate","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","domSupported","documentElement","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","toLowerCase","getComputedStyle","stl","currentStyle","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","transform3dSupported","mirrorPos","assembleArrow","arrowPosition","arrowPos","positionStyle","transformStyle","borderStyle","styleCss","assembleTransition","duration","onlyFade","transitionCurve","transitionOption","transitionText","transformSupported","assembleTransform","toString","x0","y0","is3d","translate","assembleFont","assembleCssText","enableTransition","boxShadow","borderName","camelCase","makeStyleCoord","appendToBody","zrX","zrY","zrPainter","zrViewportRoot","getViewportRoot","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","TooltipHTMLContent","_show","_styleCoord","_enterable","_firstShow","_longHide","wxa","domBelongToZr","_appendToBody","_container","onmouseenter","clearTimeout","_hideTimeout","_inContent","dispatch","onmouseleave","hideLater","_hideDelay","domStyle","_moveIfResized","className","nearPointColor","_longHideTimeout","styleCoord","display","setContent","content","markers","parentNode","setEnterable","clientWidth","moveTo","style_1","transforms","ratioX","ratioY","visibility","willChange","setTimeout","time","isShow","getOuterSize","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","TooltipRichContent","markupStyleCreator","rich","richTextStyles","lineHeight","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","parsePercent","proxyRect","TooltipView","_renderMode","_tooltipContent","_tooltipModel","_ecModel","_alwaysShowContent","tooltipContent","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","self_1","_refreshUpdateTimeout","isDisposed","manuallyShowTip","_lastDataByCoordSys","_ticket","cmptRef","findComponentReference","positionDefault","tooltipConfig","_manuallyAxisShowTip","pointInfo","cx","cy","findHover","manuallyHideTip","tooltipCascadedModel","buildTooltipModel","getItemModel","_showAxisTooltip","seriesDispatcher_1","cmptDispatcher_1","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","singleTooltipModel","cbParamsList","articleMarkup","noHeader","markupTextArrLegacy","itemCoordSys","axisItem","axisValue","axisValueLabel","axisSectionMarkup","sortBlocks","cbParams","marker","makeTooltipMarker","seriesTooltipResult","formatTooltip","markupFragment","markupText","positionExpr","orderMode","builtMarkupText","blockBreak","allMarkupText","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","dispatcher","ecData","dataModel","dataType","tooltipTrigger","params","asyncTicket","tooltipModelCascade","cmpt","componentMainType","subTooltipModel","defaultHtml","formatterParams","nearPoint","_getNearestPoint","params0","isTimeAxis","cbTicket","tooltipDataParams","contentSize","vAlign","viewSize","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","newIdxItem","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","domWidth","domHeight","rectWidth","rectHeight","queryOptionMap","queryResult","useDefault","enableAll","enableNone","getViewOfComponentModel","subEl","GridModel","containLabel","AxisModelCommonMixin","CartesianAxisModel","nameRotate","nameTruncate","placeholder","nameTextStyle","nameGap","onZeroAxisIndex","symbolSize","axisTick","inside","axisLabel","splitLine","splitArea","areaStyle","alignWithLabel","minorSplitLine","timeAxis","primary","logAxis","logBase","AXIS_TYPES","axisModelCreator","BaseAxisModelClass","extraDefaultOption","axisDefault","AxisModel","args","_i","inputPositionParams","themeModel","getTheme","getAxisType","__ordinalMeta","Cartesian","_dimList","_axes","addAxis","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","calcAffineTransform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","translateX","translateY","axisX","axisY","xVal","yVal","xAxis","yAxis","clampData","xScale","yScale","xAxisExtent","yAxisExtent","getArea","xExtent","yExtent","createAxisLabels","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","makeCategoryTicks","makeCategoryLabelsActually","labelCategoryInterval","numericLabelInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","tickCategoryInterval","ticksCache","optionTickInterval","labelsResult","cache","autoInterval","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","axisRotate","ordinalScale","ordinalExtent","unitSpan","unitW","unitH","maxW","maxH","dw","dh","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","getRotate","isHorizontal","categoryInterval","onlyTick","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","onBand","getPixelPrecision","fixExtentWithBands","t","getTickModel","tickVal","fixOnBandTicksCoords","nTick","ticksLen","last","diffSize","crossLen","shift_1","ticksItem","littleThan","Axis2D","coordExtent","setCategorySortInfo","categorySortInfo","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","_rect","axesMap","_updateScale","onZeroRecords","fixAxisOnZero","resize","ignoreContainLabel","isContainLabel","gridRect","axesList","adjustAxes","updateAxisTransform","labelUnionRect","axesMapOnDim","coordList","convertToPixel","_findConvertTarget","convertFromPixel","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","isCategory","axesModelMap","otherAxis","grids","otherAxisDim","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtentSum","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaStyleModel","areaColors","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","prev","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","axisBuilder","elementType","otherAxisType","axisElementBuilders","splitLineModel","lineColors","lineCount","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","GridView","Rect","extraOption","getDefaultSelectorOptions","LegendModel","selected","_updateSelector","selector","_updateData","legendData","_data","hasSelected","isSelected","select","potentialData","availableNames","isPotential","legendVisualProvider","provider","getAllNames","isSeriesFiltered","_availableNames","dataItem","selectedMode","unSelect","toggleSelected","allSelect","inverseSelect","itemWidth","itemHeight","symbolRotate","inactiveColor","inactiveBorderColor","inactiveBorderWidth","itemStyle","decal","borderCap","borderJoin","borderDashOffset","borderMiterLimit","inactiveWidth","cap","dashOffset","miterLimit","selectorLabel","fontFamily","selectorPosition","selectorItemGap","selectorButtonGap","curry","LegendView","newlineDisabled","_contentGroup","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","legendModel","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","maxSize","mainRect","layoutInner","_backgroundEl","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","legendItemModel","g","newline","lineVisualStyle","getVisual","legendIcon","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","containName","indexOfName","getItemVisual","colorArr","_createSelector","selectorGroup","selectorItem","labelText","emphasisLabelModel","normal","defaultText","itemVisualStyle","drawType","visualDrawType","iconRotate","legendIconType","legendLineStyle","getLegendStyle","getLegendIcon","getDefaultLegendIcon","textX","hitRect","itemTooltipOption","child","__legendDataIndex","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","iconType","itemProperties","propName","visualName","lastIndexOf","legendLineModel","lineProperties","visualHasBorder","symboType","setOrigin","dataName","isUseHoverLayer","storage","getDisplayList","hoverLayer","legendFilter","legendModels","filterSeries","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","isItemSelected","installLegendAction","SERIES_FILTER","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","mergeAndNormalizeLayoutParams","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","horizontal","vertical","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","raw","WH","XY","ScrollableLegendView","_currentIndex","_containerGroup","_controllerGroup","removeClipPath","__rectSize","controllerGroup","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","processMaxSize","_layoutContentAndController","containerGroup","controllerRect","showController","_showController","containerPos","controllerPos","setPosition","clipShape","setClipPath","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","legendId","canJump","pageText","total","pageCount","containerRectSize","targetItemIndex","_findTargetItemIndex","children","targetItem","itemCount","pCount","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","itemRect","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","installScrollableLegendAction","InsideZoomModel","disabled","zoomLock","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","RoamController","mousedownHandler","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","enable","controlType","disable","_opt","isDragging","isPinching","_pinching","setPointerChecker","pointerChecker","_x","_y","isAvailableBehavior","gestureEvent","oldX","oldY","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","originX","originY","factor","checkPointerAndTrigger","absDelta","scrollDelta","pinchScale","pinchX","pinchY","behaviorToCheck","contollerEvent","setViewInfoToCoordSysRecord","getRange","coordSysRecordMap","coordSysRecord","dzInfo","dataZoomInfoMap","disposeCoordSysRecordIfNeeded","coordSysKeyArr","dzUid","removeKey","disposeCoordSysRecord","createCoordSysRecord","containsPoint","method","dzReferCoordSysInfo","easing","mergeControllerParams","prefix","typePriority","dataZoomInfo","oneType","installDataZoomRoamProcessor","apiInner","dzReferCoordSysWrap","dzCoordSysInfo","firstDzInfo","firstDzKey","controllerParams","InsideZoomView","_clear","pan","getRangeHandlers","scrollMove","lastRange","directionInfo","getDirectionInfo","percentPoint","signal","pixelStart","pixelLength","pixel","makeMover","getPercentDelta","percentDelta","oldPoint","newPoint","polar","radiusExtent","getRadiusAxis","angleExtent","getAngleAxis","pointToCoord","singleAxis","SliderZoomModel","dataBackground","selectedDataBackground","fillerColor","handleIcon","handleStyle","moveHandleSize","moveHandleIcon","moveHandleStyle","showDetail","showDataShadow","realtime","brushSelect","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","DEFAULT_MOVE_HANDLE_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","_displayables","_onBrushEnd","_buildView","_updateView","_brushing","brushRect","_resetLocation","_resetInterval","barGroup","sliderGroup","_renderBackground","_renderDataShadow","_positionGroup","showMoveHandle","coordRect","_findCoordRect","ecSize","layoutParams","_location","_size","location","targetAxisModel","otherAxisInverse","_dataShadowInfo","_getViewExtent","clickPanel","_onClickPanel","_onBrushStart","_prepareDataShadowInfo","dataShadowSegs","otherDim","getShadowDim","otherDataExtent","getDataExtent","otherOffset","lastIsEmpty","otherShadowExtent","thisShadowExtent","areaPoints","linePoints","thisCoord","stride","isEmpty","otherCoord","createDataShadowGroup","isSelectedArea","segmentIgnoreThreshold","polyline","thisAxis","getOtherDim","thisDim","displayables","handles","handleLabels","filler","getCursor","_onDragMove","_onDragEnd","onmouseover","_showDataInfo","onmouseout","bRect","_handleHeight","_handleWidth","rectHover","handleColor","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandle","iconSize","moveZoneExpandSize","moveZone","enterEmphasis","leaveEmphasis","ondragstart","_range","viewExtent","_handleEnds","_updateInterval","viewExtend","nonRealtime","displaybles","handleInterval","handleHeight","segIntervals","segGroup","getClipPath","_updateDataInfo","labelTexts","dataInterval","_formatLabel","orderedHandleEnds","setLabel","barTransform","parent","textPoint","labelPrecision","valueStr","showOrHide","vertex","changed","localPoint","center","_brushStart","_brushStartTime","brushShape","brushEndTime","_updateBrushRect","mouseX","mouseY","brushStart","endPoint","startPoint","coordSysInfoList","radius","angle","checkMarkerInSeries","seriesOpts","markerType","seriesOptArr","fillLabel","MarkerModel","createdBySelf","_mergeOption","isAnimationEnabled","hostSeries","__hostSeries","markerOpt","markerModel","createMarkerModelFromSeries","multipleSeries","getRawValue","noName","noValue","getMarkerModelFromSeries","MarkAreaModel","masterMarkerModel","summarizeDimensions","summary","encode","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutput","dimensionNames","dimItem","getDimensionInfo","getOrCreateEncodeArr","mayLabelDimType","defaultTooltip","encodeArr","otherDims","dataDimsOnCoord","encodeFirstDimNotExtra","dimArr","encodeLabel","encodeTooltip","getDimensionTypeByAxis","dimType","defaultDimValueGetters","prepareInvertedIndex","getIndicesCtor","prepareStorage","getRawIndexWithoutIndices","getRawIndexWithIndices","getId","getIdNameFromStore","makeIdFromName","normalizeDimensions","cloneListForMapAndSample","getInitialExtent","setItemDataAndSeriesIndex","transferProperties","DataDimensionInfo","isObject","UNDEFINED","INDEX_NOT_FOUND","ID_PREFIX","dataCtors","Float64Array","Int32Array","CtorUint32Array","Uint32Array","CtorInt32Array","CtorUint16Array","Uint16Array","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","List","hostModel","_count","_rawCount","_storage","_storageArr","_nameList","_idList","_visual","_layout","_itemVisuals","_itemLayouts","_graphicEls","_rawExtent","_approximateExtent","_calculationInfo","hasItemOption","TRANSFERABLE_METHODS","CHANGABLE_METHODS","DOWNSAMPLE_METHODS","dimensionInfos","invertedIndicesMap","dimInfoInput","dimensionName","_nameDimIdx","_nameOrdinalMeta","itemId","_idDimIdx","_idOrdinalMeta","_dimensionInfos","_dimensionsSummary","_invertedIndicesMap","getDimension","getDimensionsOnCoord","dimensionsSummary","dims","initData","nameList","dimValueGetter","notProvider","_rawData","sourceFormat","getSource","_indices","_dontMakeIdFromName","fillStorage","_nameRepeatCount","defaultDimValueGetter","_dimValueGetter","_dimValueGetterArrayRows","arrayRows","_initDataFromProvider","pure","getProvider","appendData","persistent","appendValues","dimLen","rawExtent","rawExtentArr","storageArr","emptyDataItem","sourceIdx","dimIdx","dimRawExtent","append","dimensionInfoMap","idList","isFormatOriginal","getItem","dimStorage","clean","getIndices","indices","Ctor","constructor","thisCount","buffer","getByDimIdx","dimStore","getByRawIndex","rawIdx","dimData","initialExtent","dimExtent","currEnd","useRaw","setCalculationInfo","getSum","sum","getMedian","dimDataArray","sortedDimDataArray","rawIndexOf","invertedIndices","rawIndex","indexOfRawIndex","rawDataIndex","maxDistance","nearestIndices","nearestIndicesLen","getRawDataItem","ctx","ctxCompat","fCtx","dimNames","dimSize","dimIndices","dim0","keep","originalCount","quickFinished","dimStorage2","min2","max2","val2","dimk","tmpRetValue","dataCount","retValue","rawExtentOnDim","downSample","dimension","rate","sampleValue","sampleIndex","targetStorage","frameValues","frameSize","dataIdx","sampleFrameIdx","lttbDownSample","valueDimension","maxArea","nextRawIndex","sampledIndex","currentRawIndex","nextFrameStart","nextFrameEnd","avgX","avgY","frameStart","frameEnd","pointAX","pointAY","otherList","thisList","visual","setVisual","kvObj","itemVisual","hasItemVisual","ensureUniqueItemVisual","itemVisuals","setItemVisual","clearAllVisual","setLayout","getLayout","getItemLayout","setItemLayout","merge","clearItemLayouts","setItemGraphicEl","eachItemGraphicEl","cloneShallow","wrapMethod","injectFunction","originalMethod","__wrappedMethods","res","internalField","getDimValueSimply","cloneChunk","originalChunk","objectRows","keyedColumns","typedArray","dimInfo","chunk","DataCtor","oldStore","oldLen","newStore","console","error","excludeDimensions","allDimensions","originalStorage","childECData","thisECData","source","nameDimIdx","idDimIdx","nameRepeatCount","nmCnt","hasXOrY","hasXAndY","markerTypeCalculatorWithExtent","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","calcDataDim","numCalculate","coordArrValue","markerTypeCalculator","average","median","dataTransform","coordInfo","baseDataDim","valueDataDim","radiusAxis","angleAxis","valueIndex","valueDim","dataDimToCoordDim","dataFilter","sum_1","count_1","MarkerView","markerGroupMap","renderSeries","markKeep","drawGroup","blurSeries","seriesModelList","isCoordinateSystemType","markAreaTransform","maModel","lt","rb","ltCoord","rbCoord","isInifinity","ifMarkAreaHasOnlyDim","fromCoord","toCoord","otherDimIndex","markAreaFilter","getSingleMarkerEndPoint","itemModel","xPx","yPx","getMarkerPosition","pt","dimPermutations","MarkAreaView","markAreaModel","areaData_1","areaGroupMap","polygonGroup","areaData","createList","xPointExtent","yPointExtent","overlapped","allClipped","oldIdx","labelFetcher","labelDataIndex","inheritColor","coordDimsInfos","optData","markArea","completeDimensions","sysDims","dimsDef","dataDimNameMap","coordDimNameMap","dimCount","getDimCount","dimDefItemRaw","dimDefItem","userDimName","resultItem","displayName","encodeDef","encodeDefaulter","encodeDefMap","dataDimsRaw","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","extra","genName","Must","optDimCount","dimensionsDetectedCount","createDimensions","coordDimensions","dimensionsDefine","encodeDefine","dimensionsCount","CoordSysInfo","coordSysDims","axisMap","categoryAxisMap","getCoordSysInfoBySeries","fetch","fetchers","cartesian2d","firstCategoryDimIndex","singleAxisModel","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","parallel","parallelModel","parallelAxisIndex","createListFromArray","coordSysDimDefs","registeredCoordSys","CoordinateSystem","getDimensionsInfo","hasNameEncode","useEncodeDefaulter","dimInfoList","categoryAxisModel","stackCalculationInfo","isNeedCompleteOrdinalData","itemOpt","firstDataNotNull","LineSeriesModel","hasSymbolVisual","getInitialData","Group","visualType","visualRotate","symbolType","legendHoverLink","clip","endLabel","valueAnimation","distance","smooth","smoothMonotone","showSymbol","showAllSymbol","connectNulls","sampling","animationEasing","progressive","hoverLayerThreshold","LineSeries","getDefaultLabel","labelDims","rawVal","getDefaultInterpolatedLabel","interpolatedValue","Symbol","seriesScope","opts","updateData","_createSymbol","keepAspect","symbolPath","culling","driftSymbol","_symbolType","stopSymbolAnimation","toLastFrame","getSymbolPath","highlight","downplay","setZ","setDraggable","getSymbolSize","disableAnimation","_updateCommon","_sizeX","_sizeY","_seriesModel","emphasisItemStyle","blurItemStyle","selectItemStyle","blurScope","labelStatesModels","hoverScale","cursorStyle","emphasisModel","symbolOffset","symbolStyle","visualColor","pathStyle","image","__isEmptyBrush","setColor","symbolInnerColor","liftZ","z2Origin","_z2","useNameLabel","getLabelDefaultText","defaultOpacity","scaleRatio","setSymbolScale","fadeOut","animationOpt","fadeLabel","removeOpt","removeTextContent","symbolNeedsDraw","isIgnore","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","_SymbolCtor","oldData","symbolUpdateOpt","getSymbolPoint","symbolEl","_getSymbolPoint","isPersistent","updateLayout","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","incremental","enableAnimation","prepareDataCoordInfo","valueOrigin","valueStart","getValueStart","stackResultDim","dataDimsForPoint","getStackedOnPoint","dataCoordInfo","supportFloat32Array","Float32ArrayCtor","createFloat32Array","arg","diffData","diffResult","cmd","idx1","lineAnimationDiff","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldPoints","newPoints","diffItem","pointAdded","oldIdx2","newIdx2","currentX","currentY","nextX","nextY","newDataDimsForPoint","oldPt","stackedOnPoint","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","stackedOnCurrent","stackedOnNext","isPointNull","drawSegment","segLen","allLen","prevX","prevY","cpx0","cpy0","cpx1","cpy1","nextIdx","tmpK","ratioNextSeg","vx","vy","nextCpx0","nextCpy0","dx0","dx1","dy0","dy1","lenPrevSeg","lenNextSeg","bezierCurveTo","lineTo","ECPolylineShape","smoothConstraint","ECPolyline","getDefaultStyle","getDefaultShape","buildPath","getPointOn","xOrY","createPathProxy","CMD","PathProxy","isDimX","roots","x3","y3","M","L","C","nRoot","t_1","Path","ECPolygonShape","ECPolygon","stackedOnPoints","stackedOnSmooth","closePath","createGridClipPath","hasAnimation","done","during","isAxisInversed","duringCb","percent","createPolarClipPath","sectorArea","r0","startAngle","endAngle","clockwise","isRadial","isPointsSame","points1","points2","bboxFromPoints","minX","minY","maxX","maxY","getBoundingDiff","_a","min1","max1","_b","getSmooth","getStackedOnPoints","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","stepPt","nextPt","middle","stepPt2","getVisualGradient","visualMetaList","visualMeta","colorStops","stops","stop","stopLen","outerColors","tinyExtent","minCoord","maxCoord","coordSpan","gradient","getIsIgnoreFunc","isAuto","canShowAllSymbolForCategory","categoryDataDim","labelMap","availSize","dataLen","getLastIndexNotNull","getPointAtIndex","getIndexRange","prevIndex","nextIndex","createLineClipPath","lineView","endLabelModel_1","showEndLabel","valueAnimation_1","data_1","labelAnimationRecord_1","lastFrameIndex","clipRect","_endLabelOnDuring","_endLabel","originalX","originalY","rectShape","getEndLabelStateSpecified","endLabelModel","isBaseInversed","LineView","lineGroup","symbolDraw","_symbolDraw","_lineGroup","isCoordSysPolar","prevCoordSys","_coordSys","_polyline","_polygon","isAreaChart","isIgnoreFunc","__temp","clipShapeForSymbol","_clipShapeForSymbol","_step","_newPolygon","_initOrUpdateEndLabel","_stackedOnPoints","_points","_doUpdateAnimation","_initSymbolLabelAnimation","_newPolyline","lineJoin","emphasisLineStyle","getState","stackedOnSeries","changePolyState","toState","_changePolyState","onHoverStateChange","_valueOrigin","symbolLabel","isHorizontalOrRadial","isAxisInverse","seriesDuration","seriesDalay","seriesDalayValue","polarClip","gridClip","ratio","animateTo","animateFrom","disableLabelAnimation","data_2","ignoreClip","enableTextSetter","animationRecord","distanceX","distanceY","dataIndexRange","setLabelText","__points","updatedDataInfo","diffStatus","ptIdx","animators","dirtyShape","pointsLayout","forceStoreInTypedArray","plan","useTypedArray","dimInfo0","dimInfo1","dimIdx0","dimIdx1","progress","segCount","tmpIn","tmpOut","samplers","nearest","indexSampler","dataSample","dpr","getDevicePixelRatio","sampler","categoryFilter","graphSeries","categoriesData","getCategoriesData","graph","getGraph","categoryNames","categoryVisual","paletteScope","categoryNameIdxMap","getColorFromPalette","symbolVisualList","symbolVisual","categoryIdx","categoryStyle","visualList","graphEdgeVisual","edgeData","getEdgeData","getEdgeByIndex","existsStyle","nodeStyle","node1","node2","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","curvenessList","__curvenessList","getKeyOfEdges","n1","n2","getOppositeKey","getEdgeFromMap","__edgeMap","getTotalLengthBetweenNodes","getEdgeMapLengthWithKey","lenV","edgeMap","initCurvenessList","createEdgeMapForCurveness","oppositeEdges","isForward","getCurvenessForEdge","needReverse","autoCurvenessParams","isArrayParam","edgeArray","edgeIndex","totalLen","curKey","parityCorrection","oppositeKey","resValue","simpleLayout","eachNode","simpleLayoutEdge","eachEdge","curveness","graphSimpleLayout","dimensions_1","getNodeGlobalScale","nodeScaleRatio","groupZoom","roamZoom","getZoom","nodeScale","_symbolRadiansHalf","circularLayout","basedOn","nodeData","_layoutNodesBasedOn","cp1","x12","y12","unitAngle","getValue","radianHalf","sumRadian","symbolRadianHalf","asin","halfRemainRadian","graphCircularLayout","scaleAndAdd","inNodes","inEdges","nodes","edges","gravity","pp","beforeStepCallback","afterStepCallback","initialFriction","friction","warmUp","setFixed","fixed","setUnfixed","beforeStep","afterStep","v12","nLen","ignoreForceLayout","repFact","rep","finished","graphForceLayout","preservedPoints_1","preservedPoints","graph_1","nodeData_1","forceModel","initLayout","nodeDataExtent_1","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","edgeModel","forceInstance","l","getNodeByIndex","stopped","forceLayout","v2ApplyTransform","vector","View","_roamTransformable","Transformable","_rawTransformable","setBoundingRect","setViewRect","_transformTo","_viewRect","rawTransform","calculateTransform","rawParent","_updateTransform","setCenter","centerCoord","_center","_updateCenterAndZoom","setZoom","zoomLimit","_zoom","getDefaultCenter","rawRect","getCenter","getRoamTransform","rawTransformMatrix","roamTransform","defaultCenter","roamTransformable","rawTransformable","_rawTransform","invTransform","getTransformInfo","dummyTransformable","roam","getViewRect","getViewRectAfterRoam","noRoam","getCoordSys","aspect","createViewCoordSys","viewList","positions","bbox","viewRect","bbWidth","bbHeight","viewCoordSys","straightLineProto","bezierCurveProto","StraightLineShape","CurveShape","isStraightLine","ECLinePath","pointAt","tangentAt","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","createSymbol","lineData","symbolKeepAspect","symbolSizeArr","symbolOffsetArr","__specifiedRotation","createLine","setLinePoints","Line","_createLine","_updateCommonStl","getLinePath","blurLineStyle","selectLineStyle","stateName","lineState","lineStateStyle","state","stateStyle","labelNormalModel","__align","__verticalAlign","__position","__labelDistance","local","linePath","dirty","beforeUpdate","symbolFrom","symbolTo","invScale","__dirty","fromPos","toPos","setSymbolRotation","halfPercent","tangent","cp","atan2","specifiedRotation","LineDraw","LineCtor","_LineCtor","lineDraw","oldLineData","_lineData","_doAdd","_doUpdate","isEffectObject","itemLayout","lineNeedsDraw","newLineData","itemEl","isPointNaN","pts","updateViewOnPan","controllerHost","updateViewOnZoom","zoomDelta","zoomX","zoomY","newZoom","zoomMin","zoomMax","zoomScale","v1","v2","v3","quadraticAt","curve","v2DistSquare","mathAbs","intersectCurveCircle","curvePoints","p0","radiusSquare","_t","nextDiff","adjustEdge","tmp0","quadraticSubdivide","pts2","fromSymbol","toSymbol","__original","originalPoints","isViewCoordSys","GraphView","_controller","_controllerHost","_lineDraw","_firstRender","_model","groupNewProp","_updateNodeAndLinkScale","_updateController","_layoutTimeout","layoutAnimation","_startForceLayoutIteration","getGraphicEl","_layouting","getAdjacentDataIndices","circularRotateLabel","rad","isLeft","origin","updateLabelLayout","generateNodeKey","Graph","directed","_nodesMap","_edgesMap","_directed","isDirected","addNode","nodesMap","GraphNode","hostGraph","getNodeById","addEdge","edgesMap","GraphEdge","outEdges","getEdge","breadthFirstTraverse","startNode","edgeType","__visited","queue","currentNode","otherNode","degree","inDegree","outDegree","adjacentEdge","createGraphDataProxyMixin","hostName","linkList","mainData","datas","main","datasAttr","linkAll","transferInjection","cloneShallowInjection","changeInjection","isMainData","linkSingle","struct","getLinkedData","getLinkedDataAll","structAttr","createGraphFromNodeEdge","beforeLink","linkNameList","validEdges","linkCount","coordSysCtor","LegendVisualProvider","getDataWithEncodedVisual","_getDataWithEncodedVisual","_getRawData","dataWithEncodedVisual","GraphSeriesModel","_categoriesData","fillDataTextStyle","links","_updateCategoriesData","categoriesModels","_categoriesModels","categoryModel","oldGetModel","newGetModel","resolveParentPath","pathArr","newPathArr","sourceName","targetName","nameArr","nodeMarkup","circular","rotateLabel","force","edgeSymbol","edgeSymbolSize","edgeLabel","GraphSeries","updateCenterAndZoom","previousZoom","fixX","fixY","actionInfo","VISUAL","POST_CHART_LAYOUT","returnFalse","createDom","newDom","util","newDomStyle","setAttribute","Layer","dom","motionBlur","lastFrameAlpha","virtual","config","maxRepaintRectCount","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","onselectstart","webkitUserSelect","userSelect","webkitTapHighlightColor","domBack","ctxBack","getElementCount","afterBrush","initContext","getContext","setUnpainted","createBackBuffer","createRepaintRects","displayList","prevList","hasIntersections","mergedRepaintRects","full","pendingRect","addRectToMergePool","isZero","copy","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","pendingRect_1","aArea","bArea","pendingArea","deltaArea","shouldPaint","shouldBePainted","prevRect","__isRendered","getPrevPaintRect","curRect","getPaintRect","__zr","splice","_paintRects","debugGetPaintRects","clearAll","clearColor","repaintRects","haveMotionBLur","globalCompositeOperation","drawImage","clearRect","clearColorGradientOrPattern","__canvasGradient","__painter","refresh","save","fillStyle","fillRect","restore","globalAlpha","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","parseInt10","isLayerValid","layer","__builtin__","createRoot","domRoot","CanvasPainter","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","nodeName","toUpperCase","_opts","devicePixelRatio","_singleCanvas","rootStyle","zlevelList","layers","rootCanvas","_width","_height","mainLayer","_domRoot","_getSize","isSingleCanvas","viewportRoot","paintAll","_redrawId","_paintList","_backgroundColor","useDirtyRect","refreshHover","_paintHoverList","_hoverlayer","scope","inHover","__inHover","getLayer","getHoverLayer","paintOne","redrawId","_updateLayerStatus","_doPaintList","needsRefreshHover","_compositeManually","eachLayer","requestAnimationFrame","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","now","startTime","firstEl","notClear","repaint","repaintRect","prevEl","_doPaintEl","dTime","prevElClipPaths","beginPath","draw","currentLayer","isLast","paintRect","setPrevPaintRect","insertLayer","layersMap","prevLayer","prevDom","nextSibling","insertBefore","firstChild","eachOtherLayer","getLayers","updatePrevLayer","prevZlevel","incrementalLayerCount","_clearLayer","setBackgroundColor","configLayer","layerConfig","_zlevel","delLayer","clearLayer","getRenderedCanvas","imageLayer","width_1","height_1","renderToCanvas","whIdx","cwh","plt","prb","pathToImage","canvas","shadowBlurSize","hasStroke","leftMargin","rightMargin","topMargin","bottomMargin","pathTransform","imgShape","methods","computed","toolbox","saveAsImage","legend"],"mappings":"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","file":"js/chunk-5608d287.7e6a778a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LossAndTime.vue?vue&type=style&index=0&id=c6fb09f0&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Procedure.vue?vue&type=style&index=0&id=16af0b26&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDetail.vue?vue&type=style&index=0&id=7690e010&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainAndValidate.vue?vue&type=style&index=0&id=54264f58&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"task_detail\"},[_c('el-row',{attrs:{\"id\":\"top-buttons\"}},[_c('el-button',{staticClass:\"oper-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push(\"/task_new\")}}},[_vm._v(\" 发起任务 \"),_c('i',{staticClass:\"el-icon-s-promotion\"})]),_c('el-button',{staticClass:\"oper-btn\",attrs:{\"type\":\"info\"},on:{\"click\":_vm.changeAlias}},[_vm._v(\" 修改备注 \"),_c('i',{staticClass:\"el-icon-edit\"})]),_c('el-button',{staticClass:\"oper-btn\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.downloadOutput(_vm.task_info.task_id)}}},[_vm._v(\" 输出文件 \"),_c('i',{staticClass:\"el-icon-download\"})]),_c('el-popconfirm',{staticClass:\"el-popconfirm oper-btn\",attrs:{\"title\":\"确定要终止任务吗？\"},on:{\"confirm\":_vm.stopTask}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"warning\"},slot:\"reference\"},[_vm._v(\" 终止任务 \"),_c('i',{staticClass:\"el-icon-close\"})])],1),_c('el-popconfirm',{staticClass:\"el-popconfirm oper-btn\",attrs:{\"title\":\"确定要删除任务吗？\"},on:{\"confirm\":_vm.deleteTask}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\" 删除任务 \"),_c('i',{staticClass:\"el-icon-delete\"})])],1)],1),(_vm.task_info_display_control)?_c('el-card',{staticClass:\"task_info_card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('b',[_vm._v(\"任务信息\")])]),_c('table',{staticClass:\"task_info_table\",staticStyle:{\"word-break\":\"break-all\",\"word-wrap\":\"break-word\"},attrs:{\"border\":\"0\"}},[_c('tr',[_c('td',[_vm._v(\"任务ID:\"+_vm._s(_vm.task_info.task_id))]),_c('td',[_c('pre',[_vm._v(\"\\t\")])]),_c('td',[_vm._v(\"任务发起方:\"+_vm._s(_vm.task_info.party_name))]),_c('td',[_c('pre',[_vm._v(\"\\t\")])]),_c('td',[_vm._v(\"任务参与方:\"+_vm._s(_vm.task_info.party_names))]),_c('td',[_c('pre',[_vm._v(\"\\t\")])]),_c('td',[_vm._v(\"任务状态:\"),_c('span',{class:_vm.task_info.status},[_vm._v(_vm._s(_vm._f(\"task_status\")(_vm.task_info.status)))])])]),_c('tr',[_c('td',[_vm._v(\"任务创建时间:\"+_vm._s(_vm.task_info.create_time))]),_c('td',[_c('pre',[_vm._v(\"\\t\")])]),_c('td',[_vm._v(\"状态更新时间:\"+_vm._s(_vm.task_info.update_time))]),_c('td',[_c('pre',[_vm._v(\"\\t\")])]),_c('td',[_vm._v(\"任务配置：\"),_c('a',{staticClass:\"show-modal\",on:{\"click\":function($event){_vm.task_json_visible=true;}}},[_vm._v(\"点击查看\")])]),_c('td',[_c('pre',[_vm._v(\"\\t\")])]),_c('td',[_vm._v(\"任务备注名:\"+_vm._s(_vm.task_info.alias || \"暂无\"))])]),_vm._l((this.metrics_task_info),function(item,index){return _c('tr',{key:index},_vm._l((item),function(value,key,index2){return _c('td',{key:index2,attrs:{\"colspan\":\"2\"}},[_vm._v(_vm._s(key)+\":\"+_vm._s(value))])}),0)})],2)]):_vm._e(),_c('el-row',{attrs:{\"gutter\":10}},[(!_vm.task_info_display_control)?_c('el-col',{attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":6}},[_c('el-card',{staticClass:\"box-card card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('b',[_vm._v(\"任务信息\")])]),_c('p',[_vm._v(\"任务ID：\"+_vm._s(_vm.task_info.task_id))]),_c('p',[_vm._v(\"任务发起方：\"+_vm._s(_vm.task_info.party_name))]),_c('p',[_vm._v(\"任务参与方：\"+_vm._s(_vm.task_info.party_names))]),_c('p',[_vm._v(\"任务状态：\"),_c('span',{class:_vm.task_info.status},[_vm._v(_vm._s(_vm._f(\"task_status\")(_vm.task_info.status)))])]),_c('p',[_vm._v(\"任务备注名：\"+_vm._s(_vm.task_info.alias || \"暂无\"))]),_c('p',[_vm._v(\"任务创建时间：\"+_vm._s(_vm.task_info.create_time))]),_c('p',[_vm._v(\"状态更新时间：\"+_vm._s(_vm.task_info.update_time))]),_c('p',[_vm._v(\"任务配置：\"),_c('a',{staticClass:\"show-modal\",on:{\"click\":function($event){_vm.task_json_visible=true;}}},[_vm._v(\"点击查看\")])]),(_vm.metrics !== null && _vm.metrics.length > 0)?_c('div',[_c('p',[_vm._v(\"模型评估指标：\")]),_vm._l((_vm.metrics),function(m,index){return _c('div',{key:index},_vm._l((m),function(value,key,index2){return _c('div',{key:index2},[_c('p',[_vm._v(_vm._s(key)+\"=\"+_vm._s(value))])])}),0)})],2):_vm._e()])],1):_vm._e(),(!_vm.task_info_display_control)?_c('el-col',{attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":9}},[_c('Procedure',{staticClass:\"cards\",attrs:{\"procedure\":_vm.procedure,\"task_json_dict\":_vm.task_json_dict}})],1):_vm._e(),(!_vm.task_info_display_control)?_c('el-col',{attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":9}},[_c('LossAndTime',{staticClass:\"cards\",attrs:{\"loss_and_time\":_vm.loss_and_time}})],1):_vm._e(),(_vm.task_info_display_control)?_c('el-col',{attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":8}},[_c('Procedure',{staticClass:\"cards\",attrs:{\"procedure\":_vm.procedure,\"task_json_dict\":_vm.task_json_dict}})],1):_vm._e(),(_vm.task_info_display_control)?_c('el-col',{attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":8}},[_c('LossAndTime',{staticClass:\"cards\",attrs:{\"loss_and_time\":_vm.loss_and_time}})],1):_vm._e(),(_vm.task_info_display_control)?_c('el-col',{attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":8}},[_c('TrainAndValidate',{staticClass:\"cards\",attrs:{\"train_and_validate\":_vm.train_and_validate}})],1):_vm._e()],1),(_vm.error_msg.length > 0)?_c('el-row',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('b',[_vm._v(\"任务错误信息\")])]),_c('div',{attrs:{\"id\":\"error_msg\"}},_vm._l((_vm.error_msg),function(msg,index){return _c('div',{key:index},[_c('span',{staticClass:\"line-number\"},[_vm._v(_vm._s(index+1))]),_vm._v(\" \"+_vm._s(msg)+\" \")])}),0)])],1):_vm._e(),_c('el-row',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('b',[_vm._v(\"日志信息\")]),_c('span',{staticClass:\"log-span\"},[_vm._v(\"每5秒日志自动更新\")]),_c('el-button',{staticClass:\"log-span\",attrs:{\"icon\":\"el-icon-refresh-right\",\"size\":\"mini\",\"circle\":\"\"},on:{\"click\":_vm.refreshLog}}),_c('span',{attrs:{\"id\":\"scroll-switch\"}},[_vm._v(\" 日志更新后划到底部 \"),_c('el-switch',{staticClass:\"log-span\",model:{value:(_vm.scroll_to_bottom),callback:function ($$v) {_vm.scroll_to_bottom=$$v},expression:\"scroll_to_bottom\"}})],1)],1),_c('div',{attrs:{\"id\":\"task_log\"}},_vm._l((_vm.task_logs),function(task_log,index){return _c('div',{key:index},[_c('span',{staticClass:\"line-number\"},[_vm._v(_vm._s(index+1))]),_vm._v(\" \"+_vm._s(task_log)+\" \")])}),0)])],1),_c('el-dialog',{attrs:{\"title\":\"任务配置\",\"visible\":_vm.task_json_visible,\"width\":\"80%\"},on:{\"update:visible\":function($event){_vm.task_json_visible=$event}}},[_c('vue-json-editor',{attrs:{\"mode\":\"code\",\"lang\":\"zh\",\"id\":\"task-json-dialog\"},model:{value:(_vm.task_json_dict),callback:function ($$v) {_vm.task_json_dict=$$v},expression:\"task_json_dict\"}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.copyTaskJSON}},[_vm._v(\"一键复制\")]),_c('el-button',{on:{\"click\":function($event){_vm.task_json_visible=false}}},[_vm._v(\"关闭\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { registerPreprocessor, registerProcessor, registerPostInit, registerPostUpdate, registerAction, registerCoordinateSystem, registerLayout, registerVisual, registerTransform, registerLoading, registerMap, PRIORITY } from './core/echarts';\nimport ComponentView from './view/Component';\nimport ChartView from './view/Chart';\nimport ComponentModel from './model/Component';\nimport SeriesModel from './model/Series';\nimport { isFunction, indexOf, isArray, each } from 'zrender/lib/core/util';\nimport { registerPainter } from 'zrender/lib/zrender';\nvar extensions = [];\nvar extensionRegisters = {\n  registerPreprocessor: registerPreprocessor,\n  registerProcessor: registerProcessor,\n  registerPostInit: registerPostInit,\n  registerPostUpdate: registerPostUpdate,\n  registerAction: registerAction,\n  registerCoordinateSystem: registerCoordinateSystem,\n  registerLayout: registerLayout,\n  registerVisual: registerVisual,\n  registerTransform: registerTransform,\n  registerLoading: registerLoading,\n  registerMap: registerMap,\n  PRIORITY: PRIORITY,\n  ComponentModel: ComponentModel,\n  ComponentView: ComponentView,\n  SeriesModel: SeriesModel,\n  ChartView: ChartView,\n  // TODO Use ComponentModel and SeriesModel instead of Constructor\n  registerComponentModel: function (ComponentModelClass) {\n    ComponentModel.registerClass(ComponentModelClass);\n  },\n  registerComponentView: function (ComponentViewClass) {\n    ComponentView.registerClass(ComponentViewClass);\n  },\n  registerSeriesModel: function (SeriesModelClass) {\n    SeriesModel.registerClass(SeriesModelClass);\n  },\n  registerChartView: function (ChartViewClass) {\n    ChartView.registerClass(ChartViewClass);\n  },\n  registerSubTypeDefaulter: function (componentType, defaulter) {\n    ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\n  },\n  registerPainter: function (painterType, PainterCtor) {\n    registerPainter(painterType, PainterCtor);\n  }\n};\nexport function use(ext) {\n  if (isArray(ext)) {\n    // use([ChartLine, ChartBar]);\n    each(ext, function (singleExt) {\n      use(singleExt);\n    });\n    return;\n  }\n\n  if (indexOf(extensions, ext) >= 0) {\n    return;\n  }\n\n  extensions.push(ext);\n\n  if (isFunction(ext)) {\n    ext = {\n      install: ext\n    };\n  }\n\n  ext.install(extensionRegisters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { createTextStyle } from '../../label/labelStyle';\nimport { getLayoutRect } from '../../util/layout';\nimport ComponentModel from '../../model/Component';\nimport ComponentView from '../../view/Component';\nimport { windowOpen } from '../../util/format';\n\nvar TitleModel =\n/** @class */\nfunction (_super) {\n  __extends(TitleModel, _super);\n\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel); // View\n\n\nvar TitleView =\n/** @class */\nfunction (_super) {\n  __extends(TitleView, _super);\n\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleView.type;\n    return _this;\n  }\n\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right'); // @ts-ignore\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom'); // @ts-ignore\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\n\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single']; // Supported coords.\n// FIXME: polar has been broken (but rarely used).\n\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\n\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = []; // Key: uid of dataZoomModel\n\n  var effectedModelMap = createHashMap(); // Find the dataZooms specified by payload.\n\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  }); // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n\n  var foundNewLink;\n\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\n\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n\n    if (!axisModel) {\n      return;\n    }\n\n    var coordSysModel = axisModel.getCoordSysModel();\n\n    if (!coordSysModel) {\n      return;\n    }\n\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model';\n\nvar DataZoomAxisInfo =\n/** @class */\nfunction () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n\n  return DataZoomAxisInfo;\n}();\n\nvar DataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomModel, _super);\n\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\n     * It is `[rangeModeForMin, rangeModeForMax]`.\n     * The optional values for `rangeMode`:\n     * + `'value'` mode: the axis extent will always be determined by\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n     *     how data like and how `axis.min` and `axis.max` are.\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n     *\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\n     */\n\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\n     * Suppose a \"main process\" start at the point that model prepared (that is,\n     * model initialized or merged or method called in `action`).\n     * We should keep the `main process` idempotent, that is, given a set of values\n     * on `option`, we get the same result.\n     *\n     * But sometimes, values on `option` will be updated for providing users\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n     * should not be the base/input of the `main process`.\n     *\n     * So in that case we should save and keep the input of the `main process`\n     * separately, called `settledOption`.\n     *\n     * For example, consider the case:\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\n     *     calculated value.\n     * (Step)2) click the legend to hide and show a series,\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\n     *     which brings incorrect result.\n     */\n\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption); //FIX #2591\n\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option; // if (!env.canvasSupported) {\n    //     thisOption.realtime = false;\n    // }\n\n    this._setDefaultThrottle(inputRawOption);\n\n    this._updateRangeUse(inputRawOption);\n\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      } // Otherwise do nothing and use the merge result.\n\n    }, this);\n\n    this._resetTarget();\n  };\n\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING); // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occured.\n\n      if (!refering.specified) {\n        return;\n      }\n\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true; // Find axis that parallel to dataZoom as default.\n\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    } // Find axis that parallel to dataZoom as default.\n\n\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function (axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n\n      if (!axisModel) {\n        return;\n      }\n\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false; // Find parallel axes in the same grid.\n\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function (axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim; // Find the first axis\n\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      } // else remain its original setting.\n\n    });\n  };\n\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n\n\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\n   * If not specified, set to undefined.\n   */\n\n\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n\n    this._updateRangeUse(opt);\n  };\n\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @return [startValue, endValue] value can only be '-' or finite number.\n   */\n\n\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\n   * @param axisModel If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   */\n\n\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    } // Find the first hosted axisProxy\n\n\n    var firstProxy;\n\n    var axisDimList = this._targetAxisInfoMap.keys();\n\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    } // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n\n\n    return firstProxy;\n  };\n\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n\n    return this._orient;\n  };\n\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\n * Retrieve the those raw params from option, which will be cached separately.\n * becasue they will be overwritten by normalized/calculated values in the main\n * process.\n */\n\n\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\n\nexport default DataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\n\nvar SelectDataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomModel, _super);\n\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\n\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\n\nvar DataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomView, _super);\n\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\n\nexport default DataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\n\nvar SelectDataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomView, _super);\n\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\n\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param delta Move length.\n * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param handleIndex Can be 'all', means that both move the two handleEnds.\n * @param minSpan The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param maxSpan The range of dataZoom can not be larger than that.\n * @return The input handleEnds.\n */\nexport default function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta; // Restrict in extent.\n\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n  var currDistSign;\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  } // Shrink span.\n\n\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n\n  return handleEnds;\n}\n\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\n\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as clazzUtil from '../util/clazz';\n\nvar Scale =\n/** @class */\nfunction () {\n  function Scale(setting) {\n    this._setting = setting || {};\n    this._extent = [Infinity, -Infinity];\n  }\n\n  Scale.prototype.getSetting = function (name) {\n    return this._setting[name];\n  };\n  /**\n   * Set extent from data\n   */\n\n\n  Scale.prototype.unionExtent = function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]); // not setExtent because in log axis it may transformed to power\n    // this.setExtent(extent[0], extent[1]);\n  };\n  /**\n   * Set extent from data\n   */\n\n\n  Scale.prototype.unionExtentFromData = function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\n   * Get extent\n   *\n   * Extent is always in increase order.\n   */\n\n\n  Scale.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Set extent\n   */\n\n\n  Scale.prototype.setExtent = function (start, end) {\n    var thisExtent = this._extent;\n\n    if (!isNaN(start)) {\n      thisExtent[0] = start;\n    }\n\n    if (!isNaN(end)) {\n      thisExtent[1] = end;\n    }\n  };\n  /**\n   * If value is in extent range\n   */\n\n\n  Scale.prototype.isInExtentRange = function (value) {\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  /**\n   * When axis extent depends on data and no data exists,\n   * axis ticks should not be drawn, which is named 'blank'.\n   */\n\n\n  Scale.prototype.isBlank = function () {\n    return this._isBlank;\n  };\n  /**\n   * When axis extent depends on data and no data exists,\n   * axis ticks should not be drawn, which is named 'blank'.\n   */\n\n\n  Scale.prototype.setBlank = function (isBlank) {\n    this._isBlank = isBlank;\n  };\n\n  return Scale;\n}();\n\nclazzUtil.enableClassManagement(Scale);\nexport default Scale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, isObject, map } from 'zrender/lib/core/util';\n\nvar OrdinalMeta =\n/** @class */\nfunction () {\n  function OrdinalMeta(opt) {\n    this.categories = opt.categories || [];\n    this._needCollect = opt.needCollect;\n    this._deduplication = opt.deduplication;\n  }\n\n  OrdinalMeta.createByAxisModel = function (axisModel) {\n    var option = axisModel.option;\n    var data = option.data;\n    var categories = data && map(data, getName);\n    return new OrdinalMeta({\n      categories: categories,\n      needCollect: !categories,\n      // deduplication is default in axis.\n      deduplication: option.dedplication !== false\n    });\n  };\n\n  ;\n\n  OrdinalMeta.prototype.getOrdinal = function (category) {\n    // @ts-ignore\n    return this._getOrCreateMap().get(category);\n  };\n  /**\n   * @return The ordinal. If not found, return NaN.\n   */\n\n\n  OrdinalMeta.prototype.parseAndCollect = function (category) {\n    var index;\n    var needCollect = this._needCollect; // The value of category dim can be the index of the given category set.\n    // This feature is only supported when !needCollect, because we should\n    // consider a common case: a value is 2017, which is a number but is\n    // expected to be tread as a category. This case usually happen in dataset,\n    // where it happent to be no need of the index feature.\n\n    if (typeof category !== 'string' && !needCollect) {\n      return category;\n    } // Optimize for the scenario:\n    // category is ['2012-01-01', '2012-01-02', ...], where the input\n    // data has been ensured not duplicate and is large data.\n    // Notice, if a dataset dimension provide categroies, usually echarts\n    // should remove duplication except user tell echarts dont do that\n    // (set axis.deduplication = false), because echarts do not know whether\n    // the values in the category dimension has duplication (consider the\n    // parallel-aqi example)\n\n\n    if (needCollect && !this._deduplication) {\n      index = this.categories.length;\n      this.categories[index] = category;\n      return index;\n    }\n\n    var map = this._getOrCreateMap(); // @ts-ignore\n\n\n    index = map.get(category);\n\n    if (index == null) {\n      if (needCollect) {\n        index = this.categories.length;\n        this.categories[index] = category; // @ts-ignore\n\n        map.set(category, index);\n      } else {\n        index = NaN;\n      }\n    }\n\n    return index;\n  }; // Consider big data, do not create map until needed.\n\n\n  OrdinalMeta.prototype._getOrCreateMap = function () {\n    return this._map || (this._map = createHashMap(this.categories));\n  };\n\n  return OrdinalMeta;\n}();\n\nfunction getName(obj) {\n  if (isObject(obj) && obj.value != null) {\n    return obj.value;\n  } else {\n    return obj + '';\n  }\n}\n\nexport default OrdinalMeta;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as numberUtil from '../util/number';\nvar roundNumber = numberUtil.round;\n/**\n * @param extent Both extent[0] and extent[1] should be valid number.\n *               Should be extent[0] < extent[1].\n * @param splitNumber splitNumber should be >= 1.\n */\n\nexport function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\n  var result = {};\n  var span = extent[1] - extent[0];\n  var interval = result.interval = numberUtil.nice(span / splitNumber, true);\n\n  if (minInterval != null && interval < minInterval) {\n    interval = result.interval = minInterval;\n  }\n\n  if (maxInterval != null && interval > maxInterval) {\n    interval = result.interval = maxInterval;\n  } // Tow more digital for tick.\n\n\n  var precision = result.intervalPrecision = getIntervalPrecision(interval); // Niced extent inside original extent\n\n  var niceTickExtent = result.niceTickExtent = [roundNumber(Math.ceil(extent[0] / interval) * interval, precision), roundNumber(Math.floor(extent[1] / interval) * interval, precision)];\n  fixExtent(niceTickExtent, extent);\n  return result;\n}\n/**\n * @return interval precision\n */\n\nexport function getIntervalPrecision(interval) {\n  // Tow more digital for tick.\n  return numberUtil.getPrecision(interval) + 2;\n}\n\nfunction clamp(niceTickExtent, idx, extent) {\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n} // In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\n\n\nexport function fixExtent(niceTickExtent, extent) {\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n  clamp(niceTickExtent, 0, extent);\n  clamp(niceTickExtent, 1, extent);\n\n  if (niceTickExtent[0] > niceTickExtent[1]) {\n    niceTickExtent[0] = niceTickExtent[1];\n  }\n}\nexport function contain(val, extent) {\n  return val >= extent[0] && val <= extent[1];\n}\nexport function normalize(val, extent) {\n  if (extent[1] === extent[0]) {\n    return 0.5;\n  }\n\n  return (val - extent[0]) / (extent[1] - extent[0]);\n}\nexport function scale(val, extent) {\n  return val * (extent[1] - extent[0]) + extent[0];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Linear continuous scale\n * http://en.wikipedia.org/wiki/Level_of_measurement\n */\n// FIXME only one data\n\nimport Scale from './Scale';\nimport OrdinalMeta from '../data/OrdinalMeta';\nimport * as scaleHelper from './helper';\nimport { isArray, map, isObject } from 'zrender/lib/core/util';\n\nvar OrdinalScale =\n/** @class */\nfunction (_super) {\n  __extends(OrdinalScale, _super);\n\n  function OrdinalScale(setting) {\n    var _this = _super.call(this, setting) || this;\n\n    _this.type = 'ordinal';\n\n    var ordinalMeta = _this.getSetting('ordinalMeta'); // Caution: Should not use instanceof, consider ec-extensions using\n    // import approach to get OrdinalMeta class.\n\n\n    if (!ordinalMeta) {\n      ordinalMeta = new OrdinalMeta({});\n    }\n\n    if (isArray(ordinalMeta)) {\n      ordinalMeta = new OrdinalMeta({\n        categories: map(ordinalMeta, function (item) {\n          return isObject(item) ? item.value : item;\n        })\n      });\n    }\n\n    _this._ordinalMeta = ordinalMeta;\n    _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\n    return _this;\n  }\n\n  OrdinalScale.prototype.parse = function (val) {\n    return typeof val === 'string' ? this._ordinalMeta.getOrdinal(val) // val might be float.\n    : Math.round(val);\n  };\n\n  OrdinalScale.prototype.contain = function (rank) {\n    rank = this.parse(rank);\n    return scaleHelper.contain(rank, this._extent) && this._ordinalMeta.categories[rank] != null;\n  };\n  /**\n   * Normalize given rank or name to linear [0, 1]\n   * @param val raw ordinal number.\n   * @return normalized value in [0, 1].\n   */\n\n\n  OrdinalScale.prototype.normalize = function (val) {\n    val = this._getTickNumber(this.parse(val));\n    return scaleHelper.normalize(val, this._extent);\n  };\n  /**\n   * @param val normalized value in [0, 1].\n   * @return raw ordinal number.\n   */\n\n\n  OrdinalScale.prototype.scale = function (val) {\n    val = Math.round(scaleHelper.scale(val, this._extent));\n    return this.getRawOrdinalNumber(val);\n  };\n\n  OrdinalScale.prototype.getTicks = function () {\n    var ticks = [];\n    var extent = this._extent;\n    var rank = extent[0];\n\n    while (rank <= extent[1]) {\n      ticks.push({\n        value: rank\n      });\n      rank++;\n    }\n\n    return ticks;\n  };\n\n  OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\n    // Not support.\n    return;\n  };\n  /**\n   * @see `Ordinal['_ordinalNumbersByTick']`\n   */\n\n\n  OrdinalScale.prototype.setSortInfo = function (info) {\n    if (info == null) {\n      this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\n      return;\n    }\n\n    var infoOrdinalNumbers = info.ordinalNumbers;\n    var ordinalsByTick = this._ordinalNumbersByTick = [];\n    var ticksByOrdinal = this._ticksByOrdinalNumber = []; // Unnecessary support negative tick in `realtimeSort`.\n\n    var tickNum = 0;\n    var allCategoryLen = this._ordinalMeta.categories.length;\n\n    for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\n      var ordinalNumber = infoOrdinalNumbers[tickNum];\n      ordinalsByTick[tickNum] = ordinalNumber;\n      ticksByOrdinal[ordinalNumber] = tickNum;\n    } // Handle that `series.data` only covers part of the `axis.category.data`.\n\n\n    var unusedOrdinal = 0;\n\n    for (; tickNum < allCategoryLen; ++tickNum) {\n      while (ticksByOrdinal[unusedOrdinal] != null) {\n        unusedOrdinal++;\n      }\n\n      ;\n      ordinalsByTick.push(unusedOrdinal);\n      ticksByOrdinal[unusedOrdinal] = tickNum;\n    }\n  };\n\n  OrdinalScale.prototype._getTickNumber = function (ordinal) {\n    var ticksByOrdinalNumber = this._ticksByOrdinalNumber; // also support ordinal out of range of `ordinalMeta.categories.length`,\n    // where ordinal numbers are used as tick value directly.\n\n    return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\n  };\n  /**\n   * @usage\n   * ```js\n   * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\n   *\n   * // case0\n   * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\n   * // case1\n   * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\n   * // case2\n   * const coord = axis.dataToCoord(ordinalNumber);\n   * ```\n   *\n   * @param {OrdinalNumber} tickNumber index of display\n   */\n\n\n  OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\n    var ordinalNumbersByTick = this._ordinalNumbersByTick; // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\n    // where ordinal numbers are used as tick value directly.\n\n    return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\n  };\n  /**\n   * Get item on tick\n   */\n\n\n  OrdinalScale.prototype.getLabel = function (tick) {\n    if (!this.isBlank()) {\n      var ordinalNumber = this.getRawOrdinalNumber(tick.value);\n      var cateogry = this._ordinalMeta.categories[ordinalNumber]; // Note that if no data, ordinalMeta.categories is an empty array.\n      // Return empty if it's not exist.\n\n      return cateogry == null ? '' : cateogry + '';\n    }\n  };\n\n  OrdinalScale.prototype.count = function () {\n    return this._extent[1] - this._extent[0] + 1;\n  };\n\n  OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\n   * @override\n   * If value is in extent range\n   */\n\n\n  OrdinalScale.prototype.isInExtentRange = function (value) {\n    value = this._getTickNumber(value);\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n\n  OrdinalScale.prototype.getOrdinalMeta = function () {\n    return this._ordinalMeta;\n  };\n\n  OrdinalScale.prototype.niceTicks = function () {};\n\n  OrdinalScale.prototype.niceExtent = function () {};\n\n  OrdinalScale.type = 'ordinal';\n  return OrdinalScale;\n}(Scale);\n\nScale.registerClass(OrdinalScale);\nexport default OrdinalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as numberUtil from '../util/number';\nimport * as formatUtil from '../util/format';\nimport Scale from './Scale';\nimport * as helper from './helper';\nvar roundNumber = numberUtil.round;\n\nvar IntervalScale =\n/** @class */\nfunction (_super) {\n  __extends(IntervalScale, _super);\n\n  function IntervalScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'interval'; // Step is calculated in adjustExtent.\n\n    _this._interval = 0;\n    _this._intervalPrecision = 2;\n    return _this;\n  }\n\n  IntervalScale.prototype.parse = function (val) {\n    return val;\n  };\n\n  IntervalScale.prototype.contain = function (val) {\n    return helper.contain(val, this._extent);\n  };\n\n  IntervalScale.prototype.normalize = function (val) {\n    return helper.normalize(val, this._extent);\n  };\n\n  IntervalScale.prototype.scale = function (val) {\n    return helper.scale(val, this._extent);\n  };\n\n  IntervalScale.prototype.setExtent = function (start, end) {\n    var thisExtent = this._extent; // start,end may be a Number like '25',so...\n\n    if (!isNaN(start)) {\n      thisExtent[0] = parseFloat(start);\n    }\n\n    if (!isNaN(end)) {\n      thisExtent[1] = parseFloat(end);\n    }\n  };\n\n  IntervalScale.prototype.unionExtent = function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]); // unionExtent may called by it's sub classes\n\n    this.setExtent(extent[0], extent[1]);\n  };\n\n  IntervalScale.prototype.getInterval = function () {\n    return this._interval;\n  };\n\n  IntervalScale.prototype.setInterval = function (interval) {\n    this._interval = interval; // Dropped auto calculated niceExtent and use user setted extent\n    // We assume user wan't to set both interval, min, max to get a better result\n\n    this._niceExtent = this._extent.slice();\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\n  };\n  /**\n   * @param expandToNicedExtent Whether expand the ticks to niced extent.\n   */\n\n\n  IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\n    var interval = this._interval;\n    var extent = this._extent;\n    var niceTickExtent = this._niceExtent;\n    var intervalPrecision = this._intervalPrecision;\n    var ticks = []; // If interval is 0, return [];\n\n    if (!interval) {\n      return ticks;\n    } // Consider this case: using dataZoom toolbox, zoom and zoom.\n\n\n    var safeLimit = 10000;\n\n    if (extent[0] < niceTickExtent[0]) {\n      if (expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[0]\n        });\n      }\n    }\n\n    var tick = niceTickExtent[0];\n\n    while (tick <= niceTickExtent[1]) {\n      ticks.push({\n        value: tick\n      }); // Avoid rounding error\n\n      tick = roundNumber(tick + interval, intervalPrecision);\n\n      if (tick === ticks[ticks.length - 1].value) {\n        // Consider out of safe float point, e.g.,\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\n        break;\n      }\n\n      if (ticks.length > safeLimit) {\n        return [];\n      }\n    } // Consider this case: the last item of ticks is smaller\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n\n\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\n\n    if (extent[1] > lastNiceTick) {\n      if (expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(lastNiceTick + interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[1]\n        });\n      }\n    }\n\n    return ticks;\n  };\n\n  IntervalScale.prototype.getMinorTicks = function (splitNumber) {\n    var ticks = this.getTicks(true);\n    var minorTicks = [];\n    var extent = this.getExtent();\n\n    for (var i = 1; i < ticks.length; i++) {\n      var nextTick = ticks[i];\n      var prevTick = ticks[i - 1];\n      var count = 0;\n      var minorTicksGroup = [];\n      var interval = nextTick.value - prevTick.value;\n      var minorInterval = interval / splitNumber;\n\n      while (count < splitNumber - 1) {\n        var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval); // For the first and last interval. The count may be less than splitNumber.\n\n        if (minorTick > extent[0] && minorTick < extent[1]) {\n          minorTicksGroup.push(minorTick);\n        }\n\n        count++;\n      }\n\n      minorTicks.push(minorTicksGroup);\n    }\n\n    return minorTicks;\n  };\n  /**\n   * @param opt.precision If 'auto', use nice presision.\n   * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\n   */\n\n\n  IntervalScale.prototype.getLabel = function (data, opt) {\n    if (data == null) {\n      return '';\n    }\n\n    var precision = opt && opt.precision;\n\n    if (precision == null) {\n      precision = numberUtil.getPrecision(data.value) || 0;\n    } else if (precision === 'auto') {\n      // Should be more precise then tick.\n      precision = this._intervalPrecision;\n    } // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n\n\n    var dataNum = roundNumber(data.value, precision, true);\n    return formatUtil.addCommas(dataNum);\n  };\n  /**\n   * @param splitNumber By default `5`.\n   */\n\n\n  IntervalScale.prototype.niceTicks = function (splitNumber, minInterval, maxInterval) {\n    splitNumber = splitNumber || 5;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (!isFinite(span)) {\n      return;\n    } // User may set axis min 0 and data are all negative\n    // FIXME If it needs to reverse ?\n\n\n    if (span < 0) {\n      span = -span;\n      extent.reverse();\n    }\n\n    var result = helper.intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\n    this._intervalPrecision = result.intervalPrecision;\n    this._interval = result.interval;\n    this._niceExtent = result.niceTickExtent;\n  };\n\n  IntervalScale.prototype.niceExtent = function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      if (extent[0] !== 0) {\n        // Expand extent\n        var expandSize = extent[0]; // In the fowllowing case\n        //      Axis has been fixed max 100\n        //      Plus data are all 100 and axis extent are [100, 100].\n        // Extend to the both side will cause expanded max is larger than fixed max.\n        // So only expand to the smaller side.\n\n        if (!opt.fixMax) {\n          extent[1] += expandSize / 2;\n          extent[0] -= expandSize / 2;\n        } else {\n          extent[0] -= expandSize / 2;\n        }\n      } else {\n        extent[1] = 1;\n      }\n    }\n\n    var span = extent[1] - extent[0]; // If there are no data and extent are [Infinity, -Infinity]\n\n    if (!isFinite(span)) {\n      extent[0] = 0;\n      extent[1] = 1;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // let extent = this._extent;\n\n    var interval = this._interval;\n\n    if (!opt.fixMin) {\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\n    }\n\n    if (!opt.fixMax) {\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\n    }\n  };\n\n  IntervalScale.type = 'interval';\n  return IntervalScale;\n}(Scale);\n\nScale.registerClass(IntervalScale);\nexport default IntervalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isString } from 'zrender/lib/core/util';\n/**\n * Note that it is too complicated to support 3d stack by value\n * (have to create two-dimension inverted index), so in 3d case\n * we just support that stacked by index.\n *\n * @param seriesModel\n * @param dimensionInfoList The same as the input of <module:echarts/data/List>.\n *        The input dimensionInfoList will be modified.\n * @param opt\n * @param opt.stackedCoordDimension Specify a coord dimension if needed.\n * @param opt.byIndex=false\n * @return calculationInfo\n * {\n *     stackedDimension: string\n *     stackedByDimension: string\n *     isStackedByIndex: boolean\n *     stackedOverDimension: string\n *     stackResultDimension: string\n * }\n */\n\nexport function enableDataStack(seriesModel, dimensionInfoList, opt) {\n  opt = opt || {};\n  var byIndex = opt.byIndex;\n  var stackedCoordDimension = opt.stackedCoordDimension; // Compatibal: when `stack` is set as '', do not stack.\n\n  var mayStack = !!(seriesModel && seriesModel.get('stack'));\n  var stackedByDimInfo;\n  var stackedDimInfo;\n  var stackResultDimension;\n  var stackedOverDimension;\n  each(dimensionInfoList, function (dimensionInfo, index) {\n    if (isString(dimensionInfo)) {\n      dimensionInfoList[index] = dimensionInfo = {\n        name: dimensionInfo\n      };\n    }\n\n    if (mayStack && !dimensionInfo.isExtraCoord) {\n      // Find the first ordinal dimension as the stackedByDimInfo.\n      if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n        stackedByDimInfo = dimensionInfo;\n      } // Find the first stackable dimension as the stackedDimInfo.\n\n\n      if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n        stackedDimInfo = dimensionInfo;\n      }\n    }\n  });\n\n  if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n    // Compatible with previous design, value axis (time axis) only stack by index.\n    // It may make sense if the user provides elaborately constructed data.\n    byIndex = true;\n  } // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n  // That put stack logic in List is for using conveniently in echarts extensions, but it\n  // might not be a good way.\n\n\n  if (stackedDimInfo) {\n    // Use a weird name that not duplicated with other names.\n    stackResultDimension = '__\\0ecstackresult';\n    stackedOverDimension = '__\\0ecstackedover'; // Create inverted index to fast query index by value.\n\n    if (stackedByDimInfo) {\n      stackedByDimInfo.createInvertedIndices = true;\n    }\n\n    var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\n    var stackedDimType = stackedDimInfo.type;\n    var stackedDimCoordIndex_1 = 0;\n    each(dimensionInfoList, function (dimensionInfo) {\n      if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\n        stackedDimCoordIndex_1++;\n      }\n    });\n    dimensionInfoList.push({\n      name: stackResultDimension,\n      coordDim: stackedDimCoordDim_1,\n      coordDimIndex: stackedDimCoordIndex_1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true\n    });\n    stackedDimCoordIndex_1++;\n    dimensionInfoList.push({\n      name: stackedOverDimension,\n      // This dimension contains stack base (generally, 0), so do not set it as\n      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n      coordDim: stackedOverDimension,\n      coordDimIndex: stackedDimCoordIndex_1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true\n    });\n  }\n\n  return {\n    stackedDimension: stackedDimInfo && stackedDimInfo.name,\n    stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n    isStackedByIndex: byIndex,\n    stackedOverDimension: stackedOverDimension,\n    stackResultDimension: stackResultDimension\n  };\n}\nexport function isDimensionStacked(data, stackedDim\n/*, stackedByDim*/\n) {\n  // Each single series only maps to one pair of axis. So we do not need to\n  // check stackByDim, whatever stacked by a dimension or stacked by index.\n  return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension'); // && (\n  //     stackedByDim != null\n  //         ? stackedByDim === data.getCalculationInfo('stackedByDimension')\n  //         : data.getCalculationInfo('isStackedByIndex')\n  // );\n}\nexport function getStackedDimension(data, targetDim) {\n  return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { parsePercent } from '../util/number';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner';\nvar STACK_PREFIX = '__ec_stack_';\nvar LARGE_BAR_MIN_WIDTH = 0.5;\nvar LargeArr = typeof Float32Array !== 'undefined' ? Float32Array : Array;\n\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n}\n\nfunction getAxisKey(axis) {\n  return axis.dim + axis.index;\n}\n/**\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\n */\n\n\nexport function getLayoutOnAxis(opt) {\n  var params = [];\n  var baseAxis = opt.axis;\n  var axisKey = 'axis0';\n\n  if (baseAxis.type !== 'category') {\n    return;\n  }\n\n  var bandWidth = baseAxis.getBandWidth();\n\n  for (var i = 0; i < opt.count || 0; i++) {\n    params.push(zrUtil.defaults({\n      bandWidth: bandWidth,\n      axisKey: axisKey,\n      stackId: STACK_PREFIX + i\n    }, opt));\n  }\n\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\n  var result = [];\n\n  for (var i = 0; i < opt.count; i++) {\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\n    item.offsetCenter = item.offset + item.width / 2;\n    result.push(item);\n  }\n\n  return result;\n}\nexport function prepareLayoutBarSeries(seriesType, ecModel) {\n  var seriesModels = [];\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for cartesian2d only\n    if (isOnCartesian(seriesModel) && !isInLargeMode(seriesModel)) {\n      seriesModels.push(seriesModel);\n    }\n  });\n  return seriesModels;\n}\n/**\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\n * values.\n * This works for time axes, value axes, and log axes.\n * For a single time axis, return value is in the form like\n * {'x_0': [1000000]}.\n * The value of 1000000 is in milliseconds.\n */\n\nfunction getValueAxesMinGaps(barSeries) {\n  /**\n   * Map from axis.index to values.\n   * For a single time axis, axisValues is in the form like\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\n   * series.\n   */\n  var axisValues = {};\n  zrUtil.each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var key = baseAxis.dim + '_' + baseAxis.index;\n    var dim = data.mapDimension(baseAxis.dim);\n\n    for (var i = 0, cnt = data.count(); i < cnt; ++i) {\n      var value = data.get(dim, i);\n\n      if (!axisValues[key]) {\n        // No previous data for the axis\n        axisValues[key] = [value];\n      } else {\n        // No value in previous series\n        axisValues[key].push(value);\n      } // Ignore duplicated time values in the same axis\n\n    }\n  });\n  var axisMinGaps = {};\n\n  for (var key in axisValues) {\n    if (axisValues.hasOwnProperty(key)) {\n      var valuesInAxis = axisValues[key];\n\n      if (valuesInAxis) {\n        // Sort axis values into ascending order to calculate gaps\n        valuesInAxis.sort(function (a, b) {\n          return a - b;\n        });\n        var min = null;\n\n        for (var j = 1; j < valuesInAxis.length; ++j) {\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n\n          if (delta > 0) {\n            // Ignore 0 delta because they are of the same axis value\n            min = min === null ? delta : Math.min(min, delta);\n          }\n        } // Set to null if only have one data\n\n\n        axisMinGaps[key] = min;\n      }\n    }\n  }\n\n  return axisMinGaps;\n}\n\nexport function makeColumnLayout(barSeries) {\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\n  var seriesInfoList = [];\n  zrUtil.each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth;\n\n    if (baseAxis.type === 'category') {\n      bandWidth = baseAxis.getBandWidth();\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var minGap = axisMinGaps[key];\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n      var scale = baseAxis.scale.getExtent();\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n    } else {\n      var data = seriesModel.getData();\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    }\n\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barMinWidth = parsePercent( // barMinWidth by default is 1 in cartesian. Because in value axis,\n    // the auto-calculated bar width might be less than 1.\n    seriesModel.get('barMinWidth') || 1, bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    seriesInfoList.push({\n      bandWidth: bandWidth,\n      barWidth: barWidth,\n      barMaxWidth: barMaxWidth,\n      barMinWidth: barMinWidth,\n      barGap: barGap,\n      barCategoryGap: barCategoryGap,\n      axisKey: getAxisKey(baseAxis),\n      stackId: getSeriesStackId(seriesModel)\n    });\n  });\n  return doCalBarWidthAndOffset(seriesInfoList);\n}\n\nfunction doCalBarWidthAndOffset(seriesInfoList) {\n  // Columns info on each category axis. Key is cartesian name\n  var columnsMap = {};\n  zrUtil.each(seriesInfoList, function (seriesInfo, idx) {\n    var axisKey = seriesInfo.axisKey;\n    var bandWidth = seriesInfo.bandWidth;\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: null,\n      gap: '20%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = seriesInfo.stackId;\n\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    }; // Caution: In a single coordinate system, these barGrid attributes\n    // will be shared by series. Consider that they have default values,\n    // only the attributes set on the last series will work.\n    // Do not change this fact unless there will be a break change.\n\n    var barWidth = seriesInfo.barWidth;\n\n    if (barWidth && !stacks[stackId].width) {\n      // See #6312, do not restrict width.\n      stacks[stackId].width = barWidth;\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n\n    var barMaxWidth = seriesInfo.barMaxWidth;\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    var barMinWidth = seriesInfo.barMinWidth;\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n    var barGap = seriesInfo.barGap;\n    barGap != null && (columnsOnAxis.gap = barGap);\n    var barCategoryGap = seriesInfo.barCategoryGap;\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  zrUtil.each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGapPercent = columnsOnAxis.categoryGap;\n\n    if (categoryGapPercent == null) {\n      var columnCount = zrUtil.keys(stacks).length; // More columns in one group\n      // the spaces between group is smaller. Or the column will be too thin.\n\n      categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\n    }\n\n    var categoryGap = parsePercent(categoryGapPercent, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\n\n    zrUtil.each(stacks, function (column) {\n      var maxWidth = column.maxWidth;\n      var minWidth = column.minWidth;\n\n      if (!column.width) {\n        var finalWidth = autoWidth;\n\n        if (maxWidth && maxWidth < finalWidth) {\n          finalWidth = Math.min(maxWidth, remainedWidth);\n        } // `minWidth` has higher priority. `minWidth` decide that wheter the\n        // bar is able to be visible. So `minWidth` should not be restricted\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n        // the extreme cases for `value` axis, bars are allowed to overlap\n        // with each other if `minWidth` specified.\n\n\n        if (minWidth && minWidth > finalWidth) {\n          finalWidth = minWidth;\n        }\n\n        if (finalWidth !== autoWidth) {\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      } else {\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n        // CSS does. Becuase barWidth can be a percent value, where\n        // `barMaxWidth` can be used to restrict the final width.\n        var finalWidth = column.width;\n\n        if (maxWidth) {\n          finalWidth = Math.min(finalWidth, maxWidth);\n        } // `minWidth` has higher priority, as described above\n\n\n        if (minWidth) {\n          finalWidth = Math.max(finalWidth, minWidth);\n        }\n\n        column.width = finalWidth;\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\n        autoWidthCount--;\n      }\n    }); // Recalculate width again\n\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    zrUtil.each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n\n    var offset = -widthSum / 2;\n    zrUtil.each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        bandWidth: bandWidth,\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\n\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n  if (barWidthAndOffset && axis) {\n    var result = barWidthAndOffset[getAxisKey(axis)];\n\n    if (result != null && seriesModel != null) {\n      return result[getSeriesStackId(seriesModel)];\n    }\n\n    return result;\n  }\n}\n\nexport { retrieveColumnLayout };\nexport function layout(seriesType, ecModel) {\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\n  var lastStackCoords = {};\n  zrUtil.each(seriesModels, function (seriesModel) {\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    var valueAxis = cartesian.getOtherAxis(baseAxis);\n    var barMinHeight = seriesModel.get('barMinHeight') || 0;\n    lastStackCoords[stackId] = lastStackCoords[stackId] || [];\n    data.setLayout({\n      bandWidth: columnLayoutInfo.bandWidth,\n      offset: columnOffset,\n      size: columnWidth\n    });\n    var valueDim = data.mapDimension(valueAxis.dim);\n    var baseDim = data.mapDimension(baseAxis.dim);\n    var stacked = isDimensionStacked(data, valueDim\n    /*, baseDim*/\n    );\n    var isValueAxisH = valueAxis.isHorizontal();\n    var valueAxisStart = getValueAxisStart(baseAxis, valueAxis, stacked);\n\n    for (var idx = 0, len = data.count(); idx < len; idx++) {\n      var value = data.get(valueDim, idx);\n      var baseValue = data.get(baseDim, idx);\n      var sign = value >= 0 ? 'p' : 'n';\n      var baseCoord = valueAxisStart; // Because of the barMinHeight, we can not use the value in\n      // stackResultDimension directly.\n\n      if (stacked) {\n        // Only ordinal axis can be stacked.\n        if (!lastStackCoords[stackId][baseValue]) {\n          lastStackCoords[stackId][baseValue] = {\n            p: valueAxisStart,\n            n: valueAxisStart // Negative stack\n\n          };\n        } // Should also consider #4243\n\n\n        baseCoord = lastStackCoords[stackId][baseValue][sign];\n      }\n\n      var x = void 0;\n      var y = void 0;\n      var width = void 0;\n      var height = void 0;\n\n      if (isValueAxisH) {\n        var coord = cartesian.dataToPoint([value, baseValue]);\n        x = baseCoord;\n        y = coord[1] + columnOffset;\n        width = coord[0] - valueAxisStart;\n        height = columnWidth;\n\n        if (Math.abs(width) < barMinHeight) {\n          width = (width < 0 ? -1 : 1) * barMinHeight;\n        } // Ignore stack from NaN value\n\n\n        if (!isNaN(width)) {\n          stacked && (lastStackCoords[stackId][baseValue][sign] += width);\n        }\n      } else {\n        var coord = cartesian.dataToPoint([baseValue, value]);\n        x = coord[0] + columnOffset;\n        y = baseCoord;\n        width = columnWidth;\n        height = coord[1] - valueAxisStart;\n\n        if (Math.abs(height) < barMinHeight) {\n          // Include zero to has a positive bar\n          height = (height <= 0 ? -1 : 1) * barMinHeight;\n        } // Ignore stack from NaN value\n\n\n        if (!isNaN(height)) {\n          stacked && (lastStackCoords[stackId][baseValue][sign] += height);\n        }\n      }\n\n      data.setItemLayout(idx, {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      });\n    }\n  });\n} // TODO: Do not support stack in large mode yet.\n\nexport var largeLayout = {\n  seriesType: 'bar',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    if (!isOnCartesian(seriesModel) || !isInLargeMode(seriesModel)) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var coordLayout = cartesian.master.getRect();\n    var baseAxis = cartesian.getBaseAxis();\n    var valueAxis = cartesian.getOtherAxis(baseAxis);\n    var valueDim = data.mapDimension(valueAxis.dim);\n    var baseDim = data.mapDimension(baseAxis.dim);\n    var valueAxisHorizontal = valueAxis.isHorizontal();\n    var valueDimIdx = valueAxisHorizontal ? 0 : 1;\n    var barWidth = retrieveColumnLayout(makeColumnLayout([seriesModel]), baseAxis, seriesModel).width;\n\n    if (!(barWidth > LARGE_BAR_MIN_WIDTH)) {\n      // jshint ignore:line\n      barWidth = LARGE_BAR_MIN_WIDTH;\n    }\n\n    return {\n      progress: function (params, data) {\n        var count = params.count;\n        var largePoints = new LargeArr(count * 2);\n        var largeBackgroundPoints = new LargeArr(count * 2);\n        var largeDataIndices = new LargeArr(count);\n        var dataIndex;\n        var coord = [];\n        var valuePair = [];\n        var pointsOffset = 0;\n        var idxOffset = 0;\n\n        while ((dataIndex = params.next()) != null) {\n          valuePair[valueDimIdx] = data.get(valueDim, dataIndex);\n          valuePair[1 - valueDimIdx] = data.get(baseDim, dataIndex);\n          coord = cartesian.dataToPoint(valuePair, null); // Data index might not be in order, depends on `progressiveChunkMode`.\n\n          largeBackgroundPoints[pointsOffset] = valueAxisHorizontal ? coordLayout.x + coordLayout.width : coord[0];\n          largePoints[pointsOffset++] = coord[0];\n          largeBackgroundPoints[pointsOffset] = valueAxisHorizontal ? coord[1] : coordLayout.y + coordLayout.height;\n          largePoints[pointsOffset++] = coord[1];\n          largeDataIndices[idxOffset++] = dataIndex;\n        }\n\n        data.setLayout({\n          largePoints: largePoints,\n          largeDataIndices: largeDataIndices,\n          largeBackgroundPoints: largeBackgroundPoints,\n          barWidth: barWidth,\n          valueAxisStart: getValueAxisStart(baseAxis, valueAxis, false),\n          backgroundStart: valueAxisHorizontal ? coordLayout.x : coordLayout.y,\n          valueAxisHorizontal: valueAxisHorizontal\n        });\n      }\n    };\n  }\n};\n\nfunction isOnCartesian(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\n\nfunction isInLargeMode(seriesModel) {\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n} // See cases in `test/bar-start.html` and `#7412`, `#8747`.\n\n\nfunction getValueAxisStart(baseAxis, valueAxis, stacked) {\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? 1 : 0));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/*\n* A third-party license is embeded for some of the code in this file:\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design have\n// concidered these common case:\n// (1) Time that is persistent in server is in UTC, but it is needed to be diplayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\n\nimport * as numberUtil from '../util/number';\nimport { ONE_SECOND, ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_YEAR, format, leveledFormat, getUnitValue, timeUnits, fullLeveledFormatter, getPrimaryTimeUnit, isPrimaryTimeUnit, getDefaultFormatPrecisionOfInterval, fullYearGetterName, monthSetterName, fullYearSetterName, dateSetterName, hoursGetterName, hoursSetterName, minutesSetterName, secondsSetterName, millisecondsSetterName, monthGetterName, dateGetterName, minutesGetterName, secondsGetterName, millisecondsGetterName } from '../util/time';\nimport * as scaleHelper from './helper';\nimport IntervalScale from './Interval';\nimport Scale from './Scale';\nimport { warn } from '../util/log';\nimport { filter, map } from 'zrender/lib/core/util'; // FIXME 公用？\n\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return lo;\n};\n\nvar TimeScale =\n/** @class */\nfunction (_super) {\n  __extends(TimeScale, _super);\n\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n\n    _this.type = 'time';\n    return _this;\n  }\n  /**\n   * Get label is mainly for other components like dataZoom, tooltip.\n   */\n\n\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n  };\n  /**\n   * @override\n   * @param expandToNicedExtent Whether expand the ticks to niced extent.\n   */\n\n\n  TimeScale.prototype.getTicks = function (expandToNicedExtent) {\n    var interval = this._interval;\n    var extent = this._extent;\n    var ticks = []; // If interval is 0, return [];\n\n    if (!interval) {\n      return ticks;\n    }\n\n    ticks.push({\n      value: extent[0],\n      level: 0\n    });\n    var useUTC = this.getSetting('useUTC');\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n    ticks = ticks.concat(innerTicks);\n    ticks.push({\n      value: extent[1],\n      level: 0\n    });\n    return ticks;\n  };\n\n  TimeScale.prototype.niceExtent = function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    } // If there are no data and extent are [Infinity, -Infinity]\n\n\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n\n  TimeScale.prototype.niceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    this._approxInterval = span / approxTickNum;\n\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1); // Interval that can be used to calculate ticks\n\n    this._interval = scaleIntervals[idx][1]; // Min level used when picking ticks from top down.\n    // We check one more level to avoid the ticks are to sparse in some case.\n\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n\n  TimeScale.prototype.parse = function (val) {\n    // val might be float.\n    return typeof val === 'number' ? val : +numberUtil.parseDate(val);\n  };\n\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.normalize = function (val) {\n    return scaleHelper.normalize(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.scale = function (val) {\n    return scaleHelper.scale(val, this._extent);\n  };\n\n  TimeScale.type = 'time';\n  return TimeScale;\n}(IntervalScale);\n/**\n * This implementation was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\n\nvar scaleIntervals = [// Format                           interval\n['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\n];\n\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\n  var dateA = numberUtil.parseDate(valueA);\n  var dateB = numberUtil.parseDate(valueB);\n\n  var isSame = function (unit) {\n    return getUnitValue(dateA, unit, isUTC) === getUnitValue(dateB, unit, isUTC);\n  };\n\n  var isSameYear = function () {\n    return isSame('year');\n  }; // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n  // const isSameQuater = () => isSameYear() && isSame('quarter');\n\n\n  var isSameMonth = function () {\n    return isSameYear() && isSame('month');\n  };\n\n  var isSameDay = function () {\n    return isSameMonth() && isSame('day');\n  }; // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n\n\n  var isSameHour = function () {\n    return isSameDay() && isSame('hour');\n  };\n\n  var isSameMinute = function () {\n    return isSameHour() && isSame('minute');\n  };\n\n  var isSameSecond = function () {\n    return isSameMinute() && isSame('second');\n  };\n\n  var isSameMilliSecond = function () {\n    return isSameSecond() && isSame('millisecond');\n  };\n\n  switch (unit) {\n    case 'year':\n      return isSameYear();\n\n    case 'month':\n      return isSameMonth();\n\n    case 'day':\n      return isSameDay();\n\n    case 'hour':\n      return isSameHour();\n\n    case 'minute':\n      return isSameMinute();\n\n    case 'second':\n      return isSameSecond();\n\n    case 'millisecond':\n      return isSameMilliSecond();\n  }\n} // const primaryUnitGetters = {\n//     year: fullYearGetterName(),\n//     month: monthGetterName(),\n//     day: dateGetterName(),\n//     hour: hoursGetterName(),\n//     minute: minutesGetterName(),\n//     second: secondsGetterName(),\n//     millisecond: millisecondsGetterName()\n// };\n// const primaryUnitUTCGetters = {\n//     year: fullYearGetterName(true),\n//     month: monthGetterName(true),\n//     day: dateGetterName(true),\n//     hour: hoursGetterName(true),\n//     minute: minutesGetterName(true),\n//     second: secondsGetterName(true),\n//     millisecond: millisecondsGetterName(true)\n// };\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n//     step = step || 1;\n//     switch (getPrimaryTimeUnit(unitName)) {\n//         case 'year':\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n//             break;\n//         case 'month':\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n//             break;\n//         case 'day':\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n//             break;\n//         case 'hour':\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n//             break;\n//         case 'minute':\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n//             break;\n//         case 'second':\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n//             break;\n//         case 'millisecond':\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n//             break;\n//     }\n//     return date.getTime();\n// }\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\n\n\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= ONE_DAY;\n  return approxInterval > 16 ? 16 // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick betwen two month.\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\n\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getHourInterval(approxInterval) {\n  approxInterval /= ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\n\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\n  var outDate = new Date(date);\n\n  switch (getPrimaryTimeUnit(unitName)) {\n    case 'year':\n    case 'month':\n      outDate[monthSetterName(isUTC)](0);\n\n    case 'day':\n      outDate[dateSetterName(isUTC)](1);\n\n    case 'hour':\n      outDate[hoursSetterName(isUTC)](0);\n\n    case 'minute':\n      outDate[minutesSetterName(isUTC)](0);\n\n    case 'second':\n      outDate[secondsSetterName(isUTC)](0);\n      outDate[millisecondsSetterName(isUTC)](0);\n  }\n\n  return outDate.getTime();\n}\n\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n  var safeLimit = 10000;\n  var unitNames = timeUnits;\n  var iter = 0;\n\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var date = new Date(minTimestamp);\n    var dateTime = minTimestamp;\n    var d = date[getMethodName](); // if (isDate) {\n    //     d -= 1; // Starts with 0;   PENDING\n    // }\n\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      d += interval;\n      date[setMethodName](d);\n      dateTime = date.getTime();\n    } // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n\n\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n\n    if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        // TODO Optimize. Not include so may ticks.\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n\n      if (startTick === endTick) {\n        continue;\n      }\n\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\n          getterName = fullYearGetterName(isUTC);\n          setterName = fullYearSetterName(isUTC);\n          break;\n\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = monthGetterName(isUTC);\n          setterName = monthSetterName(isUTC);\n          break;\n\n        case 'week': // PENDING If week is added. Ignore day.\n\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n\n          getterName = dateGetterName(isUTC);\n          setterName = dateSetterName(isUTC);\n          isDate = true;\n          break;\n\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = hoursGetterName(isUTC);\n          setterName = hoursSetterName(isUTC);\n          break;\n\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = minutesGetterName(isUTC);\n          setterName = minutesSetterName(isUTC);\n          break;\n\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = secondsGetterName(isUTC);\n          setterName = secondsSetterName(isUTC);\n          break;\n\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = millisecondsGetterName(isUTC);\n          setterName = millisecondsSetterName(isUTC);\n          break;\n      }\n\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        // Add nearest years to the left extent.\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    } // newAddedTicks.length && console.log(unitName, newAddedTicks);\n\n\n    return newAddedTicks;\n  }\n\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n    var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\n\n    if (!isPrimaryTimeUnit(unitNames[i])) {\n      // TODO\n      continue;\n    }\n\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\n\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount; // Remove the duplicate so the tick count can be precisely.\n\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval; // Added too much in this level and not too less in last level\n\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        } // Only treat primary time unit as one level.\n\n\n        levelsTicks.push(levelTicksRemoveDuplicated);\n\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      } // Reset if next unitName is primary\n\n\n      currentLevelTicks = [];\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (iter >= safeLimit) {\n      warn('Exceed safe limit.');\n    }\n  }\n\n  var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\n    return filter(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n\n    for (var k = 0; k < levelTicks.length; ++k) {\n      ticks.push({\n        value: levelTicks[k].value,\n        level: maxLevel - i\n      });\n    }\n  }\n\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  }); // Remove duplicates\n\n  var result = [];\n\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n\n  return result;\n}\n\nScale.registerClass(TimeScale);\nexport default TimeScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport Scale from './Scale';\nimport * as numberUtil from '../util/number';\nimport * as scaleHelper from './helper'; // Use some method of IntervalScale\n\nimport IntervalScale from './Interval';\nvar scaleProto = Scale.prototype; // FIXME:TS refactor: not good to call it directly with `this`?\n\nvar intervalScaleProto = IntervalScale.prototype;\nvar roundingErrorFix = numberUtil.round;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathPow = Math.pow;\nvar mathLog = Math.log;\n\nvar LogScale =\n/** @class */\nfunction (_super) {\n  __extends(LogScale, _super);\n\n  function LogScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'log';\n    _this.base = 10;\n    _this._originalScale = new IntervalScale(); // FIXME:TS actually used by `IntervalScale`\n\n    _this._interval = 0;\n    return _this;\n  }\n  /**\n   * @param Whether expand the ticks to niced extent.\n   */\n\n\n  LogScale.prototype.getTicks = function (expandToNicedExtent) {\n    var originalScale = this._originalScale;\n    var extent = this._extent;\n    var originalExtent = originalScale.getExtent();\n    var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\n    return zrUtil.map(ticks, function (tick) {\n      var val = tick.value;\n      var powVal = numberUtil.round(mathPow(this.base, val)); // Fix #4158\n\n      powVal = val === extent[0] && this._fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\n      powVal = val === extent[1] && this._fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\n      return {\n        value: powVal\n      };\n    }, this);\n  };\n\n  LogScale.prototype.setExtent = function (start, end) {\n    var base = this.base;\n    start = mathLog(start) / mathLog(base);\n    end = mathLog(end) / mathLog(base);\n    intervalScaleProto.setExtent.call(this, start, end);\n  };\n  /**\n   * @return {number} end\n   */\n\n\n  LogScale.prototype.getExtent = function () {\n    var base = this.base;\n    var extent = scaleProto.getExtent.call(this);\n    extent[0] = mathPow(base, extent[0]);\n    extent[1] = mathPow(base, extent[1]); // Fix #4158\n\n    var originalScale = this._originalScale;\n    var originalExtent = originalScale.getExtent();\n    this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n    this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n    return extent;\n  };\n\n  LogScale.prototype.unionExtent = function (extent) {\n    this._originalScale.unionExtent(extent);\n\n    var base = this.base;\n    extent[0] = mathLog(extent[0]) / mathLog(base);\n    extent[1] = mathLog(extent[1]) / mathLog(base);\n    scaleProto.unionExtent.call(this, extent);\n  };\n\n  LogScale.prototype.unionExtentFromData = function (data, dim) {\n    // TODO\n    // filter value that <= 0\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\n   * Update interval and extent of intervals for nice ticks\n   * @param approxTickNum default 10 Given approx tick number\n   */\n\n\n  LogScale.prototype.niceTicks = function (approxTickNum) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (span === Infinity || span <= 0) {\n      return;\n    }\n\n    var interval = numberUtil.quantity(span);\n    var err = approxTickNum / span * interval; // Filter ticks to get closer to the desired count.\n\n    if (err <= 0.5) {\n      interval *= 10;\n    } // Interval should be integer\n\n\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n      interval *= 10;\n    }\n\n    var niceExtent = [numberUtil.round(mathCeil(extent[0] / interval) * interval), numberUtil.round(mathFloor(extent[1] / interval) * interval)];\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  };\n\n  LogScale.prototype.niceExtent = function (opt) {\n    intervalScaleProto.niceExtent.call(this, opt);\n    this._fixMin = opt.fixMin;\n    this._fixMax = opt.fixMax;\n  };\n\n  LogScale.prototype.parse = function (val) {\n    return val;\n  };\n\n  LogScale.prototype.contain = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleHelper.contain(val, this._extent);\n  };\n\n  LogScale.prototype.normalize = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleHelper.normalize(val, this._extent);\n  };\n\n  LogScale.prototype.scale = function (val) {\n    val = scaleHelper.scale(val, this._extent);\n    return mathPow(this.base, val);\n  };\n\n  LogScale.type = 'log';\n  return LogScale;\n}(Scale);\n\nvar proto = LogScale.prototype;\nproto.getMinorTicks = intervalScaleProto.getMinorTicks;\nproto.getLabel = intervalScaleProto.getLabel;\n\nfunction fixRoundingError(val, originalVal) {\n  return roundingErrorFix(val, numberUtil.getPrecision(originalVal));\n}\n\nScale.registerClass(LogScale);\nexport default LogScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, isArray, eqNaN, isFunction } from 'zrender/lib/core/util';\nimport { parsePercent } from 'zrender/lib/contain/text';\n\nvar ScaleRawExtentInfo =\n/** @class */\nfunction () {\n  function ScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\n  originalExtent) {\n    this._prepareParams(scale, model, originalExtent);\n  }\n  /**\n   * Parameters depending on ouside (like model, user callback)\n   * are prepared and fixed here.\n   */\n\n\n  ScaleRawExtentInfo.prototype._prepareParams = function (scale, model, // Usually: data extent from all series on this axis.\n  dataExtent) {\n    if (dataExtent[1] < dataExtent[0]) {\n      dataExtent = [NaN, NaN];\n    }\n\n    this._dataMin = dataExtent[0];\n    this._dataMax = dataExtent[1];\n    var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\n    this._needCrossZero = model.getNeedCrossZero && model.getNeedCrossZero();\n    var modelMinRaw = this._modelMinRaw = model.get('min', true);\n\n    if (isFunction(modelMinRaw)) {\n      // This callback alway provide users the full data extent (before data filtered).\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMinRaw !== 'dataMin') {\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\n    }\n\n    var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\n\n    if (isFunction(modelMaxRaw)) {\n      // This callback alway provide users the full data extent (before data filtered).\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMaxRaw !== 'dataMax') {\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\n    }\n\n    if (isOrdinal) {\n      // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\n      // and progressive rendering is using, here the category result might just only contain\n      // the processed chunk rather than the entire result.\n      this._axisDataLen = model.getCategories().length;\n    } else {\n      var boundaryGap = model.get('boundaryGap');\n      var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\n\n      if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\n        }\n\n        this._boundaryGapInner = [0, 0];\n      } else {\n        this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\n      }\n    }\n  };\n  /**\n   * Calculate extent by prepared parameters.\n   * This method has no external dependency and can be called duplicatedly,\n   * getting the same result.\n   * If parameters changed, should call this method to recalcuate.\n   */\n\n\n  ScaleRawExtentInfo.prototype.calculate = function () {\n    // Notice: When min/max is not set (that is, when there are null/undefined,\n    // which is the most common case), these cases should be ensured:\n    // (1) For 'ordinal', show all axis.data.\n    // (2) For others:\n    //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n    //      disabled).\n    //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n    //      be the result that originalExtent enlarged by boundaryGap.\n    // (3) If no data, it should be ensured that `scale.setBlank` is set.\n    var isOrdinal = this._isOrdinal;\n    var dataMin = this._dataMin;\n    var dataMax = this._dataMax;\n    var axisDataLen = this._axisDataLen;\n    var boundaryGapInner = this._boundaryGapInner;\n    var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null; // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\n    // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\n\n    var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\n    var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum; // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\n\n    var minFixed = min != null;\n    var maxFixed = max != null;\n\n    if (min == null) {\n      min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\n    }\n\n    if (max == null) {\n      max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\n    }\n\n    (min == null || !isFinite(min)) && (min = NaN);\n    (max == null || !isFinite(max)) && (max = NaN);\n\n    if (min > max) {\n      min = NaN;\n      max = NaN;\n    }\n\n    var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen; // If data extent modified, need to recalculated to ensure cross zero.\n\n    if (this._needCrossZero) {\n      // Axis is over zero and min is not set\n      if (min > 0 && max > 0 && !minFixed) {\n        min = 0; // minFixed = true;\n      } // Axis is under zero and max is not set\n\n\n      if (min < 0 && max < 0 && !maxFixed) {\n        max = 0; // maxFixed = true;\n      } // PENDING:\n      // When `needCrossZero` and all data is positive/negative, should it be ensured\n      // that the results processed by boundaryGap are positive/negative?\n      // If so, here `minFixed`/`maxFixed` need to be set.\n\n    }\n\n    var determinedMin = this._determinedMin;\n    var determinedMax = this._determinedMax;\n\n    if (determinedMin != null) {\n      min = determinedMin;\n      minFixed = true;\n    }\n\n    if (determinedMax != null) {\n      max = determinedMax;\n      maxFixed = true;\n    } // Ensure min/max be finite number or NaN here. (not to be null/undefined)\n    // `NaN` means min/max axis is blank.\n\n\n    return {\n      min: min,\n      max: max,\n      minFixed: minFixed,\n      maxFixed: maxFixed,\n      isBlank: isBlank\n    };\n  };\n\n  ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen);\n    }\n\n    this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\n  };\n\n  ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\n    var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen // Earse them usually means logic flaw.\n      && this[attr] == null);\n    }\n\n    this[attr] = val;\n  };\n\n  ScaleRawExtentInfo.prototype.freeze = function () {\n    // @ts-ignore\n    this.frozen = true;\n  };\n\n  return ScaleRawExtentInfo;\n}();\n\nexport { ScaleRawExtentInfo };\nvar DETERMINED_MIN_MAX_ATTR = {\n  min: '_determinedMin',\n  max: '_determinedMax'\n};\nvar DATA_MIN_MAX_ATTR = {\n  min: '_dataMin',\n  max: '_dataMax'\n};\n/**\n * Get scale min max and related info only depends on model settings.\n * This method can be called after coordinate system created.\n * For example, in data processing stage.\n *\n * Scale extent info probably be required multiple times during a workflow.\n * For example:\n * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\n * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\n * (3) `coordSys.update` use it to finally decide the scale extent.\n * But the callback of `min`/`max` should not be called multiple times.\n * The code below should not be implemented repeatedly either.\n * So we cache the result in the scale instance, which will be recreated at the begining\n * of the workflow (because `scale` instance will be recreated each round of the workflow).\n */\n\nexport function ensureScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\noriginalExtent) {\n  // Do not permit to recreate.\n  var rawExtentInfo = scale.rawExtentInfo;\n\n  if (rawExtentInfo) {\n    return rawExtentInfo;\n  }\n\n  rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent); // @ts-ignore\n\n  scale.rawExtentInfo = rawExtentInfo;\n  return rawExtentInfo;\n}\nexport function parseAxisModelMinMax(scale, minMax) {\n  return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport OrdinalScale from '../scale/Ordinal';\nimport IntervalScale from '../scale/Interval';\nimport Scale from '../scale/Scale';\nimport { prepareLayoutBarSeries, makeColumnLayout, retrieveColumnLayout } from '../layout/barGrid';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport TimeScale from '../scale/Time';\nimport LogScale from '../scale/Log';\nimport { getStackedDimension } from '../data/helper/dataStackHelper';\nimport { ensureScaleRawExtentInfo } from './scaleRawExtentInfo';\n/**\n * Get axis scale extent before niced.\n * Item of returned array can only be number (including Infinity and NaN).\n *\n * Caution:\n * Precondition of calling this method:\n * The scale extent has been initialized using series data extent via\n * `scale.setExtent` or `scale.unionExtentFromData`;\n */\n\nexport function getScaleExtent(scale, model) {\n  var scaleType = scale.type;\n  var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\n  scale.setBlank(rawExtentResult.isBlank);\n  var min = rawExtentResult.min;\n  var max = rawExtentResult.max; // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\n  // is base axis\n  // FIXME\n  // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\n  // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\n  //     Should not depend on series type `bar`?\n  // (3) Fix that might overlap when using dataZoom.\n  // (4) Consider other chart types using `barGrid`?\n  // See #6728, #4862, `test/bar-overflow-time-plot.html`\n\n  var ecModel = model.ecModel;\n\n  if (ecModel && scaleType === 'time'\n  /*|| scaleType === 'interval' */\n  ) {\n    var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\n    var isBaseAxisAndHasBarSeries_1 = false;\n    zrUtil.each(barSeriesModels, function (seriesModel) {\n      isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\n    });\n\n    if (isBaseAxisAndHasBarSeries_1) {\n      // Calculate placement of bars on axis. TODO should be decoupled\n      // with barLayout\n      var barWidthAndOffset = makeColumnLayout(barSeriesModels); // Adjust axis min and max to account for overflow\n\n      var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\n      min = adjustedScale.min;\n      max = adjustedScale.max;\n    }\n  }\n\n  return {\n    extent: [min, max],\n    // \"fix\" means \"fixed\", the value should not be\n    // changed in the subsequent steps.\n    fixMin: rawExtentResult.minFixed,\n    fixMax: rawExtentResult.maxFixed\n  };\n}\n\nfunction adjustScaleForOverflow(min, max, model, // Only support cartesian coord yet.\nbarWidthAndOffset) {\n  // Get Axis Length\n  var axisExtent = model.axis.getExtent();\n  var axisLength = axisExtent[1] - axisExtent[0]; // Get bars on current base axis and calculate min and max overflow\n\n  var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\n\n  if (barsOnCurrentAxis === undefined) {\n    return {\n      min: min,\n      max: max\n    };\n  }\n\n  var minOverflow = Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    minOverflow = Math.min(item.offset, minOverflow);\n  });\n  var maxOverflow = -Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    maxOverflow = Math.max(item.offset + item.width, maxOverflow);\n  });\n  minOverflow = Math.abs(minOverflow);\n  maxOverflow = Math.abs(maxOverflow);\n  var totalOverFlow = minOverflow + maxOverflow; // Calculate required buffer based on old range and overflow\n\n  var oldRange = max - min;\n  var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\n  var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\n  max += overflowBuffer * (maxOverflow / totalOverFlow);\n  min -= overflowBuffer * (minOverflow / totalOverFlow);\n  return {\n    min: min,\n    max: max\n  };\n} // Precondition of calling this method:\n// The scale extent has been initailized using series data extent via\n// `scale.setExtent` or `scale.unionExtentFromData`;\n\n\nexport function niceScaleExtent(scale, model) {\n  var extentInfo = getScaleExtent(scale, model);\n  var extent = extentInfo.extent;\n  var splitNumber = model.get('splitNumber');\n\n  if (scale instanceof LogScale) {\n    scale.base = model.get('logBase');\n  }\n\n  var scaleType = scale.type;\n  scale.setExtent(extent[0], extent[1]);\n  scale.niceExtent({\n    splitNumber: splitNumber,\n    fixMin: extentInfo.fixMin,\n    fixMax: extentInfo.fixMax,\n    minInterval: scaleType === 'interval' || scaleType === 'time' ? model.get('minInterval') : null,\n    maxInterval: scaleType === 'interval' || scaleType === 'time' ? model.get('maxInterval') : null\n  }); // If some one specified the min, max. And the default calculated interval\n  // is not good enough. He can specify the interval. It is often appeared\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n  // to be 60.\n  // FIXME\n\n  var interval = model.get('interval');\n\n  if (interval != null) {\n    scale.setInterval && scale.setInterval(interval);\n  }\n}\n/**\n * @param axisType Default retrieve from model.type\n */\n\nexport function createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n\n      default:\n        // case 'value'/'interval', 'log', or others.\n        return new (Scale.getClass(axisType) || IntervalScale)();\n    }\n  }\n}\n/**\n * Check if the axis cross 0\n */\n\nexport function ifAxisCrossZero(axis) {\n  var dataExtent = axis.scale.getExtent();\n  var min = dataExtent[0];\n  var max = dataExtent[1];\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\n}\n/**\n * @param axis\n * @return Label formatter function.\n *         param: {number} tickValue,\n *         param: {number} idx, the index in all ticks.\n *                         If category axis, this param is not required.\n *         return: {string} label string.\n */\n\nexport function makeLabelFormatter(axis) {\n  var labelFormatter = axis.getLabelModel().get('formatter');\n  var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\n\n  if (axis.scale.type === 'time') {\n    return function (tpl) {\n      return function (tick, idx) {\n        return axis.scale.getFormattedLabel(tick, idx, tpl);\n      };\n    }(labelFormatter);\n  } else if (typeof labelFormatter === 'string') {\n    return function (tpl) {\n      return function (tick) {\n        // For category axis, get raw value; for numeric axis,\n        // get formatted label like '1,333,444'.\n        var label = axis.scale.getLabel(tick);\n        var text = tpl.replace('{value}', label != null ? label : '');\n        return text;\n      };\n    }(labelFormatter);\n  } else if (typeof labelFormatter === 'function') {\n    return function (cb) {\n      return function (tick, idx) {\n        // The original intention of `idx` is \"the index of the tick in all ticks\".\n        // But the previous implementation of category axis do not consider the\n        // `axisLabel.interval`, which cause that, for example, the `interval` is\n        // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\n        // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\n        // the definition here for back compatibility.\n        if (categoryTickStart != null) {\n          idx = tick.value - categoryTickStart;\n        }\n\n        return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\n          level: tick.level\n        } : null);\n      };\n    }(labelFormatter);\n  } else {\n    return function (tick) {\n      return axis.scale.getLabel(tick);\n    };\n  }\n}\nexport function getAxisRawValue(axis, tick) {\n  // In category axis with data zoom, tick is not the original\n  // index of axis.data. So tick should not be exposed to user\n  // in category axis.\n  return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\n}\n/**\n * @param axis\n * @return Be null/undefined if no labels.\n */\n\nexport function estimateLabelUnionRect(axis) {\n  var axisModel = axis.model;\n  var scale = axis.scale;\n\n  if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\n    return;\n  }\n\n  var realNumberScaleTicks;\n  var tickCount;\n  var categoryScaleExtent = scale.getExtent(); // Optimize for large category data, avoid call `getTicks()`.\n\n  if (scale instanceof OrdinalScale) {\n    tickCount = scale.count();\n  } else {\n    realNumberScaleTicks = scale.getTicks();\n    tickCount = realNumberScaleTicks.length;\n  }\n\n  var axisLabelModel = axis.getLabelModel();\n  var labelFormatter = makeLabelFormatter(axis);\n  var rect;\n  var step = 1; // Simple optimization for large amount of labels\n\n  if (tickCount > 40) {\n    step = Math.ceil(tickCount / 40);\n  }\n\n  for (var i = 0; i < tickCount; i += step) {\n    var tick = realNumberScaleTicks ? realNumberScaleTicks[i] : {\n      value: categoryScaleExtent[0] + i\n    };\n    var label = labelFormatter(tick, i);\n    var unrotatedSingleRect = axisLabelModel.getTextRect(label);\n    var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\n    rect ? rect.union(singleRect) : rect = singleRect;\n  }\n\n  return rect;\n}\n\nfunction rotateTextRect(textRect, rotate) {\n  var rotateRadians = rotate * Math.PI / 180;\n  var beforeWidth = textRect.width;\n  var beforeHeight = textRect.height;\n  var afterWidth = beforeWidth * Math.abs(Math.cos(rotateRadians)) + Math.abs(beforeHeight * Math.sin(rotateRadians));\n  var afterHeight = beforeWidth * Math.abs(Math.sin(rotateRadians)) + Math.abs(beforeHeight * Math.cos(rotateRadians));\n  var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\n  return rotatedRect;\n}\n/**\n * @param model axisLabelModel or axisTickModel\n * @return {number|String} Can be null|'auto'|number|function\n */\n\n\nexport function getOptionCategoryInterval(model) {\n  var interval = model.get('interval');\n  return interval == null ? 'auto' : interval;\n}\n/**\n * Set `categoryInterval` as 0 implicitly indicates that\n * show all labels reguardless of overlap.\n * @param {Object} axis axisModel.axis\n */\n\nexport function shouldShowAllLabels(axis) {\n  return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\n}\nexport function getDataDimensionsOnAxis(data, axisDim) {\n  // Remove duplicated dat dimensions caused by `getStackedDimension`.\n  var dataDimMap = {}; // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\n  // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\n  // there has been stacked result dim?\n\n  zrUtil.each(data.mapDimensionsAll(axisDim), function (dataDim) {\n    // For example, the extent of the original dimension\n    // is [0.1, 0.5], the extent of the `stackResultDimension`\n    // is [7, 9], the final extent should NOT include [0.1, 0.5],\n    // because there is no graphic corresponding to [0.1, 0.5].\n    // See the case in `test/area-stack.html` `main1`, where area line\n    // stack needs `yAxis` not start from 0.\n    dataDimMap[getStackedDimension(data, dataDim)] = true;\n  });\n  return zrUtil.keys(dataDimMap);\n}\nexport function unionAxisExtentFromData(dataExtent, data, axisDim) {\n  if (data) {\n    zrUtil.each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\n      var seriesExtent = data.getApproximateExtent(dim);\n      seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n      seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as numberUtil from '../../util/number';\nimport sliderMove from '../helper/sliderMove';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo';\nimport { getAxisMainType, isCoordSupported } from './helper';\nimport { SINGLE_REFERRING } from '../../util/model';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n */\n\nvar AxisProxy =\n/** @class */\nfunction () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel; // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   */\n\n\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\n   * @return Value can only be NaN or finite value.\n   */\n\n\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\n   * @return {Array.<number>}\n   */\n\n\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   */\n\n\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value']; // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]); // Use scale.parse to math round for category or time axis.\n\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue); // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      } // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n\n\n      valueWindow[idx] = boundValue;\n      percentWindow[idx] = boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow); // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we dont restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\n   * Notice: reset should not be called before series.restoreData() called,\n   * so it is recommanded to be called in \"process stage\" but not \"model init\n   * stage\".\n   */\n\n\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var targetSeries = this.getTargetSeriesModels(); // Culculate data window and data extent, and record them.\n\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries); // this.hasSeriesStacked = false;\n    // each(targetSeries, function (series) {\n    // let data = series.getData();\n    // let dataDim = data.mapDimension(this._dimName);\n    // let stackedDimension = data.getCalculationInfo('stackedDimension');\n    // if (stackedDimension && stackedDimension === dataDim) {\n    // this.hasSeriesStacked = true;\n    // }\n    // }, this);\n    // `calculateDataWindow` uses min/maxSpan.\n\n    this._updateMinMaxSpan();\n\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow; // Update axis setting then.\n\n    this._setAxisModel();\n  };\n\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n\n    if (filterMode === 'none') {\n      return;\n    } // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n\n\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n\n      if (!dataDims.length) {\n        return;\n      }\n\n      if (filterMode === 'weakFilter') {\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = seriesData.get(dataDims[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          } // If both left out and right out, do not filter.\n\n\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow; // console.time('select');\n\n            seriesData.selectRange(range); // console.timeEnd('select');\n          }\n        });\n      }\n\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan)); // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n\n    if (!percentWindow) {\n      return;\n    } // [0, 500]: arbitrary value, guess axis extent.\n\n\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20); // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n\n    rawExtentInfo.freeze();\n  };\n\n  return AxisProxy;\n}();\n\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  }); // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\n\nexport default AxisProxy;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util';\nimport { getAxisMainType } from './helper';\nimport AxisProxy from './AxisProxy';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    } // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n\n\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      }); // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { findEffectedDataZooms } from './helper';\nimport { each } from 'zrender/lib/core/util';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport dataZoomProcessor from './dataZoomProcessor';\nimport installDataZoomAction from './dataZoomAction';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel';\nimport SelectZoomView from './SelectZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as featureManager from './featureManager';\nimport ComponentModel from '../../model/Component';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {\n  return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;\n}\n\nfunction defaultKeyGetter(item) {\n  return item;\n}\n\nvar DataDiffer =\n/** @class */\nfunction () {\n  /**\n   * @param context Can be visited by this.context in callback.\n   */\n  function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context, // By default: 'oneToOne'.\n  diffMode) {\n    this._old = oldArr;\n    this._new = newArr;\n    this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n    this._newKeyGetter = newKeyGetter || defaultKeyGetter; // Visible in callback via `this.context`;\n\n    this.context = context;\n    this._diffModeMultiple = diffMode === 'multiple';\n  }\n  /**\n   * Callback function when add a data\n   */\n\n\n  DataDiffer.prototype.add = function (func) {\n    this._add = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data\n   */\n\n\n  DataDiffer.prototype.update = function (func) {\n    this._update = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n\n\n  DataDiffer.prototype.updateManyToOne = function (func) {\n    this._updateManyToOne = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n\n\n  DataDiffer.prototype.updateOneToMany = function (func) {\n    this._updateOneToMany = func;\n    return this;\n  };\n  /**\n   * Callback function when remove a data\n   */\n\n\n  DataDiffer.prototype.remove = function (func) {\n    this._remove = func;\n    return this;\n  };\n\n  DataDiffer.prototype.execute = function () {\n    this[this._diffModeMultiple ? '_executeMultiple' : '_executeOneToOne']();\n  };\n\n  DataDiffer.prototype._executeOneToOne = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var newDataIndexMap = {};\n    var oldDataKeyArr = new Array(oldArr.length);\n    var newDataKeyArr = new Array(newArr.length);\n\n    this._initIndexMap(oldArr, null, oldDataKeyArr, '_oldKeyGetter');\n\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n\n    for (var i = 0; i < oldArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal); // idx can never be empty array here. see 'set null' logic below.\n\n      if (newIdxMapValLen > 1) {\n        // Consider there is duplicate key (for example, use dataItem.name as key).\n        // We should make sure every item in newArr and oldArr can be visited.\n        var newIdx = newIdxMapVal.shift();\n\n        if (newIdxMapVal.length === 1) {\n          newDataIndexMap[oldKey] = newIdxMapVal[0];\n        }\n\n        this._update && this._update(newIdx, i);\n      } else if (newIdxMapValLen === 1) {\n        newDataIndexMap[oldKey] = null;\n        this._update && this._update(newIdxMapVal, i);\n      } else {\n        this._remove && this._remove(i);\n      }\n    }\n\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  /**\n   * For example, consider the case:\n   * oldData: [o0, o1, o2, o3, o4, o5, o6, o7],\n   * newData: [n0, n1, n2, n3, n4, n5, n6, n7, n8],\n   * Where:\n   *     o0, o1, n0 has key 'a' (many to one)\n   *     o5, n4, n5, n6 has key 'b' (one to many)\n   *     o2, n1 has key 'c' (one to one)\n   *     n2, n3 has key 'd' (add)\n   *     o3, o4 has key 'e' (remove)\n   *     o6, o7, n7, n8 has key 'f' (many to many, treated as add and remove)\n   * Then:\n   *     (The order of the following directives are not ensured.)\n   *     this._updateManyToOne(n0, [o0, o1]);\n   *     this._updateOneToMany([n4, n5, n6], o5);\n   *     this._update(n1, o2);\n   *     this._remove(o3);\n   *     this._remove(o4);\n   *     this._remove(o6);\n   *     this._remove(o7);\n   *     this._add(n2);\n   *     this._add(n3);\n   *     this._add(n7);\n   *     this._add(n8);\n   */\n\n\n  DataDiffer.prototype._executeMultiple = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var oldDataIndexMap = {};\n    var newDataIndexMap = {};\n    var oldDataKeyArr = [];\n    var newDataKeyArr = [];\n\n    this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\n\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n\n    for (var i = 0; i < oldDataKeyArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var oldIdxMapVal = oldDataIndexMap[oldKey];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n\n      if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {\n        this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {\n        this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {\n        this._update && this._update(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1) {\n        for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {\n          this._remove && this._remove(oldIdxMapVal[i_1]);\n        }\n      } else {\n        this._remove && this._remove(oldIdxMapVal);\n      }\n    }\n\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n\n  DataDiffer.prototype._performRestAdd = function (newDataKeyArr, newDataIndexMap) {\n    for (var i = 0; i < newDataKeyArr.length; i++) {\n      var newKey = newDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[newKey];\n      var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n\n      if (idxMapValLen > 1) {\n        for (var j = 0; j < idxMapValLen; j++) {\n          this._add && this._add(newIdxMapVal[j]);\n        }\n      } else if (idxMapValLen === 1) {\n        this._add && this._add(newIdxMapVal);\n      } // Support both `newDataKeyArr` are duplication removed or not removed.\n\n\n      newDataIndexMap[newKey] = null;\n    }\n  };\n\n  DataDiffer.prototype._initIndexMap = function (arr, // Can be null.\n  map, // In 'byKey', the output `keyArr` is duplication removed.\n  // In 'byIndex', the output `keyArr` is not duplication removed and\n  //     its indices are accurately corresponding to `arr`.\n  keyArr, keyGetterName) {\n    var cbModeMultiple = this._diffModeMultiple;\n\n    for (var i = 0; i < arr.length; i++) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var key = '_ec_' + this[keyGetterName](arr[i], i);\n\n      if (!cbModeMultiple) {\n        keyArr[i] = key;\n      }\n\n      if (!map) {\n        continue;\n      }\n\n      var idxMapVal = map[key];\n      var idxMapValLen = dataIndexMapValueLength(idxMapVal);\n\n      if (idxMapValLen === 0) {\n        // Simple optimize: in most cases, one index has one key,\n        // do not need array.\n        map[key] = i;\n\n        if (cbModeMultiple) {\n          keyArr.push(key);\n        }\n      } else if (idxMapValLen === 1) {\n        map[key] = [idxMapVal, i];\n      } else {\n        idxMapVal.push(i);\n      }\n    }\n  };\n\n  return DataDiffer;\n}();\n\nexport default DataDiffer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport { getLayoutRect, box as layoutBox, positionElement } from '../../util/layout';\nimport * as formatUtil from '../../util/format';\nimport * as graphic from '../../util/graphic';\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\n\nexport function layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\nexport function makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states';\nimport Model from '../../model/Model';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as listComponentHelper from '../helper/listComponent';\nimport ComponentView from '../../view/Component';\nimport { ToolboxFeature, getFeature } from './featureManager';\nimport { getUID } from '../../util/component';\nimport ZRText from 'zrender/lib/graphic/Text';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (typeof icons === 'string') {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (typeof titles === 'string') {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        }); // graphic.enableHoverEmphasis(path);\n\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.states.emphasis; // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array */\n\nimport env from 'zrender/lib/core/env';\nimport { ToolboxFeature } from '../featureManager';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    }); // Chrome, Firefox, New Edge\n\n    if (typeof MouseEvent === 'function' && (env.browser.newEdge || !env.browser.ie && !env.browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework， window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = window.atob(bstr));\n          var filename = title + '.' + type;\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]);\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocale(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocale(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nSaveAsImage.prototype.unusable = !env.canvasSupported;\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { SINGLE_REFERRING } from '../../../util/model';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocale(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { addEventListener } from 'zrender/lib/core/event';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div');\n    root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin: 10px 20px;';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (typeof optionToContent === 'function') {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (typeof htmlOrDom === 'string') {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      viewMain.appendChild(textarea);\n      textarea.readOnly = model.get('readOnly');\n      textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\n      textarea.style.color = model.get('textColor');\n      textarea.style.borderColor = model.get('textareaBorderColor');\n      textarea.style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\n    var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          console.warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (typeof contentToOption === 'function') {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = buttonStyle;\n    closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocale(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocale(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\n\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\n\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as history from '../../dataZoom/history';\nimport { ToolboxFeature } from '../featureManager';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocale(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util';\nimport Eventful from 'zrender/lib/core/Eventful';\nimport * as graphic from '../../util/graphic';\nimport * as interactionMutex from './interactionMutex';\nimport DataDiffer from '../../data/DataDiffer';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\n\nvar BrushController =\n/** @class */\nfunction (_super) {\n  __extends(BrushController, _super);\n\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n\n\n    _this._track = [];\n    /**\n     * @internal\n     */\n\n    _this._covers = [];\n    _this._handlers = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n\n\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr; // Consider roam, which takes globalPan too.\n\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n\n\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  }; // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n\n\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n\n  return BrushController;\n}(Eventful);\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\n;\n\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\n\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\n\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { onIrrelevantElement } from './cursorHelper';\nimport * as graphicUtil from '../../util/graphic';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as brushHelper from './brushHelper';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model'; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\nvar BrushTargetManager =\n/** @class */\nfunction () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n      if (!area.coordRange) {\n        area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n\n\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n\n      area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If reutrn true, global found.\n   * Otherwise nothing found.\n   */\n\n\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n\n    return true;\n  };\n\n  return BrushTargetManager;\n}();\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../../helper/BrushController';\nimport BrushTargetManager from '../../helper/BrushTargetManager';\nimport * as history from '../../dataZoom/history';\nimport sliderMove from '../../helper/sliderMove';\nimport { ToolboxFeature } from '../featureManager';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocale(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect';\nimport ToolboxModel from './ToolboxModel';\nimport ToolboxView from './ToolboxView'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager';\nimport SaveAsImage from './feature/SaveAsImage';\nimport MagicType from './feature/MagicType';\nimport DataView from './feature/DataView';\nimport Restore from './feature/Restore';\nimport DataZoom from './feature/DataZoom';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../../model/Model';\nimport { each, curry, clone, defaults, isArray, indexOf } from 'zrender/lib/core/util'; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nexport function collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var axisKey = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[axisKey] = {\n        key: axisKey,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: [],\n        linkGroup: null\n      };\n      axesInfoInCoordSys[axisKey] = axisInfo;\n      result.seriesInvolved = result.seriesInvolved || involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[axisKey] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n  var volatileOption = {};\n  each(fields, function (field) {\n    volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n    var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  });\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nexport function fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\nexport function getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\nexport function getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get(['handle', 'show']);\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nexport function makeKey(model) {\n  return model.type + '||' + model.id;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as axisPointerModelHelper from '../axisPointer/modelHelper';\nimport ComponentView from '../../view/Component';\nvar axisPointerClazz = {};\n/**\n * Base class of AxisView.\n */\n\nvar AxisView =\n/** @class */\nfunction (_super) {\n  __extends(AxisView, _super);\n\n  function AxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisView.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n\n    _super.prototype.render.apply(this, arguments);\n\n    this._doUpdateAxisPointerClass(axisModel, api, true);\n  };\n  /**\n   * Action handler.\n   */\n\n\n  AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n    this._doUpdateAxisPointerClass(axisModel, api, false);\n  };\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.remove = function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n  };\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.dispose = function (ecModel, api) {\n    this._disposeAxisPointer(api);\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n    var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n\n    if (!Clazz) {\n      return;\n    }\n\n    var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n  };\n\n  AxisView.prototype._disposeAxisPointer = function (api) {\n    this._axisPointer && this._axisPointer.dispose(api);\n    this._axisPointer = null;\n  };\n\n  AxisView.registerAxisPointerClass = function (type, clazz) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (axisPointerClazz[type]) {\n        throw new Error('axisPointer ' + type + ' exists');\n      }\n    }\n\n    axisPointerClazz[type] = clazz;\n  };\n\n  ;\n\n  AxisView.getAxisPointerClass = function (type) {\n    return type && axisPointerClazz[type];\n  };\n\n  ;\n  AxisView.type = 'axis';\n  return AxisView;\n}(ComponentView);\n\nexport default AxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as axisPointerModelHelper from './modelHelper';\nimport * as eventTool from 'zrender/lib/core/event';\nimport * as throttleUtil from '../../util/throttle';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n */\n\nvar BaseAxisPointer =\n/** @class */\nfunction () {\n  function BaseAxisPointer() {\n    this._dragging = false;\n    /**\n     * In px, arbitrary value. Do not set too small,\n     * no animation is ok for most cases.\n     */\n\n    this.animationThreshold = 15;\n  }\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  };\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.remove = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.dispose = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  };\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        // TODOTODO\n        // shape: elOption.label.shape,\n        x: elOption.label.x,\n        y: elOption.label.y\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  BaseAxisPointer.prototype._renderHandle = function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'])); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.scaleX = handleSize[0] / 2;\n    handle.scaleY = handleSize[1] / 2;\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  };\n\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  };\n\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  };\n  /**\n   * Throttled method.\n   */\n\n\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  };\n\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  BaseAxisPointer.prototype.clear = function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.doClear = function () {// Implemented by sub-class if necessary.\n  };\n\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  };\n\n  return BaseAxisPointer;\n}();\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals_1 = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\n    });\n    return !!equals_1;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    x: trans.x || 0,\n    y: trans.y || 0,\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nexport default BaseAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieve, defaults, extend, each, isObject } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { createTextStyle } from '../../label/labelStyle';\nimport Model from '../../model/Model';\nimport { isRadianAroundZero, remRadian } from '../../util/number';\nimport { createSymbol } from '../../util/symbol';\nimport * as matrixUtil from 'zrender/lib/core/matrix';\nimport { applyTransform as v2ApplyTransform } from 'zrender/lib/core/vector';\nimport { shouldShowAllLabels } from '../../coord/axisHelper';\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n */\n\nvar AxisBuilder =\n/** @class */\nfunction () {\n  function AxisBuilder(axisModel, opt) {\n    this.group = new graphic.Group();\n    this.opt = opt;\n    this.axisModel = axisModel; // Default value\n\n    defaults(opt, {\n      labelOffset: 0,\n      nameDirection: 1,\n      tickDirection: 1,\n      labelDirection: 1,\n      silent: true,\n      handleAutoShown: function () {\n        return true;\n      }\n    }); // FIXME Not use a seperate text group?\n\n    var transformGroup = new graphic.Group({\n      x: opt.position[0],\n      y: opt.position[1],\n      rotation: opt.rotation\n    }); // this.group.add(transformGroup);\n    // this._transformGroup = transformGroup;\n\n    transformGroup.updateTransform();\n    this._transformGroup = transformGroup;\n  }\n\n  AxisBuilder.prototype.hasBuilder = function (name) {\n    return !!builders[name];\n  };\n\n  AxisBuilder.prototype.add = function (name) {\n    builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\n  };\n\n  AxisBuilder.prototype.getGroup = function () {\n    return this.group;\n  };\n\n  AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n    var rotationDiff = remRadian(textRotation - axisRotation);\n    var textAlign;\n    var textVerticalAlign;\n\n    if (isRadianAroundZero(rotationDiff)) {\n      // Label is parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI)) {\n      // Label is inverse parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n\n      if (rotationDiff > 0 && rotationDiff < PI) {\n        textAlign = direction > 0 ? 'right' : 'left';\n      } else {\n        textAlign = direction > 0 ? 'left' : 'right';\n      }\n    }\n\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  };\n\n  AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n    var eventData = {\n      componentType: axisModel.mainType,\n      componentIndex: axisModel.componentIndex\n    };\n    eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n    return eventData;\n  };\n\n  AxisBuilder.isLabelSilent = function (axisModel) {\n    var tooltipOpt = axisModel.get('tooltip');\n    return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n    || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n  };\n\n  return AxisBuilder;\n}();\n\n;\nvar builders = {\n  axisLine: function (opt, axisModel, group, transformGroup) {\n    var shown = axisModel.get(['axisLine', 'show']);\n\n    if (shown === 'auto' && opt.handleAutoShown) {\n      shown = opt.handleAutoShown('axisLine');\n    }\n\n    if (!shown) {\n      return;\n    }\n\n    var extent = axisModel.axis.getExtent();\n    var matrix = transformGroup.transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n    var line = new graphic.Line({\n      // Id for animation\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    });\n    line.anid = 'line';\n    group.add(line);\n    var arrows = axisModel.get(['axisLine', 'symbol']);\n    var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n    var arrowOffset = axisModel.get(['axisLine', 'symbolOffset']) || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth_1 = arrowSize[0];\n      var symbolHeight_1 = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          symbol.attr({\n            rotation: point.rotate,\n            x: pt1[0] + r * Math.cos(opt.rotation),\n            y: pt1[1] - r * Math.sin(opt.rotation),\n            silent: true,\n            z2: 11\n          });\n          group.add(symbol);\n        }\n      });\n    }\n  },\n  axisTickLabel: function (opt, axisModel, group, transformGroup) {\n    var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\n    var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection);\n  },\n  axisName: function (opt, axisModel, group, transformGroup) {\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n    var textEl = new graphic.Text({\n      x: pos[0],\n      y: pos[1],\n      rotation: labelLayout.rotation,\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      style: createTextStyle(textStyleModel, {\n        text: name,\n        font: textFont,\n        overflow: 'truncate',\n        width: maxWidth,\n        ellipsis: ellipsis,\n        fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n        align: textStyleModel.get('align') || labelLayout.textAlign,\n        verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n      }),\n      z2: 1\n    });\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: name\n    });\n    textEl.__fullText = name; // Id for animation\n\n    textEl.anid = 'name';\n\n    if (axisModel.get('triggerEvent')) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisName';\n      eventData.name = name;\n      getECData(textEl).eventData = eventData;\n    } // FIXME\n\n\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nfunction endTextLayout(rotation, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n  var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      autoBatch: true,\n      silent: true\n    });\n    tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n  var shown = tickModel.get('show');\n\n  if (shown === 'auto' && opt.handleAutoShown) {\n    shown = opt.handleAutoShown('axisTick');\n  }\n\n  if (!shown || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = AxisBuilder.isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue]) {\n      var rawCategoryItem = rawCategoryData[tickValue];\n\n      if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n        itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n      }\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n    var tickCoord = axis.dataToCoord(tickValue);\n    var textEl = new graphic.Text({\n      x: tickCoord,\n      y: opt.labelOffset + opt.labelDirection * labelMargin,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10,\n      style: createTextStyle(itemLabelModel, {\n        text: formattedLabel,\n        align: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n        verticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n        fill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n        // index of axis.data. So tick should not be exposed to user\n        // in category axis.\n        // (2) Compatible with previous version, which always use formatted label as\n        // input. But in interval scale the formatted label is like '223,445', which\n        // maked user repalce ','. So we modify it to return original val but remain\n        // it as 'string' to avoid error in replacing.\n        axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n      })\n    });\n    textEl.anid = 'label_' + tickValue; // Pack data for mouse event\n\n    if (triggerEvent) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisLabel';\n      eventData.value = rawLabel;\n      getECData(textEl).eventData = eventData;\n    } // FIXME\n\n\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nexport default AxisBuilder;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as formatUtil from '../../util/format';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as axisHelper from '../../coord/axisHelper';\nimport AxisBuilder from '../axis/AxisBuilder';\nimport { createTextStyle } from '../../label/labelStyle';\nexport function buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get(['label', 'precision']),\n    formatter: axisPointerModel.get(['label', 'formatter'])\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n  }\n\n  elOption.label = {\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n    x: position[0],\n    y: position[1],\n    style: createTextStyle(labelModel, {\n      text: text,\n      font: font,\n      fill: labelModel.getTextColor(),\n      padding: paddings,\n      backgroundColor: bgColor\n    }),\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel({\n    value: value\n  }, {\n    // If `precision` is set, width can be fixed (like '12.00500'), which\n    // helps to debounce when when moving label.\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params_1 = {\n      value: axisHelper.getAxisRawValue(axis, {\n        value: value\n      }),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params_1.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params_1);\n    }\n  }\n\n  return text;\n}\nexport function getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  // @ts-ignore\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\nexport function makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\nexport function makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { SINGLE_REFERRING } from '../../util/model';\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n */\n\nexport function layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\nexport function isCartesian2DSeries(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\nexport function findAxisModels(seriesModel) {\n  var axisModelMap = {\n    xAxisModel: null,\n    yAxisModel: null\n  };\n  zrUtil.each(axisModelMap, function (v, key) {\n    var axisType = key.replace(/Model$/, '');\n    var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!axisModel) {\n        throw new Error(axisType + ' \"' + zrUtil.retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n      }\n    }\n\n    axisModelMap[key] = axisModel;\n  });\n  return axisModelMap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer';\nimport * as viewHelper from './viewHelper';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper';\n\nvar CartesianAxisPointer =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisPointer, _super);\n\n  function CartesianAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption( // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    }); // @ts-ignore\n\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: pos[0],\n      y: pos[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  };\n\n  return CartesianAxisPointer;\n}(BaseAxisPointer);\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nexport default CartesianAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar AxisPointerModel =\n/** @class */\nfunction (_super) {\n  __extends(AxisPointerModel, _super);\n\n  function AxisPointerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisPointerModel.type;\n    return _this;\n  }\n\n  AxisPointerModel.type = 'axisPointer';\n  AxisPointerModel.defaultOption = {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#B9BEC9',\n      width: 1,\n      type: 'dashed'\n    },\n    shadowStyle: {\n      color: 'rgba(210,219,238,0.2)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      precision: 'auto',\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      borderColor: null,\n      borderWidth: 0,\n      borderRadius: 3\n    },\n    handle: {\n      show: false,\n      // eslint-disable-next-line\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  };\n  return AxisPointerModel;\n}(ComponentModel);\n\nexport default AxisPointerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport env from 'zrender/lib/core/env';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nexport function register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n\nexport function unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as globalListener from './globalListener';\nimport ComponentView from '../../view/Component';\n\nvar AxisPointerView =\n/** @class */\nfunction (_super) {\n  __extends(AxisPointerView, _super);\n\n  function AxisPointerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisPointerView.type;\n    return _this;\n  }\n\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  };\n\n  AxisPointerView.prototype.remove = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n\n  AxisPointerView.type = 'axisPointer';\n  return AxisPointerView;\n}(ComponentView);\n\nexport default AxisPointerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\n/**\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param ecModel\n * @return  {point: [x, y], el: ...} point Will not be null.\n */\n\nexport default function findPointFromSeries(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    if (finder.isStacked) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var valueAxisDim = valueAxis.dim;\n      var baseAxisDim = baseAxis.dim;\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n      var baseDim = data.mapDimension(baseAxisDim);\n      var stackedData = [];\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n      point = coordSys.dataToPoint(stackedData) || [];\n    } else {\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }), dataIndex)) || [];\n    }\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model';\nimport * as modelHelper from './modelHelper';\nimport findPointFromSeries from './findPointFromSeries';\nimport { each, curry, bind, extend } from 'zrender/lib/core/util';\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @return content of event obj for echarts.connect.\n */\n\nexport default function axisTrigger(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputPayload = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n  });\n  updateModelActually(showValueMap, axesInfo, outputPayload);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputPayload;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!noSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimensionsAll(dim);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\n  var outputAxesInfo = outputPayload.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport AxisView from '../axis/AxisView';\nimport CartesianAxisPointer from './CartesianAxisPointer';\nimport AxisPointerModel from './AxisPointerModel';\nimport AxisPointerView from './AxisPointerView';\nimport { isArray } from 'zrender/lib/core/util';\nimport { collect } from './modelHelper';\nimport axisTrigger from './axisTrigger';\nexport function install(registers) {\n  // CartesianAxisPointer is not supposed to be required here. But consider\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\n  // CartesianAxisPointer should be able to required somewhere.\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n  registers.registerComponentModel(AxisPointerModel);\n  registers.registerComponentView(AxisPointerView);\n  registers.registerPreprocessor(function (option) {\n    // Always has a global axisPointerModel for default setting.\n    if (option) {\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n      var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n      // is not set, remain null/undefined, otherwise it will\n      // override existent link setting.\n\n      if (link && !isArray(link)) {\n        option.axisPointer.link = [link];\n      }\n    }\n  }); // This process should proformed after coordinate systems created\n  // and series data processed. So put it on statistic processing stage.\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n    // allAxesInfo should be updated when setOption performed.\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n  }); // Broadcast to all views.\n\n  registers.registerAction({\n    type: 'updateAxisPointer',\n    event: 'updateAxisPointer',\n    update: ':updateAxisPointer'\n  }, axisTrigger);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar TooltipModel =\n/** @class */\nfunction (_super) {\n  __extends(TooltipModel, _super);\n\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaut false (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    enterable: false,\n    backgroundColor: '#fff',\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      } // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n\n    },\n    textStyle: {\n      color: '#666',\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\n\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { toCamelCase } from '../../util/format';\nimport env from 'zrender/lib/core/env';\n/* global document */\n\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\n\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n\n  var style = document.documentElement.style;\n\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\n\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isString, indexOf, each, bind, isArray, isDom } from 'zrender/lib/core/util';\nimport { toHex } from 'zrender/lib/tool/color';\nimport { normalizeEvent } from 'zrender/lib/core/event';\nimport { transformLocalCoord } from 'zrender/lib/core/dom';\nimport env from 'zrender/lib/core/env';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup';\n/* global document, window */\n\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform'); // eslint-disable-next-line\n\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\n\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\n\nfunction assembleArrow(backgroundColor, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var positionStyle = arrowPos + \":-6px;\";\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n\n  var borderStyle = borderColor + \" solid 1px;\";\n  var styleCss = ['position:absolute;width:10px;height:10px;', positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\", 'box-shadow:8px 8px 16px -3px #000;'];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\n\nfunction assembleTransition(duration, onlyFade) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n\n  if (!onlyFade) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n  }\n\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\n\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px'; // not support transform, use `left` and `top` instead.\n\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  } // support transform\n\n\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize // @ts-ignore, leave it to the tooltip refactor.\n  && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow); // Animation transition. Do not animate when transitionDuration is 0.\n\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-color:#' + toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nvar TooltipHTMLContent =\n/** @class */\nfunction () {\n  function TooltipHTMLContent(container, api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._firstShow = true;\n    this._longHide = true;\n\n    if (env.wxa) {\n      return null;\n    }\n\n    var el = document.createElement('div'); // TODO: TYPE\n\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendToBody = this._appendToBody = opt && opt.appendToBody;\n    makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n    if (appendToBody) {\n      document.body.appendChild(el);\n    } else {\n      container.appendChild(el);\n    }\n\n    this._container = container; // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n\n    var self = this;\n\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    };\n\n    el.onmousemove = function (e) {\n      e = e || window.event;\n\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var position = getComputedStyle(container, 'position');\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // move tooltip if chart resized\n\n\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized(); // update className\n\n    this.el.className = tooltipModel.get('className') || ''; // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide) // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '') // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-event:\" + (this._enterable ? 'auto' : 'none'));\n    }\n\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    if (content == null) {\n      return;\n    }\n\n    var el = this.el;\n\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      content += assembleArrow(tooltipModel.get('backgroundColor'), borderColor, arrowPosition);\n    }\n\n    if (isString(content)) {\n      el.innerHTML = content;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n\n      if (!isArray(content)) {\n        content = [content];\n      }\n\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  };\n\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n\n    var style = this.el.style;\n    style.visibility = 'hidden';\n    style.opacity = '0';\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipHTMLContent.prototype.dispose = function () {\n    this.el.parentNode.removeChild(this.el);\n  };\n\n  TooltipHTMLContent.prototype.getOuterSize = function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    var stl = getComputedStyle(this.el);\n\n    if (stl) {\n      width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n      height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  return TooltipHTMLContent;\n}();\n\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ZRText from 'zrender/lib/graphic/Text';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup';\nimport { throwError } from '../../util/log';\n\nvar TooltipRichContent =\n/** @class */\nfunction () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n  };\n\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.show();\n    this._show = true;\n  };\n  /**\n   * Set tooltip content\n   */\n\n\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        backgroundColor: tooltipModel.get('backgroundColor'),\n        borderRadius: tooltipModel.get('borderRadius'),\n        borderWidth: 1,\n        borderColor: borderColor,\n        shadowColor: tooltipModel.get('shadowColor'),\n        shadowBlur: tooltipModel.get('shadowBlur'),\n        shadowOffsetX: tooltipModel.get('shadowOffsetX'),\n        shadowOffsetY: tooltipModel.get('shadowOffsetY'),\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        textShadowBlur: textStyleModel.get('textShadowBlur') || 0,\n        textShadowOffsetX: textStyleModel.get('textShadowOffsetX') || 0,\n        textShadowOffsetY: textStyleModel.get('textShadowOffsetY') || 0,\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  };\n\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect(); // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style); // rich text x, y do not include border.\n\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  };\n\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipRichContent.prototype.getOuterSize = function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  };\n\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n\n  return TooltipRichContent;\n}();\n\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\n\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\n\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport env from 'zrender/lib/core/env';\nimport TooltipHTMLContent from './TooltipHTMLContent';\nimport TooltipRichContent from './TooltipRichContent';\nimport * as formatUtil from '../../util/format';\nimport * as numberUtil from '../../util/number';\nimport * as graphic from '../../util/graphic';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries';\nimport * as layoutUtil from '../../util/layout';\nimport Model from '../../model/Model';\nimport * as globalListener from '../axisPointer/globalListener';\nimport * as axisHelper from '../../coord/axisHelper';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model';\nimport ComponentView from '../../view/Component';\nimport { format as timeFormat } from '../../util/time'; // import { isDimensionStacked } from '../../data/helper/dataStackHelper';\n\nimport { getECData } from '../../util/innerStore';\nimport { shouldTooltipConfine } from './helper';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup';\nimport { findEventDispatcher } from '../../util/event';\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar TooltipView =\n/** @class */\nfunction (_super) {\n  __extends(TooltipView, _super);\n\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipView.type;\n    return _this;\n  }\n\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    this._tooltipContent = this._renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api.getDom(), api, {\n      appendToBody: tooltipModel.get('appendToBody', true)\n    });\n  };\n\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  };\n\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n\n\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      }; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  }; // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n\n\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex; // @ts-ignore\n\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n          return true;\n        } // Tooltip provided directly. Like legend.\n\n\n        if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n          return true;\n        }\n      }, true);\n\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n\n      this._hide(dispatchAction);\n    }\n  };\n\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    }); // Only for legacy: `Serise['formatTooltip']` returns a string.\n\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !zrUtil.trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        zrUtil.each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex);\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel; // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', formatUtil.convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n\n          if (seriesTooltipResult.markupFragment) {\n            axisSectionMarkup.blocks.push(seriesTooltipResult.markupFragment);\n          }\n\n          if (seriesTooltipResult.markupText) {\n            markupTextArrLegacy.push(seriesTooltipResult.markupText);\n          }\n\n          cbParamsList.push(cbParams);\n        });\n      });\n    }); // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  };\n\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher); // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n\n    params.marker = markupStyleCreator.makeTooltipMarker('item', formatUtil.convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var markupText = seriesTooltipResult.markupFragment ? buildTooltipMarkup(seriesTooltipResult.markupFragment, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.markupText;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n\n    if (zrUtil.isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var tooltipModelCascade = [tooltipOpt];\n\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    } // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they can not share the same formatter. Since the global tooltip formatter is used for series\n    // by convension, we do not use it as the default formatter for component.\n\n\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + ''; // PENDING: this case do not support richText style yet.\n\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = zrUtil.clone(subTooltipModel.get('formatterParams') || {});\n\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showTooltipContent = function ( // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n\n    var nearPointColor = nearPoint.color;\n\n    if (formatter && zrUtil.isString(formatter)) {\n      var useUTC = tooltipModel.ecModel.get('useUTC');\n      var params0 = zrUtil.isArray(params) ? params[0] : params;\n      var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n      html = formatter;\n\n      if (isTimeAxis) {\n        html = timeFormat(params0.axisValue, html, useUTC);\n      }\n\n      html = formatUtil.formatTpl(html, params, true);\n    } else if (zrUtil.isFunction(formatter)) {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n    if (trigger === 'axis' || zrUtil.isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n      };\n    }\n\n    if (!zrUtil.isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x, // Mouse x\n  y, // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (zrUtil.isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (zrUtil.isString(positionExpr) && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  }; // FIXME\n  // Should we remove this but leave this to user?\n\n\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  };\n\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  };\n\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (zrUtil.isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in defaut tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 10;\n  var offset = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\n * Find target component by payload like:\n * ```js\n * { legendId: 'some_id', name: 'xxx' }\n * { toolboxIndex: 1, name: 'xxx' }\n * { geoName: 'some_name', name: 'xxx' }\n * ```\n * PENDING: at present only\n *\n * If not found, return null/undefined.\n */\n\n\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n\n  if (!model) {\n    return;\n  }\n\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\n\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport { use } from '../../extension';\nimport TooltipModel from './TooltipModel';\nimport TooltipView from './TooltipView';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\n   * @action\n   * @property {string} type\n   * @property {number} seriesIndex\n   * @property {number} dataIndex\n   * @property {number} [x]\n   * @property {number} [y]\n   */\n\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, // noop\n  function () {});\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, // noop\n  function () {});\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar GridModel =\n/** @class */\nfunction (_super) {\n  __extends(GridModel, _super);\n\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\n\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModelCommonMixin =\n/** @class */\nfunction () {\n  function AxisModelCommonMixin() {}\n\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return coordinate system model\n   */\n\n\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n\n  return AxisModelCommonMixin;\n}();\n\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport { SINGLE_REFERRING } from '../../util/model';\n\nvar CartesianAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisModel, _super);\n\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\n\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  scale: true,\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout';\nimport OrdinalMeta from '../data/OrdinalMeta';\nimport { AXIS_TYPES } from './axisCommonTypes';\nimport { each, merge } from 'zrender/lib/core/util';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\n\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n\n    var AxisModel =\n    /** @class */\n    function (_super) {\n      __extends(AxisModel, _super);\n\n      function AxisModel() {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var _this = _super.apply(this, args) || this;\n\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n\n\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      };\n\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\n\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\n\nvar Cartesian =\n/** @class */\nfunction () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  };\n\n  return Cartesian;\n}();\n\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport Cartesian from './Cartesian';\nimport { invert } from 'zrender/lib/core/matrix';\nimport { applyTransform } from 'zrender/lib/core/vector';\nexport var cartesian2DDimensions = ['x', 'y'];\n\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\n\nvar Cartesian2D =\n/** @class */\nfunction (_super) {\n  __extends(Cartesian2D, _super);\n\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n\n\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    } // Accelerate data to point calculation on the special large time series data.\n\n\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n\n\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1]; // Fast path\n\n    if (this._transform // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n\n  Cartesian2D.prototype.pointToData = function (point, clamp) {\n    var out = [];\n\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n\n\n  Cartesian2D.prototype.getArea = function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    return new BoundingRect(x, y, width, height);\n  };\n\n  return Cartesian2D;\n}(Cartesian);\n\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport { makeInner } from '../util/model';\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper';\nvar inner = makeInner();\nexport function createAxisLabels(axis) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n}\n/**\n * @param {module:echats/coord/Axis} axis\n * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\n * @return {Object} {\n *     ticks: Array.<number>\n *     tickCategoryInterval: number\n * }\n */\n\nexport function createAxisTicks(axis, tickModel) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: zrUtil.map(axis.scale.getTicks(), function (tick) {\n      return tick.value;\n    })\n  };\n}\n\nfunction makeCategoryLabels(axis) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: [],\n    labelCategoryInterval: result.labelCategoryInterval\n  } : result;\n}\n\nfunction makeCategoryLabelsActually(axis, labelModel) {\n  var labelsCache = getListCache(axis, 'labels');\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var result = listCacheGet(labelsCache, optionLabelInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var labels;\n  var numericLabelInterval;\n\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(labelsCache, optionLabelInterval, {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  });\n}\n\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = getListCache(axis, 'ticks');\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = listCacheGet(ticksCache, optionTickInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var ticks;\n  var tickCategoryInterval; // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  } // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n      var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n      tickCategoryInterval = labelsResult.labelCategoryInterval;\n      ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n        return labelItem.tickValue;\n      });\n    } else {\n      tickCategoryInterval = optionTickInterval;\n      ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n    } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\n\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tick, idx) {\n      return {\n        formattedLabel: labelFormatter(tick, idx),\n        rawLabel: axis.scale.getLabel(tick),\n        tickValue: tick.value\n      };\n    })\n  };\n}\n\nfunction getListCache(axis, prop) {\n  // Because key can be funciton, and cache size always be small, we use array cache.\n  return inner(axis)[prop] || (inner(axis)[prop] = []);\n}\n\nfunction listCacheGet(cache, key) {\n  for (var i = 0; i < cache.length; i++) {\n    if (cache[i].key === key) {\n      return cache[i].value;\n    }\n  }\n}\n\nfunction listCacheSet(cache, key, value) {\n  cache.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\n\nfunction makeAutoCategoryInterval(axis) {\n  var result = inner(axis).autoInterval;\n  return result != null ? result : inner(axis).autoInterval = axis.calculateCategoryInterval();\n}\n/**\n * Calculate interval for category axis ticks and labels.\n * To get precise result, at least one of `getRotate` and `isHorizontal`\n * should be implemented in axis.\n */\n\n\nexport function calculateCategoryInterval(axis) {\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n\n  var tickCount = ordinalScale.count();\n\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n\n  var step = 1; // Simple optimization. Empirical value: tick count should less than 40.\n\n  if (tickCount > 40) {\n    step = Math.max(1, Math.floor(tickCount / 40));\n  }\n\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0; // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0; // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n\n    var rect = textContain.getBoundingRect(labelFormatter({\n      value: tickValue\n    }), params.font, 'center', 'top'); // Magic number\n\n    width = rect.width * 1.3;\n    height = rect.height * 1.3; // Min size, void long loop.\n\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n\n  var dw = maxW / unitW;\n  var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  var cache = inner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hiden labels might not be shown again.\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n    interval = lastAutoInterval;\n  } // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n      cache.lastTickCount = tickCount;\n      cache.lastAutoInterval = interval;\n      cache.axisExtent0 = axisExtent[0];\n      cache.axisExtent1 = axisExtent[1];\n    }\n\n  return interval;\n}\n\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\n\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = []; // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count(); // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  } // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n\n\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  } // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n\n\n  var tickValue = startTick;\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n\n  function addItem(tickValue) {\n    var tickObj = {\n      value: tickValue\n    };\n    result.push(onlyTick ? tickValue : {\n      formattedLabel: labelFormatter(tickObj),\n      rawLabel: ordinalScale.getLabel(tickObj),\n      tickValue: tickValue\n    });\n  }\n\n  return result;\n}\n\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\n    var rawLabel = ordinalScale.getLabel(tick);\n    var tickValue = tick.value;\n\n    if (categoryInterval(tick.value, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tick),\n        rawLabel: rawLabel,\n        tickValue: tickValue\n      });\n    }\n  });\n  return result;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map } from 'zrender/lib/core/util';\nimport { linearMap, getPixelPrecision, round } from '../util/number';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval } from './axisTickLabelBuilder';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\n * Base class of Axis.\n */\n\nvar Axis =\n/** @class */\nfunction () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\n   * If axis extent contain given coord\n   */\n\n\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\n   * If axis extent contain given data\n   */\n\n\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(data);\n  };\n  /**\n   * Get coord extent.\n   */\n\n\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Get precision used for formatting\n   */\n\n\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\n   * Set coord extent\n   */\n\n\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\n   * Convert data to coord. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(data);\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\n   * Convert coord to data. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\n   * Convert pixel point to data in axis\n   */\n\n\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n   * `axis.getTicksCoords` considers `onBand`, which is used by\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\n   * @param opt.clamp If `true`, the first and the last\n   *        tick must be at the axis end points. Otherwise, clip ticks\n   *        that outside the axis extent.\n   */\n\n\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel);\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber'); // Protection.\n\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n\n  Axis.prototype.getViewLabels = function () {\n    return createAxisLabels(this).labels;\n  };\n\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\n   * Notice here we only get the default tick model. For splitLine\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\n   * manually when calling `getTicksCoords`.\n   * In GL, this method may be overrided to:\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n   */\n\n\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\n   * Get width of band\n   */\n\n\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0); // Fix #2728, avoid NaN when only one data.\n\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\n   * Only be called in category axis.\n   * Can be overrided, consider other axes like in 3D.\n   * @return Auto interval for cateogry axis tick and label\n   */\n\n\n  Axis.prototype.calculateCategoryInterval = function () {\n    return calculateCategoryInterval(this);\n  };\n\n  return Axis;\n}();\n\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n} // If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\n\n\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    last = ticksCoords[1] = {\n      coord: axisExtent[0]\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize\n    };\n    ticksCoords.push(last);\n  }\n\n  var inverse = axisExtent[0] > axisExtent[1]; // Handling clamp.\n\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0]\n    });\n  }\n\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1]\n    });\n  }\n\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\n\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar Axis2D =\n/** @class */\nfunction (_super) {\n  __extends(Axis2D, _super);\n\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n\n\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n\n\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n\n\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n\n  return Axis2D;\n}(Axis);\n\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3 } from 'zrender/lib/core/util';\nimport { getLayoutRect } from '../../util/layout';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D';\nimport Axis2D from './Axis2D';\nimport { SINGLE_REFERRING } from '../../util/model';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper';\n\nvar Grid =\n/** @class */\nfunction () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n\n    this._initCartesian(gridModel, ecModel, api);\n\n    this.model = gridModel;\n  }\n\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n\n    this._updateScale(ecModel, this.model);\n\n    each(axesMap.x, function (xAxis) {\n      niceScaleExtent(xAxis.scale, xAxis.model);\n    });\n    each(axesMap.y, function (yAxis) {\n      niceScaleExtent(yAxis.scale, yAxis.model);\n    }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    }); // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid\n   */\n\n\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes(); // Minus label size\n\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0]; // if (axisIndex == null) {\n      //     Find first axis\n      //     for (let name in axesMapOnDim) {\n      //         if (axesMapOnDim.hasOwnProperty(name)) {\n      //             return axesMapOnDim[name];\n      //         }\n      //     }\n      // }\n      // return axesMapOnDim[axisIndex];\n    }\n  };\n\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    } // Lowest priority.\n    else if (gridModel) {\n        var grid = gridModel.coordinateSystem;\n\n        if (grid === this) {\n          cartesian = this._coordsList[0];\n        }\n      }\n\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n\n\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    }; /// Create axis\n\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n\n    this._axesMap = axesMap; /// Create cartesian2d\n\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n\n        _this._coordsList.push(cartesian);\n\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n\n        var axisPosition = axisModel.get('position');\n\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n        axisModel.axis = axis; // Inject axisModel into axis\n\n        axis.model = axisModel; // Inject grid info axis\n\n        axis.grid = grid; // Index of axis, can be used as key\n\n        axis.index = idx;\n\n        grid._axesList.push(axis);\n\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n\n\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n\n        if (data.type === 'list') {\n          unionExtent(data, xAxis);\n          unionExtent(data, yAxis);\n        }\n      }\n    }, this);\n\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n\n\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    }); // Inject the coordinateSystems into seriesModel\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  }; // For deciding which dimensions to use when creating list data\n\n\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\n\n\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, // Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  } // TODO: TYPE\n\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport AxisBuilder from './AxisBuilder';\nimport AxisView from './AxisView';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\n\nvar CartesianAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisView, _super);\n\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function (elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n\n        for (var i = 0; i < cartesians.length; i++) {\n          var otherAxisType = cartesians[i].getOtherAxis(axisModel.axis).type;\n\n          if (otherAxisType === 'value' || otherAxisType === 'log') {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        } // Not show axisTick or axisLine if other axis is category / time\n\n\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n      axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\n\nvar CartesianXAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianXAxisView, _super);\n\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\n\nexport { CartesianXAxisView };\n\nvar CartesianYAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianYAxisView, _super);\n\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\n\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport GridModel from '../../coord/cartesian/GridModel';\nimport { Rect } from '../../util/graphic';\nimport { defaults } from 'zrender/lib/core/util';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport Grid from '../../coord/cartesian/Grid';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView'; // Grid view\n\nvar GridView =\n/** @class */\nfunction (_super) {\n  __extends(GridView, _super);\n\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'grid';\n    return _this;\n  }\n\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\n\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple';\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport { use } from '../../extension';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport Model from '../../model/Model';\nimport { isNameSpecified } from '../../util/model';\nimport ComponentModel from '../../model/Component';\n\nvar getDefaultSelectorOptions = function (ecModel, type) {\n  if (type === 'all') {\n    return {\n      type: 'all',\n      title: ecModel.getLocale(['legend', 'selector', 'all'])\n    };\n  } else if (type === 'inverse') {\n    return {\n      type: 'inverse',\n      title: ecModel.getLocale(['legend', 'selector', 'inverse'])\n    };\n  }\n};\n\nvar LegendModel =\n/** @class */\nfunction (_super) {\n  __extends(LegendModel, _super);\n\n  function LegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      // legend.width/height are maxWidth/maxHeight actually,\n      // whereas realy width/height is calculated by its content.\n      // (Setting {left: 10, right: 10} does not make sense).\n      // So consider the case:\n      // `setOption({legend: {left: 10});`\n      // then `setOption({legend: {right: 10});`\n      // The previous `left` should be cleared by setting `ignoreSize`.\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  LegendModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  };\n\n  LegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    this._updateSelector(option);\n  };\n\n  LegendModel.prototype._updateSelector = function (option) {\n    var selector = option.selector;\n    var ecModel = this.ecModel;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, getDefaultSelectorOptions(ecModel, item.type));\n      });\n    }\n  };\n\n  LegendModel.prototype.optionUpdated = function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name_1 = legendData[i].get('name');\n\n        if (this.isSelected(name_1)) {\n          // Force to unselect others\n          this.select(name_1);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  };\n\n  LegendModel.prototype._updateData = function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  };\n\n  LegendModel.prototype.getData = function () {\n    return this._data;\n  };\n\n  LegendModel.prototype.select = function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  };\n\n  LegendModel.prototype.unSelect = function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  };\n\n  LegendModel.prototype.toggleSelected = function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  };\n\n  LegendModel.prototype.allSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  };\n\n  LegendModel.prototype.inverseSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  };\n\n  LegendModel.prototype.isSelected = function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  };\n\n  LegendModel.prototype.getOrient = function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  };\n\n  LegendModel.type = 'legend.plain';\n  LegendModel.dependencies = ['series'];\n  LegendModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    show: true,\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    itemWidth: 25,\n    itemHeight: 14,\n    symbolRotate: 'inherit',\n    inactiveColor: '#ccc',\n    inactiveBorderColor: '#ccc',\n    inactiveBorderWidth: 'auto',\n    itemStyle: {\n      color: 'inherit',\n      opacity: 'inherit',\n      decal: 'inherit',\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      borderColor: 'inherit',\n      borderWidth: 'auto',\n      borderCap: 'inherit',\n      borderJoin: 'inherit',\n      borderDashOffset: 'inherit',\n      borderMiterLimit: 'inherit'\n    },\n    lineStyle: {\n      width: 'auto',\n      color: 'inherit',\n      inactiveColor: '#ccc',\n      inactiveWidth: 2,\n      opacity: 'inherit',\n      type: 'inherit',\n      cap: 'inherit',\n      join: 'inherit',\n      dashOffset: 'inherit',\n      miterLimit: 'inherit',\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0\n    },\n    textStyle: {\n      color: '#333'\n    },\n    selectedMode: true,\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    tooltip: {\n      show: false\n    }\n  };\n  return LegendModel;\n}(ComponentModel);\n\nexport default LegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { parse, stringify } from 'zrender/lib/tool/color';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle';\nimport { makeBackground } from '../helper/listComponent';\nimport * as layoutUtil from '../../util/layout';\nimport ComponentView from '../../view/Component';\nimport { LINE_STYLE_KEY_MAP } from '../../model/mixin/lineStyle';\nimport { ITEM_STYLE_KEY_MAP } from '../../model/mixin/itemStyle';\nimport { createSymbol } from '../../util/symbol';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar LegendView =\n/** @class */\nfunction (_super) {\n  __extends(LegendView, _super);\n\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\n   * @override\n   */\n\n\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    } // selector has been normalized to an array in model\n\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw(); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  };\n\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var name = legendItemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group(); // @ts-ignore\n\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\n         * `data.getVisual('style')` may be the color from the register\n         * in series. For example, for line series,\n         */\n\n        var style = data.getVisual('style');\n\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill); // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2; // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n\n              style.fill = stringify(colorArr, 'rgba');\n            }\n\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var legendLineStyle = legendModel.getModel('lineStyle');\n    var style = getLegendStyle(legendIcon, legendItemModel, legendLineStyle, lineVisualStyle, itemVisualStyle, drawType, isSelected);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n\n    if (typeof seriesModel.getLegendIcon === 'function' && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle\n      }));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    var inactiveColor = legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup); // @ts-ignore\n\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\n\nfunction getLegendStyle(iconType, legendModel, legendLineStyle, lineVisualStyle, itemVisualStyle, drawType, isSelected) {\n  /**\n   * Use series style if is inherit;\n   * elsewise, use legend style\n   */\n  // itemStyle\n  var legendItemModel = legendModel.getModel('itemStyle');\n  var itemProperties = ITEM_STYLE_KEY_MAP.concat([['decal']]);\n  var itemStyle = {};\n\n  for (var i = 0; i < itemProperties.length; ++i) {\n    var propName = itemProperties[i][itemProperties[i].length - 1];\n    var visualName = itemProperties[i][0];\n    var value = legendItemModel.getShallow(propName);\n\n    if (value === 'inherit') {\n      switch (visualName) {\n        case 'fill':\n          /**\n           * Series with visualDrawType as 'stroke' should have\n           * series stroke as legend fill\n           */\n          itemStyle.fill = itemVisualStyle[drawType];\n          break;\n\n        case 'stroke':\n          /**\n           * icon type with \"emptyXXX\" should use fill color\n           * in visual style\n           */\n          itemStyle.stroke = itemVisualStyle[iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke'];\n          break;\n\n        case 'opacity':\n          /**\n           * Use lineStyle.opacity if drawType is stroke\n           */\n          itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n          break;\n\n        default:\n          itemStyle[visualName] = itemVisualStyle[visualName];\n      }\n    } else if (value === 'auto' && visualName === 'lineWidth') {\n      // If lineStyle.width is 'auto', it is set to be 2 if series has border\n      itemStyle.lineWidth = itemVisualStyle.lineWidth > 0 ? 2 : 0;\n    } else {\n      itemStyle[visualName] = value;\n    }\n  } // lineStyle\n\n\n  var legendLineModel = legendModel.getModel('lineStyle');\n  var lineProperties = LINE_STYLE_KEY_MAP.concat([['inactiveColor'], ['inactiveWidth']]);\n  var lineStyle = {};\n\n  for (var i = 0; i < lineProperties.length; ++i) {\n    var propName = lineProperties[i][1];\n    var visualName = lineProperties[i][0];\n    var value = legendLineModel.getShallow(propName);\n\n    if (value === 'inherit') {\n      lineStyle[visualName] = lineVisualStyle[visualName];\n    } else if (value === 'auto' && visualName === 'lineWidth') {\n      // If lineStyle.width is 'auto', it is set to be 2 if series has border\n      lineStyle.lineWidth = lineVisualStyle.lineWidth > 0 ? 2 : 0;\n    } else {\n      lineStyle[visualName] = value;\n    }\n  } // Fix auto color to real color\n\n\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n\n  if (!isSelected) {\n    var borderWidth = legendModel.get('inactiveBorderWidth');\n    /**\n     * Since stroke is set to be inactiveBorderColor, it may occur that\n     * there is no border in series but border in legend, so we need to\n     * use border only when series has border if is set to be auto\n     */\n\n    var visualHasBorder = itemStyle[iconType.indexOf('empty') > -1 ? 'fill' : 'stroke'];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendModel.get('inactiveColor');\n    itemStyle.stroke = legendModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineStyle.get('inactiveColor');\n    lineStyle.lineWidth = legendLineStyle.get('inactiveWidth');\n  }\n\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\n\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = '#fff';\n    icon.style.lineWidth = 2;\n  }\n\n  return icon;\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n  // TODO higlight immediately may cause animation loss.\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n\n  return emphasisState && emphasisState.hoverLayer;\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nexport default LegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function legendFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport { curry, each } from 'zrender/lib/core/util';\n\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n\nexport function installLegendAction(registers) {\n  /**\n   * @event legendToggleSelect\n   * @type {Object}\n   * @property {string} type 'legendToggleSelect'\n   * @property {string} [from]\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n  registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n  registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n  /**\n   * @event legendSelect\n   * @type {Object}\n   * @property {string} type 'legendSelect'\n   * @property {string} name Series name or data item name\n   */\n\n  registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n  /**\n   * @event legendUnSelect\n   * @type {Object}\n   * @property {string} type 'legendUnSelect'\n   * @property {string} name Series name or data item name\n   */\n\n  registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LegendModel from './LegendModel';\nimport LegendView from './LegendView';\nimport legendFilter from './legendFilter';\nimport { installLegendAction } from './legendAction';\nexport function install(registers) {\n  registers.registerComponentModel(LegendModel);\n  registers.registerComponentView(LegendView);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n  registers.registerSubTypeDefaulter('legend', function () {\n    return 'plain';\n  });\n  installLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LegendModel from './LegendModel';\nimport { mergeLayoutParam, getLayoutParams } from '../../util/layout';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar ScrollableLegendModel =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableLegendModel, _super);\n\n  function ScrollableLegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScrollableLegendModel.type;\n    return _this;\n  }\n  /**\n   * @param {number} scrollDataIndex\n   */\n\n\n  ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  };\n\n  ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  };\n\n  ScrollableLegendModel.type = 'legend.scroll';\n  ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    pageFormatter: '{current}/{total}',\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  });\n  return ScrollableLegendModel;\n}(LegendModel);\n\n; // Do not `ignoreSize` to enable setting {left: 10, right: 10}.\n\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: !!ignoreSize\n  });\n}\n\nexport default ScrollableLegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Separate legend and scrollable legend to reduce package size.\n */\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as layoutUtil from '../../util/layout';\nimport LegendView from './LegendView';\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\n\nvar ScrollableLegendView =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableLegendView, _super);\n\n  function ScrollableLegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScrollableLegendView.type;\n    _this.newlineDisabled = true;\n    _this._currentIndex = 0;\n    return _this;\n  }\n\n  ScrollableLegendView.prototype.init = function () {\n    _super.prototype.init.call(this);\n\n    this.group.add(this._containerGroup = new Group());\n\n    this._containerGroup.add(this.getContentGroup());\n\n    this.group.add(this._controllerGroup = new Group());\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.resetInner = function () {\n    _super.prototype.resetInner.call(this);\n\n    this._controllerGroup.removeAll();\n\n    this._containerGroup.removeClipPath();\n\n    this._containerGroup.__rectSize = null;\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var self = this; // Render content items.\n\n    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n\n    var controllerGroup = this._controllerGroup; // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n\n    var pageIconSize = legendModel.get('pageIconSize', true);\n    var pageIconSizeArr = zrUtil.isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        // Placeholder to calculate a proper layout.\n        text: 'xx/xx',\n        fill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        verticalAlign: 'middle',\n        align: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSizeArr[0] / 2,\n        y: -pageIconSizeArr[1] / 2,\n        width: pageIconSizeArr[0],\n        height: pageIconSizeArr[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      selectorGroup.markRedraw();\n    }\n\n    return mainRect;\n  };\n\n  ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup; // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box( // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh]; // In case that the inner elements of contentGroup layout do not based on [0, 0]\n\n    var contentPos = [-contentRect.x, -contentRect.y]; // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup[xy];\n    } // Layout container group based on 0.\n\n\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true)); // Place containerGroup and controllerGroup and contentGroup.\n\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true); // controller is on the right / bottom.\n\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      } // controller is on the left / top.\n      else {\n          containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n        }\n    } // Always align controller to content as 'middle'.\n\n\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.setPosition(contentPos);\n    containerGroup.setPosition(containerPos);\n    controllerGroup.setPosition(controllerPos); // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n\n    var mainRect = {\n      x: 0,\n      y: 0\n    }; // Consider content may be overflow (should be clipped).\n\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]); // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      })); // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    } // Content translate animation.\n\n\n    var pageInfo = this._getPageInfo(legendModel);\n\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      x: pageInfo.contentPosition[0],\n      y: pageInfo.contentPosition[1]\n    }, // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : null);\n\n    this._updatePageInfoView(legendModel, pageInfo);\n\n    return mainRect;\n  };\n\n  ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  };\n\n  ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var key = name + 'DataIndex';\n      var canJump = pageInfo[key] != null;\n      var icon = controllerGroup.childOfName(name);\n\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n      current: current,\n      total: total\n    }));\n  };\n  /**\n   *  contentPosition: Array.<number>, null when data item not found.\n   *  pageIndex: number, null when data item not found.\n   *  pageCount: number, always be a number, can be 0.\n   *  pagePrevDataIndex: number, null when no previous page.\n   *  pageNextDataIndex: number, null when no next page.\n   * }\n   */\n\n\n  ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: [contentGroup.x, contentGroup.y],\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n\n    if (!targetItem) {\n      return result;\n    }\n\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s; // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize || // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n\n          ++result.pageCount;\n        }\n      }\n\n      winEndItemInfo = currItemInfo;\n    }\n\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)) && // e.g., when page size is smaller than item size.\n      winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n\n      winStartItemInfo = currItemInfo;\n    }\n\n    return result;\n\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el[xy];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  };\n\n  ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex; // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defaultIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  };\n\n  ScrollableLegendView.type = 'legend.scroll';\n  return ScrollableLegendView;\n}(LegendView);\n\nexport default ScrollableLegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function installScrollableLegendAction(registers) {\n  /**\n   * @event legendScroll\n   * @type {Object}\n   * @property {string} type 'legendScroll'\n   * @property {string} scrollDataIndex\n   */\n  registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n    var scrollDataIndex = payload.scrollDataIndex;\n    scrollDataIndex != null && ecModel.eachComponent({\n      mainType: 'legend',\n      subType: 'scroll',\n      query: payload\n    }, function (legendModel) {\n      legendModel.setScrollDataIndex(scrollDataIndex);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installLegendPlain } from './installLegendPlain';\nimport ScrollableLegendModel from './ScrollableLegendModel';\nimport ScrollableLegendView from './ScrollableLegendView';\nimport installScrollableLegendAction from './scrollableLegendAction';\nexport function install(registers) {\n  use(installLegendPlain);\n  registers.registerComponentModel(ScrollableLegendModel);\n  registers.registerComponentView(ScrollableLegendView);\n  installScrollableLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installLegendPlain } from './installLegendPlain';\nimport { install as installLegendScroll } from './installLegendScroll';\nexport function install(registers) {\n  use(installLegendPlain);\n  use(installLegendScroll);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar InsideZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(InsideZoomModel, _super);\n\n  function InsideZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = InsideZoomModel.type;\n    return _this;\n  }\n\n  InsideZoomModel.type = 'dataZoom.inside';\n  InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    disabled: false,\n    zoomLock: false,\n    zoomOnMouseWheel: true,\n    moveOnMouseMove: true,\n    moveOnMouseWheel: false,\n    preventDefaultMouseMove: true\n  });\n  return InsideZoomModel;\n}(DataZoomModel);\n\nexport default InsideZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful';\nimport * as eventTool from 'zrender/lib/core/event';\nimport * as interactionMutex from './interactionMutex';\nimport { isString, bind, defaults, clone } from 'zrender/lib/core/util';\n\nvar RoamController =\n/** @class */\nfunction (_super) {\n  __extends(RoamController, _super);\n\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n\n    _this._zr = zr; // Avoid two roamController bind the same handler\n\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice: only enable needed types. For example, if 'zoom'\n     * is not needed, 'zoom' should not be enabled, otherwise\n     * default mousewheel behaviour (scroll page) will be disabled.\n     */\n\n    _this.enable = function (controlType, opt) {\n      // Disable previous first\n      this.disable();\n      this._opt = defaults(clone(opt) || {}, {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true\n      });\n\n      if (controlType == null) {\n        controlType = true;\n      }\n\n      if (controlType === true || controlType === 'move' || controlType === 'pan') {\n        zr.on('mousedown', mousedownHandler);\n        zr.on('mousemove', mousemoveHandler);\n        zr.on('mouseup', mouseupHandler);\n      }\n\n      if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n        zr.on('mousewheel', mousewheelHandler);\n        zr.on('pinch', pinchHandler);\n      }\n    };\n\n    _this.disable = function () {\n      zr.off('mousedown', mousedownHandler);\n      zr.off('mousemove', mousemoveHandler);\n      zr.off('mouseup', mouseupHandler);\n      zr.off('mousewheel', mousewheelHandler);\n      zr.off('pinch', pinchHandler);\n    };\n\n    return _this;\n  }\n\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n\n  RoamController.prototype.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n      return;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY; // Only check on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n\n    if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n\n  RoamController.prototype._mousemoveHandler = function (e) {\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n    }\n  };\n\n  RoamController.prototype._mousewheelHandler = function (e) {\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    } // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n\n\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    checkPointerAndTrigger(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n\n  return RoamController;\n}(Eventful);\n\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\n\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  controller.trigger(eventName, contollerEvent);\n} // settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\n\nexport default RoamController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Only create one roam controller for each coordinate system.\n// one roam controller might be refered by two inside data zoom\n// components (for example, one for x and one for y). When user\n// pan or zoom, only dispatch one action for those data zoom\n// components.\nimport RoamController from '../../component/helper/RoamController';\nimport * as throttleUtil from '../../util/throttle';\nimport { makeInner } from '../../util/model';\nimport { each, curry, createHashMap } from 'zrender/lib/core/util';\nimport { collectReferCoordSysModelInfo } from './helper';\nvar inner = makeInner();\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\n\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\n\nfunction createCoordSysRecord(api, coordSysModel) {\n  // These init props will never change after record created.\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  }; // Must not do anything depends on coordSysRecord outside the event handler here,\n  // because coordSysRecord not completed yet.\n\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n        // moveOnMouseWheel, ...) enabled.\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n/**\n * This action will be throttled.\n */\n\n\nfunction dispatchAction(api, batch) {\n  api.dispatchAction({\n    type: 'dataZoom',\n    animation: {\n      easing: 'cubicOut',\n      duration: 100\n    },\n    batch: batch\n  });\n}\n\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n/**\n * Merge roamController settings when multiple dataZooms share one roamController.\n */\n\n\nfunction mergeControllerParams(dataZoomInfoMap) {\n  var controlType; // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n  // as string, it is probably revert to reserved word by compress tool. See #7411.\n\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    } // Prevent default move event by default. If one false, do not prevent. Otherwise\n    // users may be confused why it does not work when multiple insideZooms exist.\n\n\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      // RoamController will enable all of these functionalities,\n      // and the final behavior is determined by its event listener\n      // provided by each inside zoom.\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove\n    }\n  };\n}\n\nexport function installDataZoomRoamProcessor(registers) {\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n    var apiInner = inner(api);\n    var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n    coordSysRecordMap.each(function (coordSysRecord) {\n      // `coordSysRecordMap` always exists (becuase it hold the `roam controller`, which should\n      // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n      coordSysRecord.dataZoomInfoMap = null;\n    });\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'inside'\n    }, function (dataZoomModel) {\n      var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n      each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n        var coordSysUid = dzCoordSysInfo.model.uid;\n        var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap()); // Notice these props might be changed each time for a single dataZoomModel.\n\n        dataZoomInfoMap.set(dataZoomModel.uid, {\n          dzReferCoordSysInfo: dzCoordSysInfo,\n          model: dataZoomModel,\n          getRange: null\n        });\n      });\n    }); // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n    // (2) Clear coord sys if not refered by any dataZoom.\n\n    coordSysRecordMap.each(function (coordSysRecord) {\n      var controller = coordSysRecord.controller;\n      var firstDzInfo;\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n      if (dataZoomInfoMap) {\n        var firstDzKey = dataZoomInfoMap.keys()[0];\n\n        if (firstDzKey != null) {\n          firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n        }\n      }\n\n      if (!firstDzInfo) {\n        disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        return;\n      }\n\n      var controllerParams = mergeControllerParams(dataZoomInfoMap);\n      controller.enable(controllerParams.controlType, controllerParams.opt);\n      controller.setPointerChecker(coordSysRecord.containsPoint);\n      throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\nimport sliderMove from '../helper/sliderMove';\nimport * as roams from './roams';\nimport { bind } from 'zrender/lib/core/util';\n\nvar InsideZoomView =\n/** @class */\nfunction (_super) {\n  __extends(InsideZoomView, _super);\n\n  function InsideZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'dataZoom.inside';\n    return _this;\n  }\n\n  InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n    _super.prototype.render.apply(this, arguments);\n\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n\n      return;\n    } // Hence the `throttle` util ensures to preserve command order,\n    // here simply updating range all the time will not cause missing\n    // any of the the roam change.\n\n\n    this.range = dataZoomModel.getPercentRange(); // Reset controllers.\n\n    roams.setViewInfoToCoordSysRecord(api, dataZoomModel, {\n      pan: bind(getRangeHandlers.pan, this),\n      zoom: bind(getRangeHandlers.zoom, this),\n      scrollMove: bind(getRangeHandlers.scrollMove, this)\n    });\n  };\n\n  InsideZoomView.prototype.dispose = function () {\n    this._clear();\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  InsideZoomView.prototype._clear = function () {\n    roams.disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n    this.range = null;\n  };\n\n  InsideZoomView.type = 'dataZoom.inside';\n  return InsideZoomView;\n}(DataZoomView);\n\nvar getRangeHandlers = {\n  zoom: function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice(); // Calculate transform by the first axis.\n\n    var axisModel = coordSysInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n    var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n    var scale = Math.max(1 / e.scale, 0);\n    range[0] = (range[0] - percentPoint) * scale + percentPoint;\n    range[1] = (range[1] - percentPoint) * scale + percentPoint; // Restrict range.\n\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n    this.range = range;\n\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  },\n  pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n  }),\n  scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n  })\n};\n\nfunction makeMover(getPercentDelta) {\n  return function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice(); // Calculate transform by the first axis.\n\n    var axisModel = coordSysInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n    sliderMove(percentDelta, range, [0, 100], 'all');\n    this.range = range;\n\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  };\n}\n\nvar getDirectionInfo = {\n  grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.dim === 'x') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // axis.dim === 'y'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var polar = coordSysInfo.model.coordinateSystem;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var angleExtent = polar.getAngleAxis().getExtent();\n    oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n    newPoint = polar.pointToCoord(newPoint);\n\n    if (axisModel.mainType === 'radiusAxis') {\n      ret.pixel = newPoint[0] - oldPoint[0]; // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n      // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n\n      ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n      ret.pixelStart = radiusExtent[0];\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'angleAxis'\n      ret.pixel = newPoint[1] - oldPoint[1]; // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n      // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n\n      ret.pixelLength = angleExtent[1] - angleExtent[0];\n      ret.pixelStart = angleExtent[0];\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    var ret = {};\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.orient === 'horizontal') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'vertical'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  }\n};\nexport default InsideZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport InsideZoomModel from './InsideZoomModel';\nimport InsideZoomView from './InsideZoomView';\nimport { installDataZoomRoamProcessor } from './roams';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  installCommon(registers);\n  registers.registerComponentModel(InsideZoomModel);\n  registers.registerComponentView(InsideZoomView);\n  installDataZoomRoamProcessor(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar SliderZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SliderZoomModel, _super);\n\n  function SliderZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderZoomModel.type;\n    return _this;\n  }\n\n  SliderZoomModel.type = 'dataZoom.slider';\n  SliderZoomModel.layoutMode = 'box';\n  SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    show: true,\n    // deault value can only be drived in view stage.\n    right: 'ph',\n    top: 'ph',\n    width: 'ph',\n    height: 'ph',\n    left: null,\n    bottom: null,\n    borderColor: '#d2dbee',\n    borderRadius: 3,\n    backgroundColor: 'rgba(47,69,84,0)',\n    // dataBackgroundColor: '#ddd',\n    dataBackground: {\n      lineStyle: {\n        color: '#d2dbee',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#d2dbee',\n        opacity: 0.2\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#8fb0f7',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#8fb0f7',\n        opacity: 0.2\n      }\n    },\n    // Color of selected window.\n    fillerColor: 'rgba(135,175,274,0.2)',\n    handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n    // Percent of the slider height\n    handleSize: '100%',\n    handleStyle: {\n      color: '#fff',\n      borderColor: '#ACB8D1'\n    },\n    moveHandleSize: 7,\n    moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n    moveHandleStyle: {\n      color: '#D2DBEE',\n      opacity: 0.7\n    },\n    showDetail: true,\n    showDataShadow: 'auto',\n    realtime: true,\n    zoomLock: false,\n    textStyle: {\n      color: '#6E7079'\n    },\n    brushSelect: true,\n    brushStyle: {\n      color: 'rgba(135,175,274,0.15)'\n    },\n    emphasis: {\n      handleStyle: {\n        borderColor: '#8FB0F7'\n      },\n      moveHandleStyle: {\n        color: '#8FB0F7'\n      }\n    }\n  });\n  return SliderZoomModel;\n}(DataZoomModel);\n\nexport default SliderZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, isFunction, isString, indexOf } from 'zrender/lib/core/util';\nimport * as eventTool from 'zrender/lib/core/event';\nimport * as graphic from '../../util/graphic';\nimport * as throttle from '../../util/throttle';\nimport DataZoomView from './DataZoomView';\nimport { linearMap, asc, parsePercent } from '../../util/number';\nimport * as layout from '../../util/layout';\nimport sliderMove from '../helper/sliderMove';\nimport { getAxisMainType, collectReferCoordSysModelInfo } from './helper';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createSymbol, symbolBuildProxies } from '../../util/symbol';\nimport { deprecateLog } from '../../util/log';\nimport { createTextStyle } from '../../label/labelStyle';\nvar Rect = graphic.Rect; // Constants\n\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar DEFAULT_MOVE_HANDLE_SIZE = 7;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar REALTIME_ANIMATION_CONFIG = {\n  easing: 'cubicOut',\n  duration: 100\n};\n\nvar SliderZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SliderZoomView, _super);\n\n  function SliderZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderZoomView.type;\n    _this._displayables = {};\n    return _this;\n  }\n\n  SliderZoomView.prototype.init = function (ecModel, api) {\n    this.api = api; // A unique handler for each dataZoom component\n\n    this._onBrush = bind(this._onBrush, this);\n    this._onBrushEnd = bind(this._onBrushEnd, this);\n  };\n\n  SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    _super.prototype.render.apply(this, arguments);\n\n    throttle.createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.getOrient();\n\n    if (dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n\n      this.group.removeAll();\n      return;\n    } // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n\n\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n\n    this._updateView();\n  };\n\n  SliderZoomView.prototype.dispose = function () {\n    this._clear();\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  SliderZoomView.prototype._clear = function () {\n    throttle.clear(this, '_dispatchZoomAction');\n    var zr = this.api.getZr();\n    zr.off('mousemove', this._onBrush);\n    zr.off('mouseup', this._onBrushEnd);\n  };\n\n  SliderZoomView.prototype._buildView = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    this._brushing = false;\n    this._displayables.brushRect = null;\n\n    this._resetLocation();\n\n    this._resetInterval();\n\n    var barGroup = this._displayables.sliderGroup = new graphic.Group();\n\n    this._renderBackground();\n\n    this._renderHandle();\n\n    this._renderDataShadow();\n\n    thisGroup.add(barGroup);\n\n    this._positionGroup();\n  };\n\n  SliderZoomView.prototype._resetLocation = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var showMoveHandle = dataZoomModel.get('brushSelect');\n    var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0; // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n\n    var coordRect = this._findCoordRect();\n\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }; // Default align by coordinate system rect.\n\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    }; // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option); // Replace the placeholder value.\n\n    each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  };\n\n  SliderZoomView.prototype._positionGroup = function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient; // Just use the first axis to determine mapping.\n\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var sliderGroup = this._displayables.sliderGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse; // Transform barGroup.\n\n    sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: 1\n    } : orient === HORIZONTAL && inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: -1\n    } : orient === VERTICAL && !inverse ? {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: 1,\n      rotation: Math.PI / 2\n    } // Dont use Math.PI, considering shadow direction.\n    : {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: -1,\n      rotation: Math.PI / 2\n    }); // Position barGroup\n\n    var rect = thisGroup.getBoundingRect([sliderGroup]);\n    thisGroup.x = location.x - rect.x;\n    thisGroup.y = location.y - rect.y;\n    thisGroup.markRedraw();\n  };\n\n  SliderZoomView.prototype._getViewExtent = function () {\n    return [0, this._size[0]];\n  };\n\n  SliderZoomView.prototype._renderBackground = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.sliderGroup;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    })); // Click panel, over shadow, below handles.\n\n    var clickPanel = new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: bind(this._onClickPanel, this)\n    });\n    var zr = this.api.getZr();\n\n    if (brushSelect) {\n      clickPanel.on('mousedown', this._onBrushStart, this);\n      clickPanel.cursor = 'crosshair';\n      zr.on('mousemove', this._onBrush);\n      zr.on('mouseup', this._onBrushEnd);\n    } else {\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    }\n\n    barGroup.add(clickPanel);\n  };\n\n  SliderZoomView.prototype._renderDataShadow = function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n\n    this._displayables.dataShadowSegs = [];\n\n    if (!info) {\n      return;\n    }\n\n    var size = this._size;\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var otherDim = seriesModel.getShadowDim ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n\n    if (otherDim == null) {\n      return;\n    }\n\n    var otherDataExtent = data.getDataExtent(otherDim); // Nice extent.\n\n    var otherOffset = (otherDataExtent[1] - otherDataExtent[0]) * 0.3;\n    otherDataExtent = [otherDataExtent[0] - otherOffset, otherDataExtent[1] + otherOffset];\n    var otherShadowExtent = [0, size[1]];\n    var thisShadowExtent = [0, size[0]];\n    var areaPoints = [[size[0], 0], [0, 0]];\n    var linePoints = [];\n    var step = thisShadowExtent[1] / (data.count() - 1);\n    var thisCoord = 0; // Optimize for large data shadow\n\n    var stride = Math.round(data.count() / size[0]);\n    var lastIsEmpty;\n    data.each([otherDim], function (value, index) {\n      if (stride > 0 && index % stride) {\n        thisCoord += step;\n        return;\n      } // FIXME\n      // Should consider axis.min/axis.max when drawing dataShadow.\n      // FIXME\n      // 应该使用统一的空判断？还是在list里进行空判断？\n\n\n      var isEmpty = value == null || isNaN(value) || value === ''; // See #4235.\n\n      var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent, otherShadowExtent, true); // Attempt to draw data shadow precisely when there are empty value.\n\n      if (isEmpty && !lastIsEmpty && index) {\n        areaPoints.push([areaPoints[areaPoints.length - 1][0], 0]);\n        linePoints.push([linePoints[linePoints.length - 1][0], 0]);\n      } else if (!isEmpty && lastIsEmpty) {\n        areaPoints.push([thisCoord, 0]);\n        linePoints.push([thisCoord, 0]);\n      }\n\n      areaPoints.push([thisCoord, otherCoord]);\n      linePoints.push([thisCoord, otherCoord]);\n      thisCoord += step;\n      lastIsEmpty = isEmpty;\n    });\n    var dataZoomModel = this.dataZoomModel;\n\n    function createDataShadowGroup(isSelectedArea) {\n      var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n      var group = new graphic.Group();\n      var polygon = new graphic.Polygon({\n        shape: {\n          points: areaPoints\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('areaStyle').getAreaStyle(),\n        silent: true,\n        z2: -20\n      });\n      var polyline = new graphic.Polyline({\n        shape: {\n          points: linePoints\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('lineStyle').getLineStyle(),\n        silent: true,\n        z2: -19\n      });\n      group.add(polygon);\n      group.add(polyline);\n      return group;\n    } // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n\n\n    for (var i = 0; i < 3; i++) {\n      var group = createDataShadowGroup(i === 1);\n\n      this._displayables.sliderGroup.add(group);\n\n      this._displayables.dataShadowSegs.push(group);\n    }\n  };\n\n  SliderZoomView.prototype._prepareDataShadowInfo = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n\n    if (showDataShadow === false) {\n      return;\n    } // Find a representative series.\n\n\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n      each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n\n        if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n\n        var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n        var otherDim = getOtherDim(axisDim);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: axisDim,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  };\n\n  SliderZoomView.prototype._renderHandle = function () {\n    var thisGroup = this.group;\n    var displayables = this._displayables;\n    var handles = displayables.handles = [null, null];\n    var handleLabels = displayables.handleLabels = [null, null];\n    var sliderGroup = this._displayables.sliderGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var borderRadius = dataZoomModel.get('borderRadius') || 0;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    var filler = displayables.filler = new Rect({\n      silent: brushSelect,\n      style: {\n        fill: dataZoomModel.get('fillerColor')\n      },\n      textConfig: {\n        position: 'inside'\n      }\n    });\n    sliderGroup.add(filler); // Frame border.\n\n    sliderGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1],\n        r: borderRadius\n      },\n      style: {\n        stroke: dataZoomModel.get('dataBackgroundColor') // deprecated option\n        || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    })); // Left and right handle to resize\n\n    each([0, 1], function (handleIndex) {\n      var iconStr = dataZoomModel.get('handleIcon');\n\n      if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n        // Compatitable with the old icon parsers. Which can use a path string without path://\n        iconStr = 'path://' + iconStr;\n\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n        }\n      }\n\n      var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n      path.attr({\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false),\n        z2: 5\n      });\n      var bRect = path.getBoundingRect();\n      var handleSize = dataZoomModel.get('handleSize');\n      this._handleHeight = parsePercent(handleSize, this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      path.style.strokeNoScale = true;\n      path.rectHover = true;\n      path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n      enableHoverEmphasis(path);\n      var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n      // Compatitable with previous version\n\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n\n      sliderGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.getModel('textStyle');\n      thisGroup.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: true,\n        style: createTextStyle(textStyleModel, {\n          x: 0,\n          y: 0,\n          text: '',\n          verticalAlign: 'middle',\n          align: 'center',\n          fill: textStyleModel.getTextColor(),\n          font: textStyleModel.getFont()\n        }),\n        z2: 10\n      }));\n    }, this); // Handle to move. Only visible when brushSelect is set true.\n\n    var actualMoveZone = filler;\n\n    if (brushSelect) {\n      var moveHandleHeight = parsePercent(dataZoomModel.get('moveHandleSize'), size[1]);\n      var moveHandle_1 = displayables.moveHandle = new graphic.Rect({\n        style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n        silent: true,\n        shape: {\n          r: [0, 0, 2, 2],\n          y: size[1] - 0.5,\n          height: moveHandleHeight\n        }\n      });\n      var iconSize = moveHandleHeight * 0.8;\n      var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\n      moveHandleIcon.silent = true;\n      moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n      moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n      var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n      actualMoveZone = displayables.moveZone = new graphic.Rect({\n        invisible: true,\n        shape: {\n          y: size[1] - moveZoneExpandSize,\n          height: moveHandleHeight + moveZoneExpandSize\n        }\n      });\n      actualMoveZone.on('mouseover', function () {\n        api.enterEmphasis(moveHandle_1);\n      }).on('mouseout', function () {\n        api.leaveEmphasis(moveHandle_1);\n      });\n      sliderGroup.add(moveHandle_1);\n      sliderGroup.add(moveHandleIcon);\n      sliderGroup.add(actualMoveZone);\n    }\n\n    actualMoveZone.attr({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false)\n    });\n  };\n\n  SliderZoomView.prototype._resetInterval = function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n\n    var viewExtent = this._getViewExtent();\n\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  };\n\n  SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n\n    var viewExtend = this._getViewExtent();\n\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  };\n\n  SliderZoomView.prototype._updateView = function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scaleX: handleHeight / 2,\n        scaleY: handleHeight / 2,\n        // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n        // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n        x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n        y: size[1] / 2 - handleHeight / 2\n      });\n    }, this); // Filler\n\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n    var viewExtent = {\n      x: handleInterval[0],\n      width: handleInterval[1] - handleInterval[0]\n    }; // Move handle\n\n    if (displaybles.moveHandle) {\n      displaybles.moveHandle.setShape(viewExtent);\n      displaybles.moveZone.setShape(viewExtent); // Force update path on the invisible object\n\n      displaybles.moveZone.getBoundingRect();\n      displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n    } // update clip path of shadow.\n\n\n    var dataShadowSegs = displaybles.dataShadowSegs;\n    var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n\n    for (var i = 0; i < dataShadowSegs.length; i++) {\n      var segGroup = dataShadowSegs[i];\n      var clipPath = segGroup.getClipPath();\n\n      if (!clipPath) {\n        clipPath = new graphic.Rect();\n        segGroup.setClipPath(clipPath);\n      }\n\n      clipPath.setShape({\n        x: segIntervals[i],\n        y: 0,\n        width: segIntervals[i + 1] - segIntervals[i],\n        height: size[1]\n      });\n    }\n\n    this._updateDataInfo(nonRealtime);\n  };\n\n  SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', '']; // FIXME\n    // date型，支持formatter，autoformatter（ec2 date.getAutoFormatter）\n\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        align: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  };\n\n  SliderZoomView.prototype._formatLabel = function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n\n    var valueStr = value == null || isNaN(value) ? '' // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n      value: Math.round(value)\n    }) // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  };\n  /**\n   * @param showOrHide true: show, false: hide\n   */\n\n\n  SliderZoomView.prototype._showDataInfo = function (showOrHide) {\n    // Always show when drgging.\n    showOrHide = this._dragging || showOrHide;\n    var displayables = this._displayables;\n    var handleLabels = displayables.handleLabels;\n    handleLabels[0].attr('invisible', !showOrHide);\n    handleLabels[1].attr('invisible', !showOrHide); // Highlight move handle\n\n    displayables.moveHandle && this.api[showOrHide ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n  };\n\n  SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n    this._dragging = true; // For mobile device, prevent screen slider on the button.\n\n    eventTool.stop(event.event); // Transform dx, dy to bar coordination.\n\n    var barTransform = this._displayables.sliderGroup.getLocalTransform();\n\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n\n    var realtime = this.dataZoomModel.get('realtime');\n\n    this._updateView(!realtime); // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n\n\n    changed && realtime && this._dispatchZoomAction(true);\n  };\n\n  SliderZoomView.prototype._onDragEnd = function () {\n    this._dragging = false;\n\n    this._showDataInfo(false); // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n\n\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onClickPanel = function (e) {\n    var size = this._size;\n\n    var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n\n    var changed = this._updateInterval('all', localPoint[0] - center);\n\n    this._updateView();\n\n    changed && this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onBrushStart = function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    this._brushStart = new graphic.Point(x, y);\n    this._brushing = true;\n    this._brushStartTime = +new Date(); // this._updateBrushRect(x, y);\n  };\n\n  SliderZoomView.prototype._onBrushEnd = function (e) {\n    if (!this._brushing) {\n      return;\n    }\n\n    var brushRect = this._displayables.brushRect;\n    this._brushing = false;\n\n    if (!brushRect) {\n      return;\n    }\n\n    brushRect.attr('ignore', true);\n    var brushShape = brushRect.shape;\n    var brushEndTime = +new Date(); // console.log(brushEndTime - this._brushStartTime);\n\n    if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n      // Will treat it as a click\n      return;\n    }\n\n    var viewExtend = this._getViewExtent();\n\n    var percentExtent = [0, 100];\n    this._range = asc([linearMap(brushShape.x, viewExtend, percentExtent, true), linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)]);\n    this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n\n    this._updateView();\n\n    this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onBrush = function (e) {\n    if (this._brushing) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n\n      this._updateBrushRect(e.offsetX, e.offsetY);\n    }\n  };\n\n  SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n    var displayables = this._displayables;\n    var dataZoomModel = this.dataZoomModel;\n    var brushRect = displayables.brushRect;\n\n    if (!brushRect) {\n      brushRect = displayables.brushRect = new Rect({\n        silent: true,\n        style: dataZoomModel.getModel('brushStyle').getItemStyle()\n      });\n      displayables.sliderGroup.add(brushRect);\n    }\n\n    brushRect.attr('ignore', false);\n    var brushStart = this._brushStart;\n    var sliderGroup = this._displayables.sliderGroup;\n    var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n    var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n    var size = this._size;\n    endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n    brushRect.setShape({\n      x: startPoint[0],\n      y: 0,\n      width: endPoint[0] - startPoint[0],\n      height: size[1]\n    });\n  };\n  /**\n   * This action will be throttled.\n   */\n\n\n  SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n      start: range[0],\n      end: range[1]\n    });\n  };\n\n  SliderZoomView.prototype._findCoordRect = function () {\n    // Find the grid coresponding to the first axis referred by dataZoom.\n    var rect;\n    var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n\n    if (!rect && coordSysInfoList.length) {\n      var coordSys = coordSysInfoList[0].model.coordinateSystem;\n      rect = coordSys.getRect && coordSys.getRect();\n    }\n\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n\n    return rect;\n  };\n\n  SliderZoomView.type = 'dataZoom.slider';\n  return SliderZoomView;\n}(DataZoomView);\n\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // 这个逻辑和getOtherAxis里一致，但是写在这里是否不好\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nexport default SliderZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SliderZoomModel from './SliderZoomModel';\nimport SliderZoomView from './SliderZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SliderZoomModel);\n  registers.registerComponentView(SliderZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomInside } from './installDataZoomInside';\nimport { install as installDataZoomSlider } from './installDataZoomSlider';\nexport function install(registers) {\n  use(installDataZoomInside);\n  use(installDataZoomSlider); // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util';\nexport default function checkMarkerInSeries(seriesOpts, markerType) {\n  if (!seriesOpts) {\n    return false;\n  }\n\n  var seriesOptArr = isArray(seriesOpts) ? seriesOpts : [seriesOpts];\n\n  for (var idx = 0; idx < seriesOptArr.length; idx++) {\n    if (seriesOptArr[idx] && seriesOptArr[idx][markerType]) {\n      return true;\n    }\n  }\n\n  return false;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport env from 'zrender/lib/core/env';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat';\nimport ComponentModel from '../../model/Component';\nimport { makeInner, defaultEmphasis } from '../../util/model';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup';\n\nfunction fillLabel(opt) {\n  defaultEmphasis(opt, 'label', ['show']);\n} // { [componentType]: MarkerModel }\n\n\nvar inner = makeInner();\n\nvar MarkerModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkerModel, _super);\n\n  function MarkerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerModel.type;\n    /**\n     * If marker model is created by self from series\n     */\n\n    _this.createdBySelf = false;\n    return _this;\n  }\n  /**\n   * @overrite\n   */\n\n\n  MarkerModel.prototype.init = function (option, parentModel, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.type === 'marker') {\n        throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.');\n      }\n    }\n\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._mergeOption(option, ecModel, false, true);\n  };\n\n  MarkerModel.prototype.isAnimationEnabled = function () {\n    if (env.node) {\n      return false;\n    }\n\n    var hostSeries = this.__hostSeries;\n    return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\n  };\n  /**\n   * @overrite\n   */\n\n\n  MarkerModel.prototype.mergeOption = function (newOpt, ecModel) {\n    this._mergeOption(newOpt, ecModel, false, false);\n  };\n\n  MarkerModel.prototype._mergeOption = function (newOpt, ecModel, createdBySelf, isInit) {\n    var componentType = this.mainType;\n\n    if (!createdBySelf) {\n      ecModel.eachSeries(function (seriesModel) {\n        // mainType can be markPoint, markLine, markArea\n        var markerOpt = seriesModel.get(this.mainType, true);\n        var markerModel = inner(seriesModel)[componentType];\n\n        if (!markerOpt || !markerOpt.data) {\n          inner(seriesModel)[componentType] = null;\n          return;\n        }\n\n        if (!markerModel) {\n          if (isInit) {\n            // Default label emphasis `position` and `show`\n            fillLabel(markerOpt);\n          }\n\n          zrUtil.each(markerOpt.data, function (item) {\n            // FIXME Overwrite fillLabel method ?\n            if (item instanceof Array) {\n              fillLabel(item[0]);\n              fillLabel(item[1]);\n            } else {\n              fillLabel(item);\n            }\n          });\n          markerModel = this.createMarkerModelFromSeries(markerOpt, this, ecModel); // markerModel = new ImplementedMarkerModel(\n          //     markerOpt, this, ecModel\n          // );\n\n          zrUtil.extend(markerModel, {\n            mainType: this.mainType,\n            // Use the same series index and name\n            seriesIndex: seriesModel.seriesIndex,\n            name: seriesModel.name,\n            createdBySelf: true\n          });\n          markerModel.__hostSeries = seriesModel;\n        } else {\n          markerModel._mergeOption(markerOpt, ecModel, true);\n        }\n\n        inner(seriesModel)[componentType] = markerModel;\n      }, this);\n    }\n  };\n\n  MarkerModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var itemName = data.getName(dataIndex);\n    return createTooltipMarkup('section', {\n      header: this.name,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: itemName,\n        value: value,\n        noName: !itemName,\n        noValue: value == null\n      })]\n    });\n  };\n\n  MarkerModel.prototype.getData = function () {\n    return this._data;\n  };\n\n  MarkerModel.prototype.setData = function (data) {\n    this._data = data;\n  };\n\n  MarkerModel.getMarkerModelFromSeries = function (seriesModel, // Support three types of markers. Strict check.\n  componentType) {\n    return inner(seriesModel)[componentType];\n  };\n\n  MarkerModel.type = 'marker';\n  MarkerModel.dependencies = ['series', 'grid', 'polar', 'geo'];\n  return MarkerModel;\n}(ComponentModel);\n\nzrUtil.mixin(MarkerModel, DataFormatMixin.prototype);\nexport default MarkerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel';\n\nvar MarkAreaModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkAreaModel, _super);\n\n  function MarkAreaModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkAreaModel.type;\n    return _this;\n  }\n\n  MarkAreaModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkAreaModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkAreaModel.type = 'markArea';\n  MarkAreaModel.defaultOption = {\n    zlevel: 0,\n    // PENDING\n    z: 1,\n    tooltip: {\n      trigger: 'item'\n    },\n    // markArea should fixed on the coordinate system\n    animation: false,\n    label: {\n      show: true,\n      position: 'top'\n    },\n    itemStyle: {\n      // color and borderColor default to use color from series\n      // color: 'auto'\n      // borderColor: 'auto'\n      borderWidth: 0\n    },\n    emphasis: {\n      label: {\n        show: true,\n        position: 'top'\n      }\n    }\n  };\n  return MarkAreaModel;\n}(MarkerModel);\n\nexport default MarkAreaModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, createHashMap, assert } from 'zrender/lib/core/util';\nimport { VISUAL_DIMENSIONS } from '../../util/types';\nexport function summarizeDimensions(data) {\n  var summary = {};\n  var encode = summary.encode = {};\n  var notExtraCoordDimMap = createHashMap();\n  var defaultedLabel = [];\n  var defaultedTooltip = []; // See the comment of `List.js#userOutput`.\n\n  var userOutput = summary.userOutput = {\n    dimensionNames: data.dimensions.slice(),\n    encode: {}\n  };\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var coordDim = dimItem.coordDim;\n\n    if (coordDim) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(VISUAL_DIMENSIONS.get(coordDim) == null);\n      }\n\n      var coordDimIndex = dimItem.coordDimIndex;\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n\n      if (!dimItem.isExtraCoord) {\n        notExtraCoordDimMap.set(coordDim, 1); // Use the last coord dim (and label friendly) as default label,\n        // because when dataset is used, it is hard to guess which dimension\n        // can be value dimension. If both show x, y on label is not look good,\n        // and conventionally y axis is focused more.\n\n        if (mayLabelDimType(dimItem.type)) {\n          defaultedLabel[0] = dimName;\n        } // User output encode do not contain generated coords.\n        // And it only has index. User can use index to retrieve value from the raw item array.\n\n\n        getOrCreateEncodeArr(userOutput.encode, coordDim)[coordDimIndex] = dimItem.index;\n      }\n\n      if (dimItem.defaultTooltip) {\n        defaultedTooltip.push(dimName);\n      }\n    }\n\n    VISUAL_DIMENSIONS.each(function (v, otherDim) {\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n      var dimIndex = dimItem.otherDims[otherDim];\n\n      if (dimIndex != null && dimIndex !== false) {\n        encodeArr[dimIndex] = dimItem.name;\n      }\n    });\n  });\n  var dataDimsOnCoord = [];\n  var encodeFirstDimNotExtra = {};\n  notExtraCoordDimMap.each(function (v, coordDim) {\n    var dimArr = encode[coordDim];\n    encodeFirstDimNotExtra[coordDim] = dimArr[0]; // Not necessary to remove duplicate, because a data\n    // dim canot on more than one coordDim.\n\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n  });\n  summary.dataDimsOnCoord = dataDimsOnCoord;\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n  var encodeLabel = encode.label; // FIXME `encode.label` is not recommanded, because formatter can not be set\n  // in this way. Use label.formatter instead. May be remove this approach someday.\n\n  if (encodeLabel && encodeLabel.length) {\n    defaultedLabel = encodeLabel.slice();\n  }\n\n  var encodeTooltip = encode.tooltip;\n\n  if (encodeTooltip && encodeTooltip.length) {\n    defaultedTooltip = encodeTooltip.slice();\n  } else if (!defaultedTooltip.length) {\n    defaultedTooltip = defaultedLabel.slice();\n  }\n\n  encode.defaultedLabel = defaultedLabel;\n  encode.defaultedTooltip = defaultedTooltip;\n  return summary;\n}\n\nfunction getOrCreateEncodeArr(encode, dim) {\n  if (!encode.hasOwnProperty(dim)) {\n    encode[dim] = [];\n  }\n\n  return encode[dim];\n} // FIXME:TS should be type `AxisType`\n\n\nexport function getDimensionTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\n\nfunction mayLabelDimType(dimType) {\n  // In most cases, ordinal and time do not suitable for label.\n  // Ordinal info can be displayed on axis. Time is too long.\n  return !(dimType === 'ordinal' || dimType === 'time');\n} // function findTheLastDimMayLabel(data) {\n//     // Get last value dim\n//     let dimensions = data.dimensions.slice();\n//     let valueType;\n//     let valueDim;\n//     while (dimensions.length && (\n//         valueDim = dimensions.pop(),\n//         valueType = data.getDimensionInfo(valueDim).type,\n//         valueType === 'ordinal' || valueType === 'time'\n//     )) {} // jshint ignore:line\n//     return valueDim;\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\n\nvar DataDimensionInfo =\n/** @class */\nfunction () {\n  /**\n   * @param opt All of the fields will be shallow copied.\n   */\n  function DataDimensionInfo(opt) {\n    /**\n     * The format of `otherDims` is:\n     * ```js\n     * {\n     *     tooltip: number optional,\n     *     label: number optional,\n     *     itemName: number optional,\n     *     seriesName: number optional,\n     * }\n     * ```\n     *\n     * A `series.encode` can specified these fields:\n     * ```js\n     * encode: {\n     *     // \"3, 1, 5\" is the index of data dimension.\n     *     tooltip: [3, 1, 5],\n     *     label: [0, 3],\n     *     ...\n     * }\n     * ```\n     * `otherDims` is the parse result of the `series.encode` above, like:\n     * ```js\n     * // Suppose the index of this data dimension is `3`.\n     * this.otherDims = {\n     *     // `3` is at the index `0` of the `encode.tooltip`\n     *     tooltip: 0,\n     *     // `3` is at the index `1` of the `encode.tooltip`\n     *     label: 1\n     * };\n     * ```\n     *\n     * This prop should never be `null`/`undefined` after initialized.\n     */\n    this.otherDims = {};\n\n    if (opt != null) {\n      zrUtil.extend(this, opt);\n    }\n  }\n\n  return DataDimensionInfo;\n}();\n\n;\nexport default DataDimensionInfo;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float64Array, Int32Array, Uint32Array, Uint16Array */\n\n/**\n * List for data storage\n */\nimport * as zrUtil from 'zrender/lib/core/util';\nimport Model from '../model/Model';\nimport DataDiffer from './DataDiffer';\nimport { DefaultDataProvider } from './helper/dataProvider';\nimport { summarizeDimensions } from './helper/dimensionHelper';\nimport DataDimensionInfo from './DataDimensionInfo';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../util/types';\nimport { isDataItemOption, convertOptionIdName } from '../util/model';\nimport { getECData } from '../util/innerStore';\nimport { parseDataValue } from './helper/dataValueHelper';\nimport { isSourceInstance } from './Source';\nvar mathFloor = Math.floor;\nvar isObject = zrUtil.isObject;\nvar map = zrUtil.map;\nvar UNDEFINED = 'undefined';\nvar INDEX_NOT_FOUND = -1; // Use prefix to avoid index to be the same as otherIdList[idx],\n// which will cause weird udpate animation.\n\nvar ID_PREFIX = 'e\\0\\0';\nvar dataCtors = {\n  'float': typeof Float64Array === UNDEFINED ? Array : Float64Array,\n  'int': typeof Int32Array === UNDEFINED ? Array : Int32Array,\n  // Ordinal data type can be string or int\n  'ordinal': Array,\n  'number': Array,\n  'time': Array\n}; // Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\n// different from the Ctor of typed array.\n\nvar CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\nvar CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\nvar CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\nvar TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_rawData', '_dimValueGetter', '_count', '_rawCount', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'];\nvar CLONE_PROPERTIES = ['_extent', '_approximateExtent', '_rawExtent']; // -----------------------------\n// Internal method declarations:\n// -----------------------------\n\nvar defaultDimValueGetters;\nvar prepareInvertedIndex;\nvar getIndicesCtor;\nvar prepareStorage;\nvar getRawIndexWithoutIndices;\nvar getRawIndexWithIndices;\nvar getId;\nvar getIdNameFromStore;\nvar makeIdFromName;\nvar normalizeDimensions;\nvar validateDimensions;\nvar cloneListForMapAndSample;\nvar getInitialExtent;\nvar setItemDataAndSeriesIndex;\nvar transferProperties;\n\nvar List =\n/** @class */\nfunction () {\n  /**\n   * @param dimensions\n   *        For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\n   *        Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\n   */\n  function List(dimensions, hostModel) {\n    this.type = 'list';\n    this._count = 0;\n    this._rawCount = 0;\n    this._storage = {}; // We have an extra array store here. It's faster to be acessed than KV structured `_storage`.\n    // We profile the code `storage[dim]` and it seems to be KeyedLoadIC_Megamorphic instead of fast property access.\n    // Not sure why this happens. But using an extra array seems leads to faster `initData`\n    // See https://github.com/apache/incubator-echarts/pull/13314 for more explanation.\n\n    this._storageArr = [];\n    this._nameList = [];\n    this._idList = []; // Models of data option is stored sparse for optimizing memory cost\n    // Never used yet (not used yet).\n    // private _optionModels: Model[] = [];\n    // Global visual properties after visual coding\n\n    this._visual = {}; // Globel layout properties.\n\n    this._layout = {}; // Item visual properties after visual coding\n\n    this._itemVisuals = []; // Item layout properties after layout\n\n    this._itemLayouts = []; // Graphic elemnents\n\n    this._graphicEls = []; // Raw extent will not be cloned, but only transfered.\n    // It will not be calculated util needed.\n\n    this._rawExtent = {};\n    this._extent = {}; // key: dim, value: extent\n\n    this._approximateExtent = {};\n    this._calculationInfo = {}; // Having detected that there is data item is non primitive type\n    // (in type `OptionDataItemObject`).\n    // Like `data: [ { value: xx, itemStyle: {...} }, ...]`\n    // At present it only happen in `SOURCE_FORMAT_ORIGINAL`.\n\n    this.hasItemOption = true; // Methods that create a new list based on this list should be listed here.\n    // Notice that those method should `RETURN` the new list.\n\n    this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'lttbDownSample', 'map']; // Methods that change indices of this list should be listed here.\n\n    this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\n    this.DOWNSAMPLE_METHODS = ['downSample', 'lttbDownSample'];\n    /**\n     * Get raw data index.\n     * Do not initialize.\n     * Default `getRawIndex`. And it can be changed.\n     */\n\n    this.getRawIndex = getRawIndexWithoutIndices;\n    dimensions = dimensions || ['x', 'y'];\n    var dimensionInfos = {};\n    var dimensionNames = [];\n    var invertedIndicesMap = {};\n\n    for (var i = 0; i < dimensions.length; i++) {\n      // Use the original dimensions[i], where other flag props may exists.\n      var dimInfoInput = dimensions[i];\n      var dimensionInfo = zrUtil.isString(dimInfoInput) ? new DataDimensionInfo({\n        name: dimInfoInput\n      }) : !(dimInfoInput instanceof DataDimensionInfo) ? new DataDimensionInfo(dimInfoInput) : dimInfoInput;\n      var dimensionName = dimensionInfo.name;\n      dimensionInfo.type = dimensionInfo.type || 'float';\n\n      if (!dimensionInfo.coordDim) {\n        dimensionInfo.coordDim = dimensionName;\n        dimensionInfo.coordDimIndex = 0;\n      }\n\n      var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n      dimensionNames.push(dimensionName);\n      dimensionInfos[dimensionName] = dimensionInfo;\n      dimensionInfo.index = i;\n\n      if (dimensionInfo.createInvertedIndices) {\n        invertedIndicesMap[dimensionName] = [];\n      }\n\n      if (otherDims.itemName === 0) {\n        this._nameDimIdx = i;\n        this._nameOrdinalMeta = dimensionInfo.ordinalMeta;\n      }\n\n      if (otherDims.itemId === 0) {\n        this._idDimIdx = i;\n        this._idOrdinalMeta = dimensionInfo.ordinalMeta;\n      }\n    }\n\n    this.dimensions = dimensionNames;\n    this._dimensionInfos = dimensionInfos;\n    this.hostModel = hostModel; // Cache summary info for fast visit. See \"dimensionHelper\".\n\n    this._dimensionsSummary = summarizeDimensions(this);\n    this._invertedIndicesMap = invertedIndicesMap;\n    this.userOutput = this._dimensionsSummary.userOutput;\n  }\n  /**\n   * The meanings of the input parameter `dim`:\n   *\n   * + If dim is a number (e.g., `1`), it means the index of the dimension.\n   *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\n   * + If dim is a number-like string (e.g., `\"1\"`):\n   *     + If there is the same concrete dim name defined in `this.dimensions`, it means that concrete name.\n   *     + If not, it will be converted to a number, which means the index of the dimension.\n   *        (why? because of the backward compatbility. We have been tolerating number-like string in\n   *        dimension setting, although now it seems that it is not a good idea.)\n   *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\n   *     if no dimension name is defined as `\"1\"`.\n   * + If dim is a not-number-like string, it means the concrete dim name.\n   *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\n   *   or customized in `dimensions` property of option like `\"age\"`.\n   *\n   * Get dimension name\n   * @param dim See above.\n   * @return Concrete dim name.\n   */\n\n\n  List.prototype.getDimension = function (dim) {\n    if (typeof dim === 'number' // If being a number-like string but not being defined a dimension name.\n    || !isNaN(dim) && !this._dimensionInfos.hasOwnProperty(dim)) {\n      dim = this.dimensions[dim];\n    }\n\n    return dim;\n  };\n  /**\n   * Get type and calculation info of particular dimension\n   * @param dim\n   *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\n   *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\n   */\n\n\n  List.prototype.getDimensionInfo = function (dim) {\n    // Do not clone, because there may be categories in dimInfo.\n    return this._dimensionInfos[this.getDimension(dim)];\n  };\n  /**\n   * concrete dimension name list on coord.\n   */\n\n\n  List.prototype.getDimensionsOnCoord = function () {\n    return this._dimensionsSummary.dataDimsOnCoord.slice();\n  };\n\n  List.prototype.mapDimension = function (coordDim, idx) {\n    var dimensionsSummary = this._dimensionsSummary;\n\n    if (idx == null) {\n      return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\n    }\n\n    var dims = dimensionsSummary.encode[coordDim];\n    return dims ? dims[idx] : null;\n  };\n\n  List.prototype.mapDimensionsAll = function (coordDim) {\n    var dimensionsSummary = this._dimensionsSummary;\n    var dims = dimensionsSummary.encode[coordDim];\n    return (dims || []).slice();\n  };\n  /**\n   * Initialize from data\n   * @param data source or data or data provider.\n   * @param nameList The name of a datum is used on data diff and\n   *        default label/tooltip.\n   *        A name can be specified in encode.itemName,\n   *        or dataItem.name (only for series option data),\n   *        or provided in nameList from outside.\n   */\n\n\n  List.prototype.initData = function (data, nameList, dimValueGetter) {\n    var notProvider = isSourceInstance(data) || zrUtil.isArrayLike(data);\n    var provider = notProvider ? new DefaultDataProvider(data, this.dimensions.length) : data;\n\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(notProvider || zrUtil.isFunction(provider.getItem) && zrUtil.isFunction(provider.count), 'Inavlid data provider.');\n    }\n\n    this._rawData = provider;\n    var sourceFormat = provider.getSource().sourceFormat; // Clear\n\n    this._storage = {};\n    this._indices = null;\n    this._dontMakeIdFromName = this._idDimIdx != null || sourceFormat === SOURCE_FORMAT_TYPED_ARRAY // Cosndier performance.\n    || !!provider.fillStorage;\n    this._nameList = (nameList || []).slice();\n    this._idList = [];\n    this._nameRepeatCount = {};\n\n    if (!dimValueGetter) {\n      this.hasItemOption = false;\n    }\n\n    this.defaultDimValueGetter = defaultDimValueGetters[sourceFormat]; // Default dim value getter\n\n    this._dimValueGetter = dimValueGetter = dimValueGetter || this.defaultDimValueGetter;\n    this._dimValueGetterArrayRows = defaultDimValueGetters.arrayRows; // Reset raw extent.\n\n    this._rawExtent = {};\n\n    this._initDataFromProvider(0, provider.count()); // If data has no item option.\n\n\n    if (provider.pure) {\n      this.hasItemOption = false;\n    }\n  };\n\n  List.prototype.getProvider = function () {\n    return this._rawData;\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   */\n\n\n  List.prototype.appendData = function (data) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(!this._indices, 'appendData can only be called on raw data.');\n    }\n\n    var rawData = this._rawData;\n    var start = this.count();\n    rawData.appendData(data);\n    var end = rawData.count();\n\n    if (!rawData.persistent) {\n      end += start;\n    }\n\n    this._initDataFromProvider(start, end, true);\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   * This method does not modify `rawData` (`dataProvider`), but only\n   * add values to storage.\n   *\n   * The final count will be increased by `Math.max(values.length, names.length)`.\n   *\n   * @param values That is the SourceType: 'arrayRows', like\n   *        [\n   *            [12, 33, 44],\n   *            [NaN, 43, 1],\n   *            ['-', 'asdf', 0]\n   *        ]\n   *        Each item is exaclty cooresponding to a dimension.\n   */\n\n\n  List.prototype.appendValues = function (values, names) {\n    var storage = this._storage;\n    var dimensions = this.dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var start = this.count();\n    var end = start + Math.max(values.length, names ? names.length : 0);\n\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n\n      if (!rawExtent[dim]) {\n        rawExtent[dim] = getInitialExtent();\n      }\n\n      prepareStorage(storage, this._dimensionInfos[dim], end, true);\n    }\n\n    var rawExtentArr = map(dimensions, function (dim) {\n      return rawExtent[dim];\n    });\n    var storageArr = this._storageArr = map(dimensions, function (dim) {\n      return storage[dim];\n    });\n    var emptyDataItem = [];\n\n    for (var idx = start; idx < end; idx++) {\n      var sourceIdx = idx - start; // Store the data by dimensions\n\n      for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n        var dim = dimensions[dimIdx];\n\n        var val = this._dimValueGetterArrayRows(values[sourceIdx] || emptyDataItem, dim, sourceIdx, dimIdx);\n\n        storageArr[dimIdx][idx] = val;\n        var dimRawExtent = rawExtentArr[dimIdx];\n        val < dimRawExtent[0] && (dimRawExtent[0] = val);\n        val > dimRawExtent[1] && (dimRawExtent[1] = val);\n      }\n\n      if (names) {\n        this._nameList[idx] = names[sourceIdx];\n\n        if (!this._dontMakeIdFromName) {\n          makeIdFromName(this, idx);\n        }\n      }\n    }\n\n    this._rawCount = this._count = end; // Reset data extent\n\n    this._extent = {};\n    prepareInvertedIndex(this);\n  };\n\n  List.prototype._initDataFromProvider = function (start, end, append) {\n    if (start >= end) {\n      return;\n    }\n\n    var rawData = this._rawData;\n    var storage = this._storage;\n    var dimensions = this.dimensions;\n    var dimLen = dimensions.length;\n    var dimensionInfoMap = this._dimensionInfos;\n    var nameList = this._nameList;\n    var idList = this._idList;\n    var rawExtent = this._rawExtent;\n    var sourceFormat = rawData.getSource().sourceFormat;\n    var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL;\n\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n\n      if (!rawExtent[dim]) {\n        rawExtent[dim] = getInitialExtent();\n      }\n\n      prepareStorage(storage, dimensionInfoMap[dim], end, append);\n    }\n\n    var storageArr = this._storageArr = map(dimensions, function (dim) {\n      return storage[dim];\n    });\n    var rawExtentArr = map(dimensions, function (dim) {\n      return rawExtent[dim];\n    });\n\n    if (rawData.fillStorage) {\n      rawData.fillStorage(start, end, storageArr, rawExtentArr);\n    } else {\n      var dataItem = [];\n\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        dataItem = rawData.getItem(idx, dataItem); // Each data item is value\n        // [1, 2]\n        // 2\n        // Bar chart, line chart which uses category axis\n        // only gives the 'y' value. 'x' value is the indices of category\n        // Use a tempValue to normalize the value to be a (x, y) value\n        // Store the data by dimensions\n\n        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n          var dim = dimensions[dimIdx];\n          var dimStorage = storageArr[dimIdx]; // PENDING NULL is empty or zero\n\n          var val = this._dimValueGetter(dataItem, dim, idx, dimIdx);\n\n          dimStorage[idx] = val;\n          var dimRawExtent = rawExtentArr[dimIdx];\n          val < dimRawExtent[0] && (dimRawExtent[0] = val);\n          val > dimRawExtent[1] && (dimRawExtent[1] = val);\n        } // If dataItem is {name: ...} or {id: ...}, it has highest priority.\n        // This kind of ids and names are always stored `_nameList` and `_idList`.\n\n\n        if (isFormatOriginal && !rawData.pure && dataItem) {\n          var itemName = dataItem.name;\n\n          if (nameList[idx] == null && itemName != null) {\n            nameList[idx] = convertOptionIdName(itemName, null);\n          }\n\n          var itemId = dataItem.id;\n\n          if (idList[idx] == null && itemId != null) {\n            idList[idx] = convertOptionIdName(itemId, null);\n          }\n        }\n\n        if (!this._dontMakeIdFromName) {\n          makeIdFromName(this, idx);\n        }\n      }\n    }\n\n    if (!rawData.persistent && rawData.clean) {\n      // Clean unused data if data source is typed array.\n      rawData.clean();\n    }\n\n    this._rawCount = this._count = end; // Reset data extent\n\n    this._extent = {};\n    prepareInvertedIndex(this);\n  };\n\n  List.prototype.count = function () {\n    return this._count;\n  };\n\n  List.prototype.getIndices = function () {\n    var newIndices;\n    var indices = this._indices;\n\n    if (indices) {\n      var Ctor = indices.constructor;\n      var thisCount = this._count; // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\n\n      if (Ctor === Array) {\n        newIndices = new Ctor(thisCount);\n\n        for (var i = 0; i < thisCount; i++) {\n          newIndices[i] = indices[i];\n        }\n      } else {\n        newIndices = new Ctor(indices.buffer, 0, thisCount);\n      }\n    } else {\n      var Ctor = getIndicesCtor(this);\n      newIndices = new Ctor(this.count());\n\n      for (var i = 0; i < newIndices.length; i++) {\n        newIndices[i] = i;\n      }\n    }\n\n    return newIndices;\n  }; // Get data by index of dimension.\n  // Because in v8 access array by number variable is faster than access object by string variable\n  // Not sure why but the optimization just works.\n\n\n  List.prototype.getByDimIdx = function (dimIdx, idx) {\n    if (!(idx >= 0 && idx < this._count)) {\n      return NaN;\n    }\n\n    var dimStore = this._storageArr[dimIdx];\n    return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\n  };\n  /**\n   * Get value. Return NaN if idx is out of range.\n   * @param dim Dim must be concrete name.\n   */\n\n\n  List.prototype.get = function (dim, idx) {\n    if (!(idx >= 0 && idx < this._count)) {\n      return NaN;\n    }\n\n    var dimStore = this._storage[dim];\n    return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\n  };\n  /**\n   * @param dim concrete dim\n   */\n\n\n  List.prototype.getByRawIndex = function (dim, rawIdx) {\n    if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\n      return NaN;\n    }\n\n    var dimStore = this._storage[dim];\n    return dimStore ? dimStore[rawIdx] : NaN;\n  };\n\n  List.prototype.getValues = function (dimensions, idx) {\n    var values = [];\n\n    if (!zrUtil.isArray(dimensions)) {\n      // stack = idx;\n      idx = dimensions;\n      dimensions = this.dimensions;\n    }\n\n    for (var i = 0, len = dimensions.length; i < len; i++) {\n      values.push(this.get(dimensions[i], idx\n      /*, stack */\n      ));\n    }\n\n    return values;\n  };\n  /**\n   * If value is NaN. Inlcuding '-'\n   * Only check the coord dimensions.\n   */\n\n\n  List.prototype.hasValue = function (idx) {\n    var dataDimsOnCoord = this._dimensionsSummary.dataDimsOnCoord;\n\n    for (var i = 0, len = dataDimsOnCoord.length; i < len; i++) {\n      // Ordinal type originally can be string or number.\n      // But when an ordinal type is used on coord, it can\n      // not be string but only number. So we can also use isNaN.\n      if (isNaN(this.get(dataDimsOnCoord[i], idx))) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n  /**\n   * Get extent of data in one dimension\n   */\n\n\n  List.prototype.getDataExtent = function (dim) {\n    // Make sure use concrete dim as cache name.\n    dim = this.getDimension(dim);\n    var dimData = this._storage[dim];\n    var initialExtent = getInitialExtent(); // stack = !!((stack || false) && this.getCalculationInfo(dim));\n\n    if (!dimData) {\n      return initialExtent;\n    } // Make more strict checkings to ensure hitting cache.\n\n\n    var currEnd = this.count(); // let cacheName = [dim, !!stack].join('_');\n    // let cacheName = dim;\n    // Consider the most cases when using data zoom, `getDataExtent`\n    // happened before filtering. We cache raw extent, which is not\n    // necessary to be cleared and recalculated when restore data.\n\n    var useRaw = !this._indices; // && !stack;\n\n    var dimExtent;\n\n    if (useRaw) {\n      return this._rawExtent[dim].slice();\n    }\n\n    dimExtent = this._extent[dim];\n\n    if (dimExtent) {\n      return dimExtent.slice();\n    }\n\n    dimExtent = initialExtent;\n    var min = dimExtent[0];\n    var max = dimExtent[1];\n\n    for (var i = 0; i < currEnd; i++) {\n      var rawIdx = this.getRawIndex(i);\n      var value = dimData[rawIdx];\n      value < min && (min = value);\n      value > max && (max = value);\n    }\n\n    dimExtent = [min, max];\n    this._extent[dim] = dimExtent;\n    return dimExtent;\n  };\n  /**\n   * PENDING: In fact currently this function is only used to short-circuit\n   * the calling of `scale.unionExtentFromData` when data have been filtered by modules\n   * like \"dataZoom\". `scale.unionExtentFromData` is used to calculate data extent for series on\n   * an axis, but if a \"axis related data filter module\" is used, the extent of the axis have\n   * been fixed and no need to calling `scale.unionExtentFromData` actually.\n   * But if we add \"custom data filter\" in future, which is not \"axis related\", this method may\n   * be still needed.\n   *\n   * Optimize for the scenario that data is filtered by a given extent.\n   * Consider that if data amount is more than hundreds of thousand,\n   * extent calculation will cost more than 10ms and the cache will\n   * be erased because of the filtering.\n   */\n\n\n  List.prototype.getApproximateExtent = function (dim) {\n    dim = this.getDimension(dim);\n    return this._approximateExtent[dim] || this.getDataExtent(dim);\n  };\n  /**\n   * Calculate extent on a filtered data might be time consuming.\n   * Approximate extent is only used for: calculte extent of filtered data outside.\n   */\n\n\n  List.prototype.setApproximateExtent = function (extent, dim) {\n    dim = this.getDimension(dim);\n    this._approximateExtent[dim] = extent.slice();\n  };\n\n  List.prototype.getCalculationInfo = function (key) {\n    return this._calculationInfo[key];\n  };\n\n  List.prototype.setCalculationInfo = function (key, value) {\n    isObject(key) ? zrUtil.extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\n  };\n  /**\n   * Get sum of data in one dimension\n   */\n\n\n  List.prototype.getSum = function (dim) {\n    var dimData = this._storage[dim];\n    var sum = 0;\n\n    if (dimData) {\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var value = this.get(dim, i);\n\n        if (!isNaN(value)) {\n          sum += value;\n        }\n      }\n    }\n\n    return sum;\n  };\n  /**\n   * Get median of data in one dimension\n   */\n\n\n  List.prototype.getMedian = function (dim) {\n    var dimDataArray = []; // map all data of one dimension\n\n    this.each(dim, function (val) {\n      if (!isNaN(val)) {\n        dimDataArray.push(val);\n      }\n    }); // TODO\n    // Use quick select?\n\n    var sortedDimDataArray = dimDataArray.sort(function (a, b) {\n      return a - b;\n    });\n    var len = this.count(); // calculate median\n\n    return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\n  }; // /**\n  //  * Retreive the index with given value\n  //  * @param {string} dim Concrete dimension.\n  //  * @param {number} value\n  //  * @return {number}\n  //  */\n  // Currently incorrect: should return dataIndex but not rawIndex.\n  // Do not fix it until this method is to be used somewhere.\n  // FIXME Precision of float value\n  // indexOf(dim, value) {\n  //     let storage = this._storage;\n  //     let dimData = storage[dim];\n  //     let chunkSize = this._chunkSize;\n  //     if (dimData) {\n  //         for (let i = 0, len = this.count(); i < len; i++) {\n  //             let chunkIndex = mathFloor(i / chunkSize);\n  //             let chunkOffset = i % chunkSize;\n  //             if (dimData[chunkIndex][chunkOffset] === value) {\n  //                 return i;\n  //             }\n  //         }\n  //     }\n  //     return -1;\n  // }\n\n  /**\n   * Only support the dimension which inverted index created.\n   * Do not support other cases until required.\n   * @param dim concrete dim\n   * @param value ordinal index\n   * @return rawIndex\n   */\n\n\n  List.prototype.rawIndexOf = function (dim, value) {\n    var invertedIndices = dim && this._invertedIndicesMap[dim];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!invertedIndices) {\n        throw new Error('Do not supported yet');\n      }\n    }\n\n    var rawIndex = invertedIndices[value];\n\n    if (rawIndex == null || isNaN(rawIndex)) {\n      return INDEX_NOT_FOUND;\n    }\n\n    return rawIndex;\n  };\n  /**\n   * Retreive the index with given name\n   */\n\n\n  List.prototype.indexOfName = function (name) {\n    for (var i = 0, len = this.count(); i < len; i++) {\n      if (this.getName(i) === name) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n  /**\n   * Retreive the index with given raw data index\n   */\n\n\n  List.prototype.indexOfRawIndex = function (rawIndex) {\n    if (rawIndex >= this._rawCount || rawIndex < 0) {\n      return -1;\n    }\n\n    if (!this._indices) {\n      return rawIndex;\n    } // Indices are ascending\n\n\n    var indices = this._indices; // If rawIndex === dataIndex\n\n    var rawDataIndex = indices[rawIndex];\n\n    if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\n      return rawIndex;\n    }\n\n    var left = 0;\n    var right = this._count - 1;\n\n    while (left <= right) {\n      var mid = (left + right) / 2 | 0;\n\n      if (indices[mid] < rawIndex) {\n        left = mid + 1;\n      } else if (indices[mid] > rawIndex) {\n        right = mid - 1;\n      } else {\n        return mid;\n      }\n    }\n\n    return -1;\n  };\n  /**\n   * Retreive the index of nearest value\n   * @param dim\n   * @param value\n   * @param [maxDistance=Infinity]\n   * @return If and only if multiple indices has\n   *         the same value, they are put to the result.\n   */\n\n\n  List.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n    var storage = this._storage;\n    var dimData = storage[dim];\n    var nearestIndices = [];\n\n    if (!dimData) {\n      return nearestIndices;\n    }\n\n    if (maxDistance == null) {\n      maxDistance = Infinity;\n    }\n\n    var minDist = Infinity;\n    var minDiff = -1;\n    var nearestIndicesLen = 0; // Check the test case of `test/ut/spec/data/List.js`.\n\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var dataIndex = this.getRawIndex(i);\n      var diff = value - dimData[dataIndex];\n      var dist = Math.abs(diff);\n\n      if (dist <= maxDistance) {\n        // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\n        // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\n        // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\n        // So we chose the one that `diff >= 0` in this csae.\n        // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\n        // should be push to `nearestIndices`.\n        if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\n          minDist = dist;\n          minDiff = diff;\n          nearestIndicesLen = 0;\n        }\n\n        if (diff === minDiff) {\n          nearestIndices[nearestIndicesLen++] = i;\n        }\n      }\n    }\n\n    nearestIndices.length = nearestIndicesLen;\n    return nearestIndices;\n  };\n  /**\n   * Get raw data item\n   */\n\n\n  List.prototype.getRawDataItem = function (idx) {\n    if (!this._rawData.persistent) {\n      var val = [];\n\n      for (var i = 0; i < this.dimensions.length; i++) {\n        var dim = this.dimensions[i];\n        val.push(this.get(dim, idx));\n      }\n\n      return val;\n    } else {\n      return this._rawData.getItem(this.getRawIndex(idx));\n    }\n  };\n  /**\n   * @return Never be null/undefined. `number` will be converted to string. Becuase:\n   * In most cases, name is used in display, where returning a string is more convenient.\n   * In other cases, name is used in query (see `indexOfName`), where we can keep the\n   * rule that name `2` equals to name `'2'`.\n   */\n\n\n  List.prototype.getName = function (idx) {\n    var rawIndex = this.getRawIndex(idx);\n    var name = this._nameList[rawIndex];\n\n    if (name == null && this._nameDimIdx != null) {\n      name = getIdNameFromStore(this, this._nameDimIdx, this._nameOrdinalMeta, rawIndex);\n    }\n\n    if (name == null) {\n      name = '';\n    }\n\n    return name;\n  };\n  /**\n   * @return Never null/undefined. `number` will be converted to string. Becuase:\n   * In all cases having encountered at present, id is used in making diff comparison, which\n   * are usually based on hash map. We can keep the rule that the internal id are always string\n   * (treat `2` is the same as `'2'`) to make the related logic simple.\n   */\n\n\n  List.prototype.getId = function (idx) {\n    return getId(this, this.getRawIndex(idx));\n  };\n\n  List.prototype.each = function (dims, cb, ctx, ctxCompat) {\n    'use strict';\n\n    var _this = this;\n\n    if (!this._count) {\n      return;\n    }\n\n    if (typeof dims === 'function') {\n      ctxCompat = ctx;\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    } // ctxCompat just for compat echarts3\n\n\n    var fCtx = ctx || ctxCompat || this;\n    var dimNames = map(normalizeDimensions(dims), this.getDimension, this);\n\n    if (process.env.NODE_ENV !== 'production') {\n      validateDimensions(this, dimNames);\n    }\n\n    var dimSize = dimNames.length;\n    var dimIndices = map(dimNames, function (dimName) {\n      return _this._dimensionInfos[dimName].index;\n    });\n    var storageArr = this._storageArr;\n\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var rawIdx = this.getRawIndex(i); // Simple optimization\n\n      switch (dimSize) {\n        case 0:\n          cb.call(fCtx, i);\n          break;\n\n        case 1:\n          cb.call(fCtx, storageArr[dimIndices[0]][rawIdx], i);\n          break;\n\n        case 2:\n          cb.call(fCtx, storageArr[dimIndices[0]][rawIdx], storageArr[dimIndices[1]][rawIdx], i);\n          break;\n\n        default:\n          var k = 0;\n          var value = [];\n\n          for (; k < dimSize; k++) {\n            value[k] = storageArr[dimIndices[k]][rawIdx];\n          } // Index\n\n\n          value[k] = i;\n          cb.apply(fCtx, value);\n      }\n    }\n  };\n\n  List.prototype.filterSelf = function (dims, cb, ctx, ctxCompat) {\n    'use strict';\n\n    var _this = this;\n\n    if (!this._count) {\n      return;\n    }\n\n    if (typeof dims === 'function') {\n      ctxCompat = ctx;\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    } // ctxCompat just for compat echarts3\n\n\n    var fCtx = ctx || ctxCompat || this;\n    var dimNames = map(normalizeDimensions(dims), this.getDimension, this);\n\n    if (process.env.NODE_ENV !== 'production') {\n      validateDimensions(this, dimNames);\n    }\n\n    var count = this.count();\n    var Ctor = getIndicesCtor(this);\n    var newIndices = new Ctor(count);\n    var value = [];\n    var dimSize = dimNames.length;\n    var offset = 0;\n    var dimIndices = map(dimNames, function (dimName) {\n      return _this._dimensionInfos[dimName].index;\n    });\n    var dim0 = dimIndices[0];\n    var storageArr = this._storageArr;\n\n    for (var i = 0; i < count; i++) {\n      var keep = void 0;\n      var rawIdx = this.getRawIndex(i); // Simple optimization\n\n      if (dimSize === 0) {\n        keep = cb.call(fCtx, i);\n      } else if (dimSize === 1) {\n        var val = storageArr[dim0][rawIdx];\n        keep = cb.call(fCtx, val, i);\n      } else {\n        var k = 0;\n\n        for (; k < dimSize; k++) {\n          value[k] = storageArr[dimIndices[k]][rawIdx];\n        }\n\n        value[k] = i;\n        keep = cb.apply(fCtx, value);\n      }\n\n      if (keep) {\n        newIndices[offset++] = rawIdx;\n      }\n    } // Set indices after filtered.\n\n\n    if (offset < count) {\n      this._indices = newIndices;\n    }\n\n    this._count = offset; // Reset data extent\n\n    this._extent = {};\n    this.getRawIndex = this._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\n    return this;\n  };\n  /**\n   * Select data in range. (For optimization of filter)\n   * (Manually inline code, support 5 million data filtering in data zoom.)\n   */\n\n\n  List.prototype.selectRange = function (range) {\n    'use strict';\n\n    var _this = this;\n\n    var len = this._count;\n\n    if (!len) {\n      return;\n    }\n\n    var dimensions = [];\n\n    for (var dim in range) {\n      if (range.hasOwnProperty(dim)) {\n        dimensions.push(dim);\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      validateDimensions(this, dimensions);\n    }\n\n    var dimSize = dimensions.length;\n\n    if (!dimSize) {\n      return;\n    }\n\n    var originalCount = this.count();\n    var Ctor = getIndicesCtor(this);\n    var newIndices = new Ctor(originalCount);\n    var offset = 0;\n    var dim0 = dimensions[0];\n    var dimIndices = map(dimensions, function (dimName) {\n      return _this._dimensionInfos[dimName].index;\n    });\n    var min = range[dim0][0];\n    var max = range[dim0][1];\n    var storageArr = this._storageArr;\n    var quickFinished = false;\n\n    if (!this._indices) {\n      // Extreme optimization for common case. About 2x faster in chrome.\n      var idx = 0;\n\n      if (dimSize === 1) {\n        var dimStorage = storageArr[dimIndices[0]];\n\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i]; // NaN will not be filtered. Consider the case, in line chart, empty\n          // value indicates the line should be broken. But for the case like\n          // scatter plot, a data item with empty value will not be rendered,\n          // but the axis extent may be effected if some other dim of the data\n          // item has value. Fortunately it is not a significant negative effect.\n\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = idx;\n          }\n\n          idx++;\n        }\n\n        quickFinished = true;\n      } else if (dimSize === 2) {\n        var dimStorage = storageArr[dimIndices[0]];\n        var dimStorage2 = storageArr[dimIndices[1]];\n        var min2 = range[dimensions[1]][0];\n        var max2 = range[dimensions[1]][1];\n\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          var val2 = dimStorage2[i]; // Do not filter NaN, see comment above.\n\n          if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\n            newIndices[offset++] = idx;\n          }\n\n          idx++;\n        }\n\n        quickFinished = true;\n      }\n    }\n\n    if (!quickFinished) {\n      if (dimSize === 1) {\n        for (var i = 0; i < originalCount; i++) {\n          var rawIndex = this.getRawIndex(i);\n          var val = storageArr[dimIndices[0]][rawIndex]; // Do not filter NaN, see comment above.\n\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = rawIndex;\n          }\n        }\n      } else {\n        for (var i = 0; i < originalCount; i++) {\n          var keep = true;\n          var rawIndex = this.getRawIndex(i);\n\n          for (var k = 0; k < dimSize; k++) {\n            var dimk = dimensions[k];\n            var val = storageArr[dimIndices[k]][rawIndex]; // Do not filter NaN, see comment above.\n\n            if (val < range[dimk][0] || val > range[dimk][1]) {\n              keep = false;\n            }\n          }\n\n          if (keep) {\n            newIndices[offset++] = this.getRawIndex(i);\n          }\n        }\n      }\n    } // Set indices after filtered.\n\n\n    if (offset < originalCount) {\n      this._indices = newIndices;\n    }\n\n    this._count = offset; // Reset data extent\n\n    this._extent = {};\n    this.getRawIndex = this._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\n    return this;\n  };\n  /* eslint-enable */\n\n\n  List.prototype.mapArray = function (dims, cb, ctx, ctxCompat) {\n    'use strict';\n\n    if (typeof dims === 'function') {\n      ctxCompat = ctx;\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    } // ctxCompat just for compat echarts3\n\n\n    ctx = ctx || ctxCompat || this;\n    var result = [];\n    this.each(dims, function () {\n      result.push(cb && cb.apply(this, arguments));\n    }, ctx);\n    return result;\n  };\n\n  List.prototype.map = function (dims, cb, ctx, ctxCompat) {\n    'use strict'; // ctxCompat just for compat echarts3\n\n    var fCtx = ctx || ctxCompat || this;\n    var dimNames = map(normalizeDimensions(dims), this.getDimension, this);\n\n    if (process.env.NODE_ENV !== 'production') {\n      validateDimensions(this, dimNames);\n    }\n\n    var list = cloneListForMapAndSample(this, dimNames);\n    var storage = list._storage; // Following properties are all immutable.\n    // So we can reference to the same value\n\n    list._indices = this._indices;\n    list.getRawIndex = list._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\n    var tmpRetValue = [];\n    var dimSize = dimNames.length;\n    var dataCount = this.count();\n    var values = [];\n    var rawExtent = list._rawExtent;\n\n    for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\n      for (var dimIndex = 0; dimIndex < dimSize; dimIndex++) {\n        values[dimIndex] = this.get(dimNames[dimIndex], dataIndex);\n      }\n\n      values[dimSize] = dataIndex;\n      var retValue = cb && cb.apply(fCtx, values);\n\n      if (retValue != null) {\n        // a number or string (in oridinal dimension)?\n        if (typeof retValue !== 'object') {\n          tmpRetValue[0] = retValue;\n          retValue = tmpRetValue;\n        }\n\n        var rawIndex = this.getRawIndex(dataIndex);\n\n        for (var i = 0; i < retValue.length; i++) {\n          var dim = dimNames[i];\n          var val = retValue[i];\n          var rawExtentOnDim = rawExtent[dim];\n          var dimStore = storage[dim];\n\n          if (dimStore) {\n            dimStore[rawIndex] = val;\n          }\n\n          if (val < rawExtentOnDim[0]) {\n            rawExtentOnDim[0] = val;\n          }\n\n          if (val > rawExtentOnDim[1]) {\n            rawExtentOnDim[1] = val;\n          }\n        }\n      }\n    }\n\n    return list;\n  };\n  /**\n   * Large data down sampling on given dimension\n   * @param sampleIndex Sample index for name and id\n   */\n\n\n  List.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var list = cloneListForMapAndSample(this, [dimension]);\n    var targetStorage = list._storage;\n    var frameValues = [];\n    var frameSize = mathFloor(1 / rate);\n    var dimStore = targetStorage[dimension];\n    var len = this.count();\n    var rawExtentOnDim = list._rawExtent[dimension];\n    var newIndices = new (getIndicesCtor(this))(len);\n    var offset = 0;\n\n    for (var i = 0; i < len; i += frameSize) {\n      // Last frame\n      if (frameSize > len - i) {\n        frameSize = len - i;\n        frameValues.length = frameSize;\n      }\n\n      for (var k = 0; k < frameSize; k++) {\n        var dataIdx = this.getRawIndex(i + k);\n        frameValues[k] = dimStore[dataIdx];\n      }\n\n      var value = sampleValue(frameValues);\n      var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1)); // Only write value on the filtered data\n\n      dimStore[sampleFrameIdx] = value;\n\n      if (value < rawExtentOnDim[0]) {\n        rawExtentOnDim[0] = value;\n      }\n\n      if (value > rawExtentOnDim[1]) {\n        rawExtentOnDim[1] = value;\n      }\n\n      newIndices[offset++] = sampleFrameIdx;\n    }\n\n    list._count = offset;\n    list._indices = newIndices;\n    list.getRawIndex = getRawIndexWithIndices;\n    return list;\n  };\n  /**\n   * Large data down sampling using largest-triangle-three-buckets\n   * @param {string} valueDimension\n   * @param {number} targetCount\n   */\n\n\n  List.prototype.lttbDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this, []);\n    var targetStorage = list._storage;\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    var newIndices = new (getIndicesCtor(this))(len);\n    var sampledIndex = 0;\n    var frameSize = mathFloor(1 / rate);\n    var currentRawIndex = this.getRawIndex(0);\n    var maxArea;\n    var area;\n    var nextRawIndex; // First frame use the first data.\n\n    newIndices[sampledIndex++] = currentRawIndex;\n\n    for (var i = 1; i < len - 1; i += frameSize) {\n      var nextFrameStart = Math.min(i + frameSize, len - 1);\n      var nextFrameEnd = Math.min(i + frameSize * 2, len);\n      var avgX = (nextFrameEnd + nextFrameStart) / 2;\n      var avgY = 0;\n\n      for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n\n        if (isNaN(y)) {\n          continue;\n        }\n\n        avgY += y;\n      }\n\n      avgY /= nextFrameEnd - nextFrameStart;\n      var frameStart = i;\n      var frameEnd = Math.min(i + frameSize, len);\n      var pointAX = i - 1;\n      var pointAY = dimStore[currentRawIndex];\n      maxArea = -1;\n      nextRawIndex = frameStart; // Find a point from current frame that construct a triangel with largest area with previous selected point\n      // And the average of next frame.\n\n      for (var idx = frameStart; idx < frameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n\n        if (isNaN(y)) {\n          continue;\n        } // Calculate triangle area over three buckets\n\n\n        area = Math.abs((pointAX - avgX) * (y - pointAY) - (pointAX - idx) * (avgY - pointAY));\n\n        if (area > maxArea) {\n          maxArea = area;\n          nextRawIndex = rawIndex; // Next a is this b\n        }\n      }\n\n      newIndices[sampledIndex++] = nextRawIndex;\n      currentRawIndex = nextRawIndex; // This a is the next a (chosen b)\n    } // First frame use the last data.\n\n\n    newIndices[sampledIndex++] = this.getRawIndex(len - 1);\n    list._count = sampledIndex;\n    list._indices = newIndices;\n    list.getRawIndex = getRawIndexWithIndices;\n    return list;\n  };\n  /**\n   * Get model of one data item.\n   */\n  // TODO: Type of data item\n\n\n  List.prototype.getItemModel = function (idx) {\n    var hostModel = this.hostModel;\n    var dataItem = this.getRawDataItem(idx);\n    return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\n  };\n  /**\n   * Create a data differ\n   */\n\n\n  List.prototype.diff = function (otherList) {\n    var thisList = this;\n    return new DataDiffer(otherList ? otherList.getIndices() : [], this.getIndices(), function (idx) {\n      return getId(otherList, idx);\n    }, function (idx) {\n      return getId(thisList, idx);\n    });\n  };\n  /**\n   * Get visual property.\n   */\n\n\n  List.prototype.getVisual = function (key) {\n    var visual = this._visual;\n    return visual && visual[key];\n  };\n\n  List.prototype.setVisual = function (kvObj, val) {\n    this._visual = this._visual || {};\n\n    if (isObject(kvObj)) {\n      zrUtil.extend(this._visual, kvObj);\n    } else {\n      this._visual[kvObj] = val;\n    }\n  };\n  /**\n   * Get visual property of single data item\n   */\n  // eslint-disable-next-line\n\n\n  List.prototype.getItemVisual = function (idx, key) {\n    var itemVisual = this._itemVisuals[idx];\n    var val = itemVisual && itemVisual[key];\n\n    if (val == null) {\n      // Use global visual property\n      return this.getVisual(key);\n    }\n\n    return val;\n  };\n  /**\n   * If exists visual property of single data item\n   */\n\n\n  List.prototype.hasItemVisual = function () {\n    return this._itemVisuals.length > 0;\n  };\n  /**\n   * Make sure itemVisual property is unique\n   */\n  // TODO: use key to save visual to reduce memory.\n\n\n  List.prototype.ensureUniqueItemVisual = function (idx, key) {\n    var itemVisuals = this._itemVisuals;\n    var itemVisual = itemVisuals[idx];\n\n    if (!itemVisual) {\n      itemVisual = itemVisuals[idx] = {};\n    }\n\n    var val = itemVisual[key];\n\n    if (val == null) {\n      val = this.getVisual(key); // TODO Performance?\n\n      if (zrUtil.isArray(val)) {\n        val = val.slice();\n      } else if (isObject(val)) {\n        val = zrUtil.extend({}, val);\n      }\n\n      itemVisual[key] = val;\n    }\n\n    return val;\n  }; // eslint-disable-next-line\n\n\n  List.prototype.setItemVisual = function (idx, key, value) {\n    var itemVisual = this._itemVisuals[idx] || {};\n    this._itemVisuals[idx] = itemVisual;\n\n    if (isObject(key)) {\n      zrUtil.extend(itemVisual, key);\n    } else {\n      itemVisual[key] = value;\n    }\n  };\n  /**\n   * Clear itemVisuals and list visual.\n   */\n\n\n  List.prototype.clearAllVisual = function () {\n    this._visual = {};\n    this._itemVisuals = [];\n  };\n\n  List.prototype.setLayout = function (key, val) {\n    if (isObject(key)) {\n      for (var name_1 in key) {\n        if (key.hasOwnProperty(name_1)) {\n          this.setLayout(name_1, key[name_1]);\n        }\n      }\n\n      return;\n    }\n\n    this._layout[key] = val;\n  };\n  /**\n   * Get layout property.\n   */\n\n\n  List.prototype.getLayout = function (key) {\n    return this._layout[key];\n  };\n  /**\n   * Get layout of single data item\n   */\n\n\n  List.prototype.getItemLayout = function (idx) {\n    return this._itemLayouts[idx];\n  };\n  /**\n   * Set layout of single data item\n   */\n\n\n  List.prototype.setItemLayout = function (idx, layout, merge) {\n    this._itemLayouts[idx] = merge ? zrUtil.extend(this._itemLayouts[idx] || {}, layout) : layout;\n  };\n  /**\n   * Clear all layout of single data item\n   */\n\n\n  List.prototype.clearItemLayouts = function () {\n    this._itemLayouts.length = 0;\n  };\n  /**\n   * Set graphic element relative to data. It can be set as null\n   */\n\n\n  List.prototype.setItemGraphicEl = function (idx, el) {\n    var hostModel = this.hostModel;\n\n    if (el) {\n      var ecData = getECData(el); // Add data index and series index for indexing the data by element\n      // Useful in tooltip\n\n      ecData.dataIndex = idx;\n      ecData.dataType = this.dataType;\n      ecData.seriesIndex = hostModel && hostModel.seriesIndex; // TODO: not store dataIndex on children.\n\n      if (el.type === 'group') {\n        el.traverse(setItemDataAndSeriesIndex, el);\n      }\n    }\n\n    this._graphicEls[idx] = el;\n  };\n\n  List.prototype.getItemGraphicEl = function (idx) {\n    return this._graphicEls[idx];\n  };\n\n  List.prototype.eachItemGraphicEl = function (cb, context) {\n    zrUtil.each(this._graphicEls, function (el, idx) {\n      if (el) {\n        cb && cb.call(context, el, idx);\n      }\n    });\n  };\n  /**\n   * Shallow clone a new list except visual and layout properties, and graph elements.\n   * New list only change the indices.\n   */\n\n\n  List.prototype.cloneShallow = function (list) {\n    if (!list) {\n      var dimensionInfoList = map(this.dimensions, this.getDimensionInfo, this);\n      list = new List(dimensionInfoList, this.hostModel);\n    } // FIXME\n\n\n    list._storage = this._storage;\n    list._storageArr = this._storageArr;\n    transferProperties(list, this); // Clone will not change the data extent and indices\n\n    if (this._indices) {\n      var Ctor = this._indices.constructor;\n\n      if (Ctor === Array) {\n        var thisCount = this._indices.length;\n        list._indices = new Ctor(thisCount);\n\n        for (var i = 0; i < thisCount; i++) {\n          list._indices[i] = this._indices[i];\n        }\n      } else {\n        list._indices = new Ctor(this._indices);\n      }\n    } else {\n      list._indices = null;\n    }\n\n    list.getRawIndex = list._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\n    return list;\n  };\n  /**\n   * Wrap some method to add more feature\n   */\n\n\n  List.prototype.wrapMethod = function (methodName, injectFunction) {\n    var originalMethod = this[methodName];\n\n    if (typeof originalMethod !== 'function') {\n      return;\n    }\n\n    this.__wrappedMethods = this.__wrappedMethods || [];\n\n    this.__wrappedMethods.push(methodName);\n\n    this[methodName] = function () {\n      var res = originalMethod.apply(this, arguments);\n      return injectFunction.apply(this, [res].concat(zrUtil.slice(arguments)));\n    };\n  }; // ----------------------------------------------------------\n  // A work around for internal method visiting private member.\n  // ----------------------------------------------------------\n\n\n  List.internalField = function () {\n    defaultDimValueGetters = {\n      arrayRows: getDimValueSimply,\n      objectRows: function (dataItem, dimName, dataIndex, dimIndex) {\n        return parseDataValue(dataItem[dimName], this._dimensionInfos[dimName]);\n      },\n      keyedColumns: getDimValueSimply,\n      original: function (dataItem, dimName, dataIndex, dimIndex) {\n        // Performance sensitive, do not use modelUtil.getDataItemValue.\n        // If dataItem is an plain object with no value field, the let `value`\n        // will be assigned with the object, but it will be tread correctly\n        // in the `convertValue`.\n        var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value); // If any dataItem is like { value: 10 }\n\n        if (!this._rawData.pure && isDataItemOption(dataItem)) {\n          this.hasItemOption = true;\n        }\n\n        return parseDataValue(value instanceof Array ? value[dimIndex] // If value is a single number or something else not array.\n        : value, this._dimensionInfos[dimName]);\n      },\n      typedArray: function (dataItem, dimName, dataIndex, dimIndex) {\n        return dataItem[dimIndex];\n      }\n    };\n\n    function getDimValueSimply(dataItem, dimName, dataIndex, dimIndex) {\n      return parseDataValue(dataItem[dimIndex], this._dimensionInfos[dimName]);\n    }\n\n    prepareInvertedIndex = function (list) {\n      var invertedIndicesMap = list._invertedIndicesMap;\n      zrUtil.each(invertedIndicesMap, function (invertedIndices, dim) {\n        var dimInfo = list._dimensionInfos[dim]; // Currently, only dimensions that has ordinalMeta can create inverted indices.\n\n        var ordinalMeta = dimInfo.ordinalMeta;\n\n        if (ordinalMeta) {\n          invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length); // The default value of TypedArray is 0. To avoid miss\n          // mapping to 0, we should set it as INDEX_NOT_FOUND.\n\n          for (var i = 0; i < invertedIndices.length; i++) {\n            invertedIndices[i] = INDEX_NOT_FOUND;\n          }\n\n          for (var i = 0; i < list._count; i++) {\n            // Only support the case that all values are distinct.\n            invertedIndices[list.get(dim, i)] = i;\n          }\n        }\n      });\n    };\n\n    getIdNameFromStore = function (list, dimIdx, ordinalMeta, rawIndex) {\n      var val;\n      var chunk = list._storageArr[dimIdx];\n\n      if (chunk) {\n        val = chunk[rawIndex];\n\n        if (ordinalMeta && ordinalMeta.categories.length) {\n          val = ordinalMeta.categories[val];\n        }\n      }\n\n      return convertOptionIdName(val, null);\n    };\n\n    getIndicesCtor = function (list) {\n      // The possible max value in this._indicies is always this._rawCount despite of filtering.\n      return list._rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\n    };\n\n    prepareStorage = function (storage, dimInfo, end, append) {\n      var DataCtor = dataCtors[dimInfo.type];\n      var dim = dimInfo.name;\n\n      if (append) {\n        var oldStore = storage[dim];\n        var oldLen = oldStore && oldStore.length;\n\n        if (!(oldLen === end)) {\n          var newStore = new DataCtor(end); // The cost of the copy is probably inconsiderable\n          // within the initial chunkSize.\n\n          for (var j = 0; j < oldLen; j++) {\n            newStore[j] = oldStore[j];\n          }\n\n          storage[dim] = newStore;\n        }\n      } else {\n        storage[dim] = new DataCtor(end);\n      }\n    };\n\n    getRawIndexWithoutIndices = function (idx) {\n      return idx;\n    };\n\n    getRawIndexWithIndices = function (idx) {\n      if (idx < this._count && idx >= 0) {\n        return this._indices[idx];\n      }\n\n      return -1;\n    };\n    /**\n     * @see the comment of `List['getId']`.\n     */\n\n\n    getId = function (list, rawIndex) {\n      var id = list._idList[rawIndex];\n\n      if (id == null && list._idDimIdx != null) {\n        id = getIdNameFromStore(list, list._idDimIdx, list._idOrdinalMeta, rawIndex);\n      }\n\n      if (id == null) {\n        id = ID_PREFIX + rawIndex;\n      }\n\n      return id;\n    };\n\n    normalizeDimensions = function (dimensions) {\n      if (!zrUtil.isArray(dimensions)) {\n        dimensions = dimensions != null ? [dimensions] : [];\n      }\n\n      return dimensions;\n    };\n\n    validateDimensions = function (list, dims) {\n      for (var i = 0; i < dims.length; i++) {\n        // stroage may be empty when no data, so use\n        // dimensionInfos to check.\n        if (!list._dimensionInfos[dims[i]]) {\n          console.error('Unkown dimension ' + dims[i]);\n        }\n      }\n    }; // Data in excludeDimensions is copied, otherwise transfered.\n\n\n    cloneListForMapAndSample = function (original, excludeDimensions) {\n      var allDimensions = original.dimensions;\n      var list = new List(map(allDimensions, original.getDimensionInfo, original), original.hostModel); // FIXME If needs stackedOn, value may already been stacked\n\n      transferProperties(list, original);\n      var storage = list._storage = {};\n      var originalStorage = original._storage;\n      var storageArr = list._storageArr = []; // Init storage\n\n      for (var i = 0; i < allDimensions.length; i++) {\n        var dim = allDimensions[i];\n\n        if (originalStorage[dim]) {\n          // Notice that we do not reset invertedIndicesMap here, becuase\n          // there is no scenario of mapping or sampling ordinal dimension.\n          if (zrUtil.indexOf(excludeDimensions, dim) >= 0) {\n            storage[dim] = cloneChunk(originalStorage[dim]);\n            list._rawExtent[dim] = getInitialExtent();\n            list._extent[dim] = null;\n          } else {\n            // Direct reference for other dimensions\n            storage[dim] = originalStorage[dim];\n          }\n\n          storageArr.push(storage[dim]);\n        }\n      }\n\n      return list;\n    };\n\n    function cloneChunk(originalChunk) {\n      var Ctor = originalChunk.constructor; // Only shallow clone is enough when Array.\n\n      return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\n    }\n\n    getInitialExtent = function () {\n      return [Infinity, -Infinity];\n    };\n\n    setItemDataAndSeriesIndex = function (child) {\n      var childECData = getECData(child);\n      var thisECData = getECData(this);\n      childECData.seriesIndex = thisECData.seriesIndex;\n      childECData.dataIndex = thisECData.dataIndex;\n      childECData.dataType = thisECData.dataType;\n    };\n\n    transferProperties = function (target, source) {\n      zrUtil.each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\n        if (source.hasOwnProperty(propName)) {\n          target[propName] = source[propName];\n        }\n      });\n      target.__wrappedMethods = source.__wrappedMethods;\n      zrUtil.each(CLONE_PROPERTIES, function (propName) {\n        target[propName] = zrUtil.clone(source[propName]);\n      });\n      target._calculationInfo = zrUtil.extend({}, source._calculationInfo);\n    };\n\n    makeIdFromName = function (list, idx) {\n      var nameList = list._nameList;\n      var idList = list._idList;\n      var nameDimIdx = list._nameDimIdx;\n      var idDimIdx = list._idDimIdx;\n      var name = nameList[idx];\n      var id = idList[idx];\n\n      if (name == null && nameDimIdx != null) {\n        nameList[idx] = name = getIdNameFromStore(list, nameDimIdx, list._nameOrdinalMeta, idx);\n      }\n\n      if (id == null && idDimIdx != null) {\n        idList[idx] = id = getIdNameFromStore(list, idDimIdx, list._idOrdinalMeta, idx);\n      }\n\n      if (id == null && name != null) {\n        var nameRepeatCount = list._nameRepeatCount;\n        var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;\n        id = name;\n\n        if (nmCnt > 1) {\n          id += '__ec__' + nmCnt;\n        }\n\n        idList[idx] = id;\n      }\n    };\n  }();\n\n  return List;\n}();\n\nexport default List;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as numberUtil from '../../util/number';\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper';\nimport { indexOf, curry, clone, isArray } from 'zrender/lib/core/util';\n\nfunction hasXOrY(item) {\n  return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\n}\n\nfunction hasXAndY(item) {\n  return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\n} // Make it simple, do not visit all stacked value to count precision.\n// function getPrecision(data, valueAxisDim, dataIndex) {\n//     let precision = -1;\n//     let stackedDim = data.mapDimension(valueAxisDim);\n//     do {\n//         precision = Math.max(\n//             numberUtil.getPrecision(data.get(stackedDim, dataIndex)),\n//             precision\n//         );\n//         let stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n//         if (stackedOnSeries) {\n//             let byValue = data.get(data.getCalculationInfo('stackedByDimension'), dataIndex);\n//             data = stackedOnSeries.getData();\n//             dataIndex = data.indexOf(data.getCalculationInfo('stackedByDimension'), byValue);\n//             stackedDim = data.getCalculationInfo('stackedDimension');\n//         }\n//         else {\n//             data = null;\n//         }\n//     } while (data);\n//     return precision;\n// }\n\n\nfunction markerTypeCalculatorWithExtent(markerType, data, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\n  var coordArr = [];\n  var stacked = isDimensionStacked(data, targetDataDim\n  /*, otherDataDim*/\n  );\n  var calcDataDim = stacked ? data.getCalculationInfo('stackResultDimension') : targetDataDim;\n  var value = numCalculate(data, calcDataDim, markerType);\n  var dataIndex = data.indicesOfNearest(calcDataDim, value)[0];\n  coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex);\n  coordArr[targetCoordIndex] = data.get(calcDataDim, dataIndex);\n  var coordArrValue = data.get(targetDataDim, dataIndex); // Make it simple, do not visit all stacked value to count precision.\n\n  var precision = numberUtil.getPrecision(data.get(targetDataDim, dataIndex));\n  precision = Math.min(precision, 20);\n\n  if (precision >= 0) {\n    coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\n  }\n\n  return [coordArr, coordArrValue];\n} // TODO Specified percent\n\n\nvar markerTypeCalculator = {\n  min: curry(markerTypeCalculatorWithExtent, 'min'),\n  max: curry(markerTypeCalculatorWithExtent, 'max'),\n  average: curry(markerTypeCalculatorWithExtent, 'average'),\n  median: curry(markerTypeCalculatorWithExtent, 'median')\n};\n/**\n * Transform markPoint data item to format used in List by do the following\n * 1. Calculate statistic like `max`, `min`, `average`\n * 2. Convert `item.xAxis`, `item.yAxis` to `item.coord` array\n * @param  {module:echarts/model/Series} seriesModel\n * @param  {module:echarts/coord/*} [coordSys]\n * @param  {Object} item\n * @return {Object}\n */\n\nexport function dataTransform(seriesModel, item) {\n  var data = seriesModel.getData();\n  var coordSys = seriesModel.coordinateSystem; // 1. If not specify the position with pixel directly\n  // 2. If `coord` is not a data array. Which uses `xAxis`,\n  // `yAxis` to specify the coord on each dimension\n  // parseFloat first because item.x and item.y can be percent string like '20%'\n\n  if (item && !hasXAndY(item) && !isArray(item.coord) && coordSys) {\n    var dims = coordSys.dimensions;\n    var axisInfo = getAxisInfo(item, data, coordSys, seriesModel); // Clone the option\n    // Transform the properties xAxis, yAxis, radiusAxis, angleAxis, geoCoord to value\n\n    item = clone(item);\n\n    if (item.type && markerTypeCalculator[item.type] && axisInfo.baseAxis && axisInfo.valueAxis) {\n      var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\n      var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\n      var coordInfo = markerTypeCalculator[item.type](data, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex);\n      item.coord = coordInfo[0]; // Force to use the value of calculated value.\n      // let item use the value without stack.\n\n      item.value = coordInfo[1];\n    } else {\n      // FIXME Only has one of xAxis and yAxis.\n      var coord = [item.xAxis != null ? item.xAxis : item.radiusAxis, item.yAxis != null ? item.yAxis : item.angleAxis]; // Each coord support max, min, average\n\n      for (var i = 0; i < 2; i++) {\n        if (markerTypeCalculator[coord[i]]) {\n          coord[i] = numCalculate(data, data.mapDimension(dims[i]), coord[i]);\n        }\n      }\n\n      item.coord = coord;\n    }\n  }\n\n  return item;\n}\nexport function getAxisInfo(item, data, coordSys, seriesModel) {\n  var ret = {};\n\n  if (item.valueIndex != null || item.valueDim != null) {\n    ret.valueDataDim = item.valueIndex != null ? data.getDimension(item.valueIndex) : item.valueDim;\n    ret.valueAxis = coordSys.getAxis(dataDimToCoordDim(seriesModel, ret.valueDataDim));\n    ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n  } else {\n    ret.baseAxis = seriesModel.getBaseAxis();\n    ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n    ret.valueDataDim = data.mapDimension(ret.valueAxis.dim);\n  }\n\n  return ret;\n}\n\nfunction dataDimToCoordDim(seriesModel, dataDim) {\n  var data = seriesModel.getData();\n  var dimensions = data.dimensions;\n  dataDim = data.getDimension(dataDim);\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimItem = data.getDimensionInfo(dimensions[i]);\n\n    if (dimItem.name === dataDim) {\n      return dimItem.coordDim;\n    }\n  }\n}\n/**\n * Filter data which is out of coordinateSystem range\n * [dataFilter description]\n */\n\n\nexport function dataFilter( // Currently only polar and cartesian has containData.\ncoordSys, item) {\n  // Alwalys return true if there is no coordSys\n  return coordSys && coordSys.containData && item.coord && !hasXOrY(item) ? coordSys.containData(item.coord) : true;\n}\nexport function dimValueGetter(item, dimName, dataIndex, dimIndex) {\n  // x, y, radius, angle\n  if (dimIndex < 2) {\n    return item.coord && item.coord[dimIndex];\n  }\n\n  return item.value;\n}\nexport function numCalculate(data, valueDataDim, type) {\n  if (type === 'average') {\n    var sum_1 = 0;\n    var count_1 = 0;\n    data.each(valueDataDim, function (val, idx) {\n      if (!isNaN(val)) {\n        sum_1 += val;\n        count_1++;\n      }\n    });\n    return sum_1 / count_1;\n  } else if (type === 'median') {\n    return data.getMedian(valueDataDim);\n  } else {\n    // max & min\n    return data.getDataExtent(valueDataDim)[type === 'max' ? 1 : 0];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport { createHashMap, each } from 'zrender/lib/core/util';\nimport MarkerModel from './MarkerModel';\nimport { makeInner } from '../../util/model';\nimport { enterBlur } from '../../util/states';\nvar inner = makeInner();\n\nvar MarkerView =\n/** @class */\nfunction (_super) {\n  __extends(MarkerView, _super);\n\n  function MarkerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerView.type;\n    return _this;\n  }\n\n  MarkerView.prototype.init = function () {\n    this.markerGroupMap = createHashMap();\n  };\n\n  MarkerView.prototype.render = function (markerModel, ecModel, api) {\n    var _this = this;\n\n    var markerGroupMap = this.markerGroupMap;\n    markerGroupMap.each(function (item) {\n      inner(item).keep = false;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      markerModel && _this.renderSeries(seriesModel, markerModel, ecModel, api);\n    });\n    markerGroupMap.each(function (item) {\n      !inner(item).keep && _this.group.remove(item.group);\n    });\n  };\n\n  MarkerView.prototype.markKeep = function (drawGroup) {\n    inner(drawGroup).keep = true;\n  };\n\n  MarkerView.prototype.blurSeries = function (seriesModelList) {\n    var _this = this;\n\n    each(seriesModelList, function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n\n      if (markerModel) {\n        var data = markerModel.getData();\n        data.eachItemGraphicEl(function (el) {\n          if (el) {\n            enterBlur(el);\n          }\n        });\n      }\n    });\n  };\n\n  MarkerView.type = 'marker';\n  return MarkerView;\n}(ComponentView);\n\nexport default MarkerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function isCoordinateSystemType(coordSys, type) {\n  return coordSys.type === type;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO Optimize on polar\n\nimport * as colorUtil from 'zrender/lib/tool/color';\nimport List from '../../data/List';\nimport * as numberUtil from '../../util/number';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, setStatesStylesFromModel } from '../../util/states';\nimport * as markerHelper from './markerHelper';\nimport MarkerView from './MarkerView';\nimport { retrieve, mergeAll, map, defaults, curry, filter } from 'zrender/lib/core/util';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport MarkerModel from './MarkerModel';\nimport { makeInner } from '../../util/model';\nimport { getVisualFromData } from '../../visual/helper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { getECData } from '../../util/innerStore';\nvar inner = makeInner();\n\nvar markAreaTransform = function (seriesModel, coordSys, maModel, item) {\n  var lt = markerHelper.dataTransform(seriesModel, item[0]);\n  var rb = markerHelper.dataTransform(seriesModel, item[1]); // FIXME make sure lt is less than rb\n\n  var ltCoord = lt.coord;\n  var rbCoord = rb.coord;\n  ltCoord[0] = retrieve(ltCoord[0], -Infinity);\n  ltCoord[1] = retrieve(ltCoord[1], -Infinity);\n  rbCoord[0] = retrieve(rbCoord[0], Infinity);\n  rbCoord[1] = retrieve(rbCoord[1], Infinity); // Merge option into one\n\n  var result = mergeAll([{}, lt, rb]);\n  result.coord = [lt.coord, rb.coord];\n  result.x0 = lt.x;\n  result.y0 = lt.y;\n  result.x1 = rb.x;\n  result.y1 = rb.y;\n  return result;\n};\n\nfunction isInifinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markArea has one dim\n\n\nfunction ifMarkAreaHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  return isInifinity(fromCoord[otherDimIndex]) && isInifinity(toCoord[otherDimIndex]);\n}\n\nfunction markAreaFilter(coordSys, item) {\n  var fromCoord = item.coord[0];\n  var toCoord = item.coord[1];\n\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    // In case\n    // {\n    //  markArea: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkAreaHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkAreaHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n\n  return markerHelper.dataFilter(coordSys, {\n    coord: fromCoord,\n    x: item.x0,\n    y: item.y0\n  }) || markerHelper.dataFilter(coordSys, {\n    coord: toCoord,\n    x: item.x1,\n    y: item.y1\n  });\n} // dims can be ['x0', 'y0'], ['x1', 'y1'], ['x0', 'y1'], ['x1', 'y0']\n\n\nfunction getSingleMarkerEndPoint(data, idx, dims, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get(dims[0]), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get(dims[1]), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPoisition\n      point = seriesModel.getMarkerPosition(data.getValues(dims, idx));\n    } else {\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      var pt = [x, y];\n      coordSys.clampData && coordSys.clampData(pt, pt);\n      point = coordSys.dataToPoint(pt, true);\n    }\n\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n\n      if (isInifinity(x)) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[dims[0] === 'x0' ? 0 : 1]);\n      } else if (isInifinity(y)) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[dims[1] === 'y0' ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  return point;\n}\n\nvar dimPermutations = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']];\n\nvar MarkAreaView =\n/** @class */\nfunction (_super) {\n  __extends(MarkAreaView, _super);\n\n  function MarkAreaView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkAreaView.type;\n    return _this;\n  }\n\n  MarkAreaView.prototype.updateTransform = function (markAreaModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var maModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markArea');\n\n      if (maModel) {\n        var areaData_1 = maModel.getData();\n        areaData_1.each(function (idx) {\n          var points = map(dimPermutations, function (dim) {\n            return getSingleMarkerEndPoint(areaData_1, idx, dim, seriesModel, api);\n          }); // Layout\n\n          areaData_1.setItemLayout(idx, points);\n          var el = areaData_1.getItemGraphicEl(idx);\n          el.setShape('points', points);\n        });\n      }\n    }, this);\n  };\n\n  MarkAreaView.prototype.renderSeries = function (seriesModel, maModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var areaGroupMap = this.markerGroupMap;\n    var polygonGroup = areaGroupMap.get(seriesId) || areaGroupMap.set(seriesId, {\n      group: new graphic.Group()\n    });\n    this.group.add(polygonGroup.group);\n    this.markKeep(polygonGroup);\n    var areaData = createList(coordSys, seriesModel, maModel); // Line data for tooltip and formatter\n\n    maModel.setData(areaData); // Update visual and layout of line\n\n    areaData.each(function (idx) {\n      // Layout\n      var points = map(dimPermutations, function (dim) {\n        return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\n      });\n      var xAxisScale = coordSys.getAxis('x').scale;\n      var yAxisScale = coordSys.getAxis('y').scale;\n      var xAxisExtent = xAxisScale.getExtent();\n      var yAxisExtent = yAxisScale.getExtent();\n      var xPointExtent = [xAxisScale.parse(areaData.get('x0', idx)), xAxisScale.parse(areaData.get('x1', idx))];\n      var yPointExtent = [yAxisScale.parse(areaData.get('y0', idx)), yAxisScale.parse(areaData.get('y1', idx))];\n      numberUtil.asc(xPointExtent);\n      numberUtil.asc(yPointExtent);\n      var overlapped = !(xAxisExtent[0] > xPointExtent[1] || xAxisExtent[1] < xPointExtent[0] || yAxisExtent[0] > yPointExtent[1] || yAxisExtent[1] < yPointExtent[0]); // If none of the area is inside coordSys, allClipped is set to be true\n      // in layout so that label will not be displayed. See #12591\n\n      var allClipped = !overlapped;\n      areaData.setItemLayout(idx, {\n        points: points,\n        allClipped: allClipped\n      });\n      var style = areaData.getItemModel(idx).getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n\n      if (!style.fill) {\n        style.fill = color;\n\n        if (typeof style.fill === 'string') {\n          style.fill = colorUtil.modifyAlpha(style.fill, 0.4);\n        }\n      }\n\n      if (!style.stroke) {\n        style.stroke = color;\n      } // Visual\n\n\n      areaData.setItemVisual(idx, 'style', style);\n    });\n    areaData.diff(inner(polygonGroup).data).add(function (idx) {\n      var layout = areaData.getItemLayout(idx);\n\n      if (!layout.allClipped) {\n        var polygon = new graphic.Polygon({\n          shape: {\n            points: layout.points\n          }\n        });\n        areaData.setItemGraphicEl(idx, polygon);\n        polygonGroup.group.add(polygon);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(oldIdx);\n      var layout = areaData.getItemLayout(newIdx);\n\n      if (!layout.allClipped) {\n        if (polygon) {\n          graphic.updateProps(polygon, {\n            shape: {\n              points: layout.points\n            }\n          }, maModel, newIdx);\n        } else {\n          polygon = new graphic.Polygon({\n            shape: {\n              points: layout.points\n            }\n          });\n        }\n\n        areaData.setItemGraphicEl(newIdx, polygon);\n        polygonGroup.group.add(polygon);\n      } else if (polygon) {\n        polygonGroup.group.remove(polygon);\n      }\n    }).remove(function (idx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(idx);\n      polygonGroup.group.remove(polygon);\n    }).execute();\n    areaData.eachItemGraphicEl(function (polygon, idx) {\n      var itemModel = areaData.getItemModel(idx);\n      var style = areaData.getItemVisual(idx, 'style');\n      polygon.useStyle(areaData.getItemVisual(idx, 'style'));\n      setLabelStyle(polygon, getLabelStatesModels(itemModel), {\n        labelFetcher: maModel,\n        labelDataIndex: idx,\n        defaultText: areaData.getName(idx) || '',\n        inheritColor: typeof style.fill === 'string' ? colorUtil.modifyAlpha(style.fill, 1) : '#000'\n      });\n      setStatesStylesFromModel(polygon, itemModel);\n      enableHoverEmphasis(polygon);\n      getECData(polygon).dataModel = maModel;\n    });\n    inner(polygonGroup).data = areaData;\n    polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkAreaView.type = 'markArea';\n  return MarkAreaView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, maModel) {\n  var coordDimsInfos;\n  var areaData;\n  var dims = ['x0', 'y0', 'x1', 'y1'];\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var data = seriesModel.getData();\n      var info = data.getDimensionInfo(data.mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return defaults({\n        name: coordDim\n      }, info);\n    });\n    areaData = new List(map(dims, function (dim, idx) {\n      return {\n        name: dim,\n        type: coordDimsInfos[idx % 2].type\n      };\n    }), maModel);\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n    areaData = new List(coordDimsInfos, maModel);\n  }\n\n  var optData = map(maModel.get('data'), curry(markAreaTransform, seriesModel, coordSys, maModel));\n\n  if (coordSys) {\n    optData = filter(optData, curry(markAreaFilter, coordSys));\n  }\n\n  var dimValueGetter = coordSys ? function (item, dimName, dataIndex, dimIndex) {\n    // TODO should convert to ParsedValue?\n    return item.coord[Math.floor(dimIndex / 2)][dimIndex % 2];\n  } : function (item) {\n    return item.value;\n  };\n  areaData.initData(optData, null, dimValueGetter);\n  areaData.hasItemOption = true;\n  return areaData;\n}\n\nexport default MarkAreaView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport checkMarkerInSeries from './checkMarkerInSeries';\nimport MarkAreaModel from './MarkAreaModel';\nimport MarkAreaView from './MarkAreaView';\nexport function install(registers) {\n  registers.registerComponentModel(MarkAreaModel);\n  registers.registerComponentView(MarkAreaView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markArea')) {\n      // Make sure markArea component is enabled\n      opt.markArea = opt.markArea || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @deprecated\n * Use `echarts/data/helper/createDimensions` instead.\n */\nimport { createHashMap, each, isString, defaults, extend, isObject, clone } from 'zrender/lib/core/util';\nimport { normalizeToArray } from '../../util/model';\nimport { guessOrdinal, BE_ORDINAL } from './sourceHelper';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source';\nimport { VISUAL_DIMENSIONS } from '../../util/types';\nimport DataDimensionInfo from '../DataDimensionInfo';\n/**\n * @see {module:echarts/test/ut/spec/data/completeDimensions}\n *\n * This method builds the relationship between:\n * + \"what the coord sys or series requires (see `sysDims`)\",\n * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimsDef` and `opt.encodeDef`)\"\n * + \"what the data source provids (see `source`)\".\n *\n * Some guess strategy will be adapted if user does not define something.\n * If no 'value' dimension specified, the first no-named dimension will be\n * named as 'value'.\n *\n * @param {Array.<string>} sysDims Necessary dimensions, like ['x', 'y'], which\n *      provides not only dim template, but also default order.\n *      properties: 'name', 'type', 'displayName'.\n *      `name` of each item provides default coord name.\n *      [{dimsDef: [string|Object, ...]}, ...] dimsDef of sysDim item provides default dim name, and\n *                                    provide dims count that the sysDim required.\n *      [{ordinalMeta}] can be specified.\n * @param {module:echarts/data/Source|Array|Object} source or data (for compatibal with pervious)\n * @param {Object} [opt]\n * @param {Array.<Object|string>} [opt.dimsDef] option.series.dimensions User defined dimensions\n *      For example: ['asdf', {name, type}, ...].\n * @param {Object|HashMap} [opt.encodeDef] option.series.encode {x: 2, y: [3, 1], tooltip: [1, 2], label: 3}\n * @param {Function} [opt.encodeDefaulter] Called if no `opt.encodeDef` exists.\n *      If not specified, auto find the next available data dim.\n *      param source {module:data/Source}\n *      param dimCount {number}\n *      return {Object} encode Never be `null/undefined`.\n * @param {string} [opt.generateCoord] Generate coord dim with the given name.\n *      If not specified, extra dim names will be:\n *      'value', 'value0', 'value1', ...\n * @param {number} [opt.generateCoordCount] By default, the generated dim name is `generateCoord`.\n *      If `generateCoordCount` specified, the generated dim names will be:\n *      `generateCoord` + 0, `generateCoord` + 1, ...\n *      can be Infinity, indicate that use all of the remain columns.\n * @param {number} [opt.dimCount] If not specified, guess by the first data item.\n * @return {Array.<module:data/DataDimensionInfo>}\n */\n\nfunction completeDimensions(sysDims, source, opt) {\n  if (!isSourceInstance(source)) {\n    source = createSourceFromSeriesDataOption(source);\n  }\n\n  opt = opt || {};\n  sysDims = (sysDims || []).slice();\n  var dimsDef = (opt.dimsDef || []).slice();\n  var dataDimNameMap = createHashMap();\n  var coordDimNameMap = createHashMap(); // let valueCandidate;\n\n  var result = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimCount); // Apply user defined dims (`name` and `type`) and init result.\n\n  for (var i = 0; i < dimCount; i++) {\n    var dimDefItemRaw = dimsDef[i];\n    var dimDefItem = dimsDef[i] = extend({}, isObject(dimDefItemRaw) ? dimDefItemRaw : {\n      name: dimDefItemRaw\n    });\n    var userDimName = dimDefItem.name;\n    var resultItem = result[i] = new DataDimensionInfo(); // Name will be applied later for avoiding duplication.\n\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      // Only if `series.dimensions` is defined in option\n      // displayName, will be set, and dimension will be diplayed vertically in\n      // tooltip by default.\n      resultItem.name = resultItem.displayName = userDimName;\n      dataDimNameMap.set(userDimName, i);\n    }\n\n    dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n    dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n  }\n\n  var encodeDef = opt.encodeDef;\n\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n\n  var encodeDefMap = createHashMap(encodeDef); // Set `coordDim` and `coordDimIndex` by `encodeDefMap` and normalize `encodeDefMap`.\n\n  encodeDefMap.each(function (dataDimsRaw, coordDim) {\n    var dataDims = normalizeToArray(dataDimsRaw).slice(); // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n    // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n    // this case.\n\n    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDefMap.set(coordDim, false);\n      return;\n    }\n\n    var validDataDims = encodeDefMap.set(coordDim, []);\n    each(dataDims, function (resultDimIdxOrName, idx) {\n      // The input resultDimIdx can be dim name or index.\n      var resultDimIdx = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(result[resultDimIdx], coordDim, idx);\n      }\n    });\n  }); // Apply templetes and default order from `sysDims`.\n\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItemRaw) {\n    var coordDim;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n    var sysDimItem;\n\n    if (isString(sysDimItemRaw)) {\n      coordDim = sysDimItemRaw;\n      sysDimItem = {};\n    } else {\n      sysDimItem = sysDimItemRaw;\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = clone(sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta; // `coordDimIndex` should not be set directly.\n\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n\n    var dataDims = encodeDefMap.get(coordDim); // negative resultDimIdx means no need to mapping.\n\n    if (dataDims === false) {\n      return;\n    }\n\n    dataDims = normalizeToArray(dataDims); // dimensions provides default dim sequences.\n\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < result.length && result[availDimIdx].coordDim != null) {\n          availDimIdx++;\n        }\n\n        availDimIdx < result.length && dataDims.push(availDimIdx++);\n      }\n    } // Apply templates.\n\n\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = result[resultDimIdx];\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      } // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n\n\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (VISUAL_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  } // Make sure the first extra dim is 'value'.\n\n\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value'; // Set dim `name` and other `coordDim` and other props.\n\n  for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n    var resultItem = result[resultDimIdx] = result[resultDimIdx] || new DataDimensionInfo();\n    var coordDim = resultItem.coordDim;\n\n    if (coordDim == null) {\n      resultItem.coordDim = genName(extra, coordDimNameMap, fromZero);\n      resultItem.coordDimIndex = 0;\n\n      if (!generateCoord || generateCoordCount <= 0) {\n        resultItem.isExtraCoord = true;\n      }\n\n      generateCoordCount--;\n    }\n\n    resultItem.name == null && (resultItem.name = genName(resultItem.coordDim, dataDimNameMap, false));\n\n    if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must // Consider the case:\n    // {\n    //    dataset: {source: [\n    //        ['2001', 123],\n    //        ['2002', 456],\n    //        ...\n    //        ['The others', 987],\n    //    ]},\n    //    series: {type: 'pie'}\n    // }\n    // The first colum should better be treated as a \"ordinal\" although it\n    // might not able to be detected as an \"ordinal\" by `guessOrdinal`.\n    || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n      resultItem.type = 'ordinal';\n    }\n  }\n\n  return result;\n} // ??? TODO\n// Originally detect dimCount by data[0]. Should we\n// optimize it to only by sysDims and dimensions and encode.\n// So only necessary dims will be initialized.\n// But\n// (1) custom series should be considered. where other dims\n// may be visited.\n// (2) sometimes user need to calcualte bubble size or use visualMap\n// on other dimensions besides coordSys needed.\n// So, dims that is not used by system, should be shared in storage?\n\n\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  // Note that the result dimCount should not small than columns count\n  // of data, otherwise `dataDimNameMap` checking will be incorrect.\n  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef;\n\n    if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n    }\n  });\n  return dimCount;\n}\n\nfunction genName(name, map, fromZero) {\n  if (fromZero || map.get(name) != null) {\n    var i = 0;\n\n    while (map.get(name + i) != null) {\n      i++;\n    }\n\n    name += i;\n  }\n\n  map.set(name, true);\n  return name;\n}\n\nexport default completeDimensions;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Substitute `completeDimensions`.\n * `completeDimensions` is to be deprecated.\n */\nimport completeDimensions from './completeDimensions';\n/**\n * @param opt.coordDimensions\n * @param opt.dimensionsDefine By default `source.dimensionsDefine` Overwrite source define.\n * @param opt.encodeDefine By default `source.encodeDefine` Overwrite source define.\n * @param opt.encodeDefaulter Make default encode if user not specified.\n */\n\nexport default function createDimensions( // TODO: TYPE completeDimensions type\nsource, opt) {\n  opt = opt || {};\n  return completeDimensions(opt.coordDimensions || [], source, {\n    // FIXME:TS detect whether source then call `.dimensionsDefine` and `.encodeDefine`?\n    dimsDef: opt.dimensionsDefine || source.dimensionsDefine,\n    encodeDef: opt.encodeDefine || source.encodeDefine,\n    dimCount: opt.dimensionsCount,\n    encodeDefaulter: opt.encodeDefaulter,\n    generateCoord: opt.generateCoord,\n    generateCoordCount: opt.generateCoordCount\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\nimport { createHashMap, retrieve, each } from 'zrender/lib/core/util';\nimport { SINGLE_REFERRING } from '../util/model';\n/**\n * @class\n * For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // The index of the first category axis in `coordSysDims`.\n *     // `null/undefined` means no category axis exists.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\n\nvar CoordSysInfo =\n/** @class */\nfunction () {\n  function CoordSysInfo(coordSysName) {\n    this.coordSysDims = [];\n    this.axisMap = createHashMap();\n    this.categoryAxisMap = createHashMap();\n    this.coordSysName = coordSysName;\n  }\n\n  return CoordSysInfo;\n}();\n\nexport function getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!xAxisModel) {\n        throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n      }\n\n      if (!yAxisModel) {\n        throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n      }\n    }\n\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!singleAxisModel) {\n        throw new Error('singleAxis should be specified.');\n      }\n    }\n\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!angleAxisModel) {\n        throw new Error('angleAxis option not found');\n      }\n\n      if (!radiusAxisModel) {\n        throw new Error('radiusAxis option not found');\n      }\n    }\n\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n\n      if (isCategory(axisModel)) {\n        categoryAxisMap.set(axisDim, axisModel);\n\n        if (result.firstCategoryDimIndex == null) {\n          result.firstCategoryDimIndex = index;\n        }\n      }\n    });\n  }\n};\n\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport List from '../../data/List';\nimport createDimensions from '../../data/helper/createDimensions';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper';\nimport { getDataItemValue } from '../../util/model';\nimport CoordinateSystem from '../../core/CoordinateSystem';\nimport { getCoordSysInfoBySeries } from '../../model/referHelper';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../../data/Source';\nimport { enableDataStack } from '../../data/helper/dataStackHelper';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper';\nimport { SOURCE_FORMAT_ORIGINAL } from '../../util/types';\n\nfunction createListFromArray(source, seriesModel, opt) {\n  opt = opt || {};\n\n  if (!isSourceInstance(source)) {\n    source = createSourceFromSeriesDataOption(source);\n  }\n\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs;\n\n  if (coordSysInfo && coordSysInfo.coordSysDims) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType); // dimInfo.stackable = isStackable(axisType);\n      }\n\n      return dimInfo;\n    });\n  }\n\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n\n  var useEncodeDefaulter = opt.useEncodeDefaulter;\n  var dimInfoList = createDimensions(source, {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefaulter: zrUtil.isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null\n  });\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n\n      if (opt.createInvertedIndices) {\n        dimInfo.createInvertedIndices = true;\n      }\n    }\n\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n\n  var stackCalculationInfo = enableDataStack(seriesModel, dimInfoList);\n  var list = new List(dimInfoList, seriesModel);\n  list.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  list.hasItemOption = false;\n  list.initData(source, null, dimValueGetter);\n  return list;\n}\n\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return sampleItem != null && !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\n\nfunction firstDataNotNull(data) {\n  var i = 0;\n\n  while (i < data.length && data[i] == null) {\n    i++;\n  }\n\n  return data[i];\n}\n\nexport default createListFromArray;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createListFromArray from '../helper/createListFromArray';\nimport SeriesModel from '../../model/Series';\nimport { createSymbol } from '../../util/symbol';\nimport { Group } from '../../util/graphic';\n\nvar LineSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LineSeriesModel, _super);\n\n  function LineSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LineSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  LineSeriesModel.prototype.getInitialData = function (option) {\n    if (process.env.NODE_ENV !== 'production') {\n      var coordSys = option.coordinateSystem;\n\n      if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n        throw new Error('Line not support coordinateSystem besides cartesian and polar');\n      }\n    }\n\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  LineSeriesModel.prototype.getLegendIcon = function (opt) {\n    var group = new Group();\n    var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n    group.add(line);\n    line.setStyle(opt.lineStyle);\n    var visualType = this.getData().getVisual('symbol');\n    var visualRotate = this.getData().getVisual('symbolRotate');\n    var symbolType = visualType === 'none' ? 'circle' : visualType; // Symbol size is 80% when there is a line\n\n    var size = opt.itemHeight * 0.8;\n    var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n    group.add(symbol);\n    symbol.setStyle(opt.itemStyle);\n    var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n    symbol.rotation = symbolRotate * Math.PI / 180;\n    symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n    if (symbolType.indexOf('empty') > -1) {\n      symbol.style.stroke = symbol.style.fill;\n      symbol.style.fill = '#fff';\n      symbol.style.lineWidth = 2;\n    }\n\n    return group;\n  };\n\n  LineSeriesModel.type = 'series.line';\n  LineSeriesModel.dependencies = ['grid', 'polar'];\n  LineSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 3,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    clip: true,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    endLabel: {\n      show: false,\n      valueAnimation: true,\n      distance: 8\n    },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    emphasis: {\n      scale: true,\n      lineStyle: {\n        width: 'bolder'\n      }\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity\n  };\n  return LineSeriesModel;\n}(SeriesModel);\n\nexport default LineSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider';\nimport { isArray } from 'zrender/lib/core/util';\n/**\n * @return label string. Not null/undefined\n */\n\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n\n  var vals = [];\n\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimInfo = data.getDimensionInfo(labelDims[i]);\n\n    if (dimInfo) {\n      vals.push(interpolatedValue[dimInfo.index]);\n    }\n  }\n\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol } from '../../util/symbol';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { enterEmphasis, leaveEmphasis, enableHoverEmphasis } from '../../util/states';\nimport { parsePercent } from '../../util/number';\nimport { getDefaultLabel } from './labelHelper';\nimport { extend, isArray, retrieve2 } from 'zrender/lib/core/util';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\n\nvar Symbol =\n/** @class */\nfunction (_super) {\n  __extends(Symbol, _super);\n\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n\n    _this.updateData(data, idx, seriesScope, opts);\n\n    return _this;\n  }\n\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll(); // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    }); // Rewrite drift method\n\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n\n\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n\n\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n\n\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n\n\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n\n\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n\n  Symbol.prototype.setDraggable = function (draggable) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n\n\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n    }\n\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n\n    if (disableAnimation) {\n      // Must stop remove animation manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('remove');\n    }\n\n    this._seriesModel = seriesModel;\n  };\n\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n    }\n\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = data.getItemVisual(idx, 'symbolOffset') || 0;\n\n    if (symbolOffset) {\n      if (!isArray(symbolOffset)) {\n        symbolOffset = [symbolOffset, symbolOffset];\n      }\n\n      symbolPath.x = parsePercent(symbolOffset[0], symbolSize[0]);\n      symbolPath.y = parsePercent(retrieve2(symbolOffset[1], symbolOffset[0]) || 0, symbolSize[1]);\n    }\n\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      } // Disable decal because symbol scale will been applied on the decal.\n\n\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    }); // Do not execute util needed.\n\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n\n    if (hoverScale) {\n      var scaleRatio = Math.max(1.1, 3 / this._sizeY);\n      emphasisState.scaleX = this._sizeX * scaleRatio;\n      emphasisState.scaleY = this._sizeY * scaleRatio;\n    }\n\n    this.setSymbolScale(1);\n    enableHoverEmphasis(this, focus, blurScope);\n  };\n\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n\n  Symbol.prototype.fadeOut = function (cb, opt) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = this._seriesModel;\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\n\n    this.silent = symbolPath.silent = true; // Not show text when animating\n\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n\n  Symbol.getSymbolSize = function (data, idx) {\n    var symbolSize = data.getItemVisual(idx, 'symbolSize');\n    return isArray(symbolSize) ? symbolSize.slice() : [+symbolSize, +symbolSize];\n  };\n\n  return Symbol;\n}(graphic.Group);\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport SymbolClz from './Symbol';\nimport { isObject } from 'zrender/lib/core/util';\nimport { getLabelStatesModels } from '../../label/labelStyle';\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar SymbolDraw =\n/** @class */\nfunction () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    }; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n\n    if (!oldData) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      if (!symbolEl) {\n        symbolEl = new SymbolCtor(data, newIdx);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      } // Add back\n\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      });\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n\n  ;\n\n  SymbolDraw.prototype.isPersistent = function () {\n    return true;\n  };\n\n  ;\n\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n\n    var data = this._data;\n\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    opt = normalizeUpdateOpt(opt);\n\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n      }\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data; // Incremental model do not have this._data.\n\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        });\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n\n  ;\n  return SymbolDraw;\n}();\n\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper';\nimport { map } from 'zrender/lib/core/util';\nexport function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked = false;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[0] = stackResultDim;\n  }\n\n  if (isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n      // Both positive\n      if (extent[0] > 0) {\n        valueStart = extent[0];\n      } // Both negative\n      else if (extent[1] < 0) {\n          valueStart = extent[1];\n        } // If is one positive, and one negative, onZero shall be true\n\n    }\n\n  return valueStart;\n}\n\nexport function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util';\n/* global Float32Array */\n\nvar supportFloat32Array = typeof Float32Array !== 'undefined';\nvar Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\nexport function createFloat32Array(arg) {\n  if (isArray(arg)) {\n    // Return self directly if don't support TypedArray.\n    return supportFloat32Array ? new Float32Array(arg) : arg;\n  } // Else is number\n\n\n  return new Float32ArrayCtor(arg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper';\nimport { createFloat32Array } from '../../util/vendor';\n\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nexport default function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // let newIdList = newData.mapArray(newData.getId);\n  // let oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin); // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  var oldPoints = oldData.getLayout('points') || [];\n  var newPoints = newData.getLayout('points') || [];\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true;\n    var oldIdx2 = void 0;\n    var newIdx2 = void 0; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        oldIdx2 = diffItem.idx * 2;\n        newIdx2 = diffItem.idx1 * 2;\n        var currentX = oldPoints[oldIdx2];\n        var currentY = oldPoints[oldIdx2 + 1];\n        var nextX = newPoints[newIdx2];\n        var nextY = newPoints[newIdx2 + 1]; // If previous data is NaN, use next point directly\n\n        if (isNaN(currentX) || isNaN(currentY)) {\n          currentX = nextX;\n          currentY = nextY;\n        }\n\n        currPoints.push(currentX, currentY);\n        nextPoints.push(nextX, nextY);\n        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var newIdx = diffItem.idx;\n        var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n        var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n        newIdx2 = newIdx * 2;\n        currPoints.push(oldPt[0], oldPt[1]);\n        nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n        var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n        currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(newIdx));\n        break;\n\n      case '-':\n        pointAdded = false;\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var len = currPoints.length;\n  var sortedCurrPoints = createFloat32Array(len);\n  var sortedNextPoints = createFloat32Array(len);\n  var sortedCurrStackedPoints = createFloat32Array(len);\n  var sortedNextStackedPoints = createFloat32Array(len);\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    var i2 = i * 2;\n    var idx2 = idx * 2;\n    sortedCurrPoints[i2] = currPoints[idx2];\n    sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n    sortedNextPoints[i2] = nextPoints[idx2];\n    sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n    sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n    sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n    sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n    sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // Poly path support NaN point\n\nimport Path from 'zrender/lib/graphic/Path';\nimport PathProxy from 'zrender/lib/core/PathProxy';\nimport { cubicRootAt, cubicAt } from 'zrender/lib/core/curve';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n  var prevX;\n  var prevY;\n  var cpx0;\n  var cpy0;\n  var cpx1;\n  var cpy1;\n  var idx = start;\n  var k = 0;\n\n  for (; k < segLen; k++) {\n    var x = points[idx * 2];\n    var y = points[idx * 2 + 1];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(x, y)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n      cpx0 = x;\n      cpy0 = y;\n    } else {\n      var dx = x - prevX;\n      var dy = y - prevY; // Ignore tiny segment.\n\n      if (dx * dx + dy * dy < 0.5) {\n        idx += dir;\n        continue;\n      }\n\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextX = points[nextIdx * 2];\n        var nextY = points[nextIdx * 2 + 1];\n        var tmpK = k + 1;\n\n        if (connectNulls) {\n          // Find next point not null\n          while (isPointNull(nextX, nextY) && tmpK < segLen) {\n            tmpK++;\n            nextIdx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var vx = 0;\n        var vy = 0;\n        var nextCpx0 = void 0;\n        var nextCpy0 = void 0; // Is last point\n\n        if (tmpK >= segLen || isPointNull(nextX, nextY)) {\n          cpx1 = x;\n          cpy1 = y;\n        } else {\n          vx = nextX - prevX;\n          vy = nextY - prevY;\n          var dx0 = x - prevX;\n          var dx1 = nextX - x;\n          var dy0 = y - prevY;\n          var dy1 = nextY - y;\n          var lenPrevSeg = void 0;\n          var lenNextSeg = void 0;\n\n          if (smoothMonotone === 'x') {\n            lenPrevSeg = Math.abs(dx0);\n            lenNextSeg = Math.abs(dx1);\n            cpx1 = x - lenPrevSeg * smooth;\n            cpy1 = y;\n            nextCpx0 = x + lenPrevSeg * smooth;\n            nextCpy0 = y;\n          } else if (smoothMonotone === 'y') {\n            lenPrevSeg = Math.abs(dy0);\n            lenNextSeg = Math.abs(dy1);\n            cpx1 = x;\n            cpy1 = y - lenPrevSeg * smooth;\n            nextCpx0 = x;\n            nextCpy0 = y + lenPrevSeg * smooth;\n          } else {\n            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1); // Use ratio of seg length\n\n            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n            cpy1 = y - vy * smooth * (1 - ratioNextSeg); // cp0 of next segment\n\n            nextCpx0 = x + vx * smooth * ratioNextSeg;\n            nextCpy0 = y + vy * smooth * ratioNextSeg; // Smooth constraint between point and next point.\n            // Avoid exceeding extreme after smoothing.\n\n            nextCpx0 = mathMin(nextCpx0, mathMax(nextX, x));\n            nextCpy0 = mathMin(nextCpy0, mathMax(nextY, y));\n            nextCpx0 = mathMax(nextCpx0, mathMin(nextX, x));\n            nextCpy0 = mathMax(nextCpy0, mathMin(nextY, y)); // Reclaculate cp1 based on the adjusted cp0 of next seg.\n\n            vx = nextCpx0 - x;\n            vy = nextCpy0 - y;\n            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n            cpy1 = y - vy * lenPrevSeg / lenNextSeg; // Smooth constraint between point and prev point.\n            // Avoid exceeding extreme after smoothing.\n\n            cpx1 = mathMin(cpx1, mathMax(prevX, x));\n            cpy1 = mathMin(cpy1, mathMax(prevY, y));\n            cpx1 = mathMax(cpx1, mathMin(prevX, x));\n            cpy1 = mathMax(cpy1, mathMin(prevY, y)); // Adjust next cp0 again.\n\n            vx = x - cpx1;\n            vy = y - cpy1;\n            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n          }\n        }\n\n        ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n        cpx0 = nextCpx0;\n        cpy0 = nextCpy0;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n\n    prevX = x;\n    prevY = y;\n    idx += dir;\n  }\n\n  return k;\n}\n\nvar ECPolylineShape =\n/** @class */\nfunction () {\n  function ECPolylineShape() {\n    this.smooth = 0;\n    this.smoothConstraint = true;\n  }\n\n  return ECPolylineShape;\n}();\n\nvar ECPolyline =\n/** @class */\nfunction (_super) {\n  __extends(ECPolyline, _super);\n\n  function ECPolyline(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polyline';\n    return _this;\n  }\n\n  ECPolyline.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECPolyline.prototype.getDefaultShape = function () {\n    return new ECPolylineShape();\n  };\n\n  ECPolyline.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length / 2; // const result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  };\n\n  ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n    if (!this.path) {\n      this.createPathProxy();\n      this.buildPath(this.path, this.shape);\n    }\n\n    var path = this.path;\n    var data = path.data;\n    var CMD = PathProxy.CMD;\n    var x0;\n    var y0;\n    var isDimX = dim === 'x';\n    var roots = [];\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n      var x = void 0;\n      var y = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var x3 = void 0;\n      var y3 = void 0;\n      var t = void 0;\n\n      switch (cmd) {\n        case CMD.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          break;\n\n        case CMD.L:\n          x = data[i++];\n          y = data[i++];\n          t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n\n          if (t <= 1 && t >= 0) {\n            var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n            return isDimX ? [xOrY, val] : [val, xOrY];\n          }\n\n          x0 = x;\n          y0 = y;\n          break;\n\n        case CMD.C:\n          x = data[i++];\n          y = data[i++];\n          x2 = data[i++];\n          y2 = data[i++];\n          x3 = data[i++];\n          y3 = data[i++];\n          var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n\n          if (nRoot > 0) {\n            for (var i_1 = 0; i_1 < nRoot; i_1++) {\n              var t_1 = roots[i_1];\n\n              if (t_1 <= 1 && t_1 >= 0) {\n                var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                return isDimX ? [xOrY, val] : [val, xOrY];\n              }\n            }\n          }\n\n          x0 = x3;\n          y0 = y3;\n          break;\n      }\n    }\n  };\n\n  return ECPolyline;\n}(Path);\n\nexport { ECPolyline };\n\nvar ECPolygonShape =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygonShape, _super);\n\n  function ECPolygonShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return ECPolygonShape;\n}(ECPolylineShape);\n\nvar ECPolygon =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygon, _super);\n\n  function ECPolygon(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polygon';\n    return _this;\n  }\n\n  ECPolygon.prototype.getDefaultShape = function () {\n    return new ECPolygonShape();\n  };\n\n  ECPolygon.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length / 2;\n    var smoothMonotone = shape.smoothMonotone;\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  };\n\n  return ECPolygon;\n}(Path);\n\nexport { ECPolygon };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport { round } from '../../util/number';\n\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n  x = Math.floor(x);\n  width = Math.round(width);\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n\n      clipPath.shape.height = 0;\n    }\n\n    var duringCb = typeof during === 'function' ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n\n  return null;\n}\n\nexport { createGridClipPath, createPolarClipPath, createClipPath };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // FIXME step not support polar\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SymbolDraw from '../helper/SymbolDraw';\nimport SymbolClz from '../helper/Symbol';\nimport lineAnimationDiff from './lineAnimationDiff';\nimport * as graphic from '../../util/graphic';\nimport * as modelUtil from '../../util/model';\nimport { ECPolyline, ECPolygon } from './poly';\nimport ChartView from '../../view/Chart';\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper';\nimport { createGridClipPath, createPolarClipPath } from '../helper/createClipPathFromCoordSys';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport { setStatesStylesFromModel, setStatesFlag, enableHoverEmphasis } from '../../util/states';\nimport { setLabelStyle, getLabelStatesModels, labelInner } from '../../label/labelStyle';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper';\nimport { getECData } from '../../util/innerStore';\nimport { createFloat32Array } from '../../util/vendor';\nimport { convertToColorString } from '../../util/format';\n\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    if (points1[i] !== points2[i]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction bboxFromPoints(points) {\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n\n  for (var i = 0; i < points.length;) {\n    var x = points[i++];\n    var y = points[i++];\n\n    if (!isNaN(x)) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n    }\n\n    if (!isNaN(y)) {\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n\n  return [[minX, minY], [maxX, maxY]];\n}\n\nfunction getBoundingDiff(points1, points2) {\n  var _a = bboxFromPoints(points1),\n      min1 = _a[0],\n      max1 = _a[1];\n\n  var _b = bboxFromPoints(points2),\n      min2 = _b[0],\n      max2 = _b[1]; // Get a max value from each corner of two boundings.\n\n\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.5 : 0;\n}\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var len = data.count();\n  var points = createFloat32Array(len * 2);\n\n  for (var idx = 0; idx < len; idx++) {\n    var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n    points[idx * 2] = pt[0];\n    points[idx * 2 + 1] = pt[1];\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n  var i = 0;\n  var stepPt = [];\n  var pt = [];\n  var nextPt = [];\n\n  for (; i < points.length - 2; i += 2) {\n    nextPt[0] = points[i + 2];\n    nextPt[1] = points[i + 3];\n    pt[0] = points[i];\n    pt[1] = points[i + 1];\n    stepPoints.push(pt[0], pt[1]);\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        break;\n\n      case 'middle':\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        stepPoints.push(stepPt2[0], stepPt2[1]);\n        break;\n\n      default:\n        // default is start\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n    }\n  } // Last points\n\n\n  stepPoints.push(points[i++], points[i++]);\n  return stepPoints;\n}\n\nfunction getVisualGradient(data, coordSys) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style is only supported on cartesian2d.');\n    }\n\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimIndex = visualMetaList[i].dimension;\n    var dimName = data.dimensions[dimIndex];\n    var dimInfo = data.getDimensionInfo(dimName);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style only support x or y dimension.');\n    }\n\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoord mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    return {\n      offset: 0,\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value, true)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStops[0].coord - tinyExtent;\n  var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStops, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStops.push({\n    offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStops.unshift({\n    offset: stopLen ? colorStops[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  }); // zrUtil.each(colorStops, function (colorStop) {\n  //     // Make sure each offset has rounded px to avoid not sharp edge\n  //     colorStop.offset = (Math.round(colorStop.offset * (end - start) + start) - start) / (end - start);\n  // });\n\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStops, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n    labelMap[ordinalNumber] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n\nfunction getLastIndexNotNull(points) {\n  var len = points.length / 2;\n\n  for (; len > 0; len--) {\n    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n      break;\n    }\n  }\n\n  return len - 1;\n}\n\nfunction getPointAtIndex(points, idx) {\n  return [points[idx * 2], points[idx * 2 + 1]];\n}\n\nfunction getIndexRange(points, xOrY, dim) {\n  var len = points.length / 2;\n  var dimIdx = dim === 'x' ? 0 : 1;\n  var a;\n  var b;\n  var prevIndex = 0;\n  var nextIndex = -1;\n\n  for (var i = 0; i < len; i++) {\n    b = points[i * 2 + dimIdx];\n\n    if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n      continue;\n    }\n\n    if (i === 0) {\n      a = b;\n      continue;\n    }\n\n    if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n      nextIndex = i;\n      break;\n    }\n\n    prevIndex = i;\n    a = b;\n  }\n\n  return {\n    range: [prevIndex, nextIndex],\n    t: (xOrY - a) / (b - a)\n  };\n}\n\nfunction createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    var endLabelModel_1 = seriesModel.getModel('endLabel');\n    var showEndLabel = endLabelModel_1.get('show');\n    var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n    var data_1 = seriesModel.getData();\n    var labelAnimationRecord_1 = {\n      lastFrameIndex: 0\n    };\n    var during = showEndLabel ? function (percent, clipRect) {\n      lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n    } : null;\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n      var endLabel = lineView._endLabel;\n\n      if (endLabel && hasAnimation) {\n        if (labelAnimationRecord_1.originalX != null) {\n          endLabel.attr({\n            x: labelAnimationRecord_1.originalX,\n            y: labelAnimationRecord_1.originalY\n          });\n        }\n      }\n    }, during); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    } // Set to the final frame. To make sure label layout is right.\n\n\n    if (during) {\n      during(1, clipPath);\n    }\n\n    return clipPath;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      if (seriesModel.get(['endLabel', 'show'])) {\n        console.warn('endLabel is not supported for lines in polar systems.');\n      }\n    }\n\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nfunction getEndLabelStateSpecified(endLabelModel, coordSys) {\n  var baseAxis = coordSys.getBaseAxis();\n  var isHorizontal = baseAxis.isHorizontal();\n  var isBaseInversed = baseAxis.inverse;\n  var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n  var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n  return {\n    normal: {\n      align: endLabelModel.get('align') || align,\n      verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n    }\n  };\n}\n\nvar LineView =\n/** @class */\nfunction (_super) {\n  __extends(LineView, _super);\n\n  function LineView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  LineView.prototype.init = function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  };\n\n  LineView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.getLayout('points') || [];\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r += 0.5;\n      }\n    }\n\n    this._clipShapeForSymbol = clipShapeForSymbol;\n    var visualColor = getVisualGradient(data, coordSys) || data.getVisual('style')[data.getVisual('drawType')]; // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n\n        if (stackedOnPoints) {\n          stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n        }\n      }\n\n      polyline = this._newPolyline(points);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      } // Update clipPath\n\n\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, false, seriesModel)); // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n\n            if (stackedOnPoints) {\n              stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n            }\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var focus = seriesModel.get(['emphasis', 'focus']);\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n\n    if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n      var emphasisLineStyle = polyline.getState('emphasis').style;\n      emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n    } // Needs seriesIndex for focus\n\n\n    getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n    enableHoverEmphasis(polyline, focus, blurScope);\n    var smooth = getSmooth(seriesModel.get('smooth'));\n    var smoothMonotone = seriesModel.get('smoothMonotone');\n    var connectNulls = seriesModel.get('connectNulls');\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: smoothMonotone,\n      connectNulls: connectNulls\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel',\n        decal: data.getVisual('style').decal\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n      setStatesStylesFromModel(polygon, seriesModel, 'areaStyle'); // Needs seriesIndex for focus\n\n      getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n      enableHoverEmphasis(polygon, focus, blurScope);\n    }\n\n    var changePolyState = function (toState) {\n      _this._changePolyState(toState);\n    };\n\n    data.eachItemGraphicEl(function (el) {\n      // Switch polyline / polygon state if element changed its state.\n      el && (el.onHoverStateChange = changePolyState);\n    });\n    this._polyline.onHoverStateChange = changePolyState;\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n  };\n\n  LineView.prototype.dispose = function () {};\n\n  LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('emphasis');\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var points = data.getLayout('points');\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var x = points[dataIndex * 2];\n        var y = points[dataIndex * 2 + 1];\n\n        if (isNaN(x) || isNaN(y)) {\n          // Null data\n          return;\n        } // fix #11360: should't draw symbol outside clipShapeForSymbol\n\n\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n          return;\n        }\n\n        var zlevel = seriesModel.get('zlevel');\n        var z = seriesModel.get('z');\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.x = x;\n        symbol.y = y;\n        symbol.setZ(zlevel, z); // ensure label text of the temporary symbol is in front of line and area polygon\n\n        var symbolLabel = symbol.getSymbolPath().getTextContent();\n\n        if (symbolLabel) {\n          symbolLabel.zlevel = zlevel;\n          symbolLabel.z = z;\n          symbolLabel.z2 = this._polyline.z2 + 1;\n        }\n\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('normal');\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype._changePolyState = function (toState) {\n    var polygon = this._polygon;\n    setStatesFlag(this._polyline, toState);\n    polygon && setStatesFlag(polygon, toState);\n  };\n\n  LineView.prototype._newPolyline = function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new ECPolyline({\n      shape: {\n        points: points\n      },\n      segmentIgnoreThreshold: 2,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  };\n\n  LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new ECPolygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      segmentIgnoreThreshold: 2\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  };\n\n  LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n    var isHorizontalOrRadial;\n    var isCoordSysPolar;\n    var baseAxis = coordSys.getBaseAxis();\n    var isAxisInverse = baseAxis.inverse;\n\n    if (coordSys.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n      isCoordSysPolar = false;\n    } else if (coordSys.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n      isCoordSysPolar = true;\n    }\n\n    var seriesModel = data.hostModel;\n    var seriesDuration = seriesModel.get('animationDuration');\n\n    if (typeof seriesDuration === 'function') {\n      seriesDuration = seriesDuration(null);\n    }\n\n    var seriesDalay = seriesModel.get('animationDelay') || 0;\n    var seriesDalayValue = typeof seriesDalay === 'function' ? seriesDalay(null) : seriesDalay;\n    data.eachItemGraphicEl(function (symbol, idx) {\n      var el = symbol;\n\n      if (el) {\n        var point = [symbol.x, symbol.y];\n        var start = void 0;\n        var end = void 0;\n        var current = void 0;\n\n        if (clipShape) {\n          if (isCoordSysPolar) {\n            var polarClip = clipShape;\n            var coord = coordSys.pointToCoord(point);\n\n            if (isHorizontalOrRadial) {\n              start = polarClip.startAngle;\n              end = polarClip.endAngle;\n              current = -coord[1] / 180 * Math.PI;\n            } else {\n              start = polarClip.r0;\n              end = polarClip.r;\n              current = coord[0];\n            }\n          } else {\n            var gridClip = clipShape;\n\n            if (isHorizontalOrRadial) {\n              start = gridClip.x;\n              end = gridClip.x + gridClip.width;\n              current = symbol.x;\n            } else {\n              start = gridClip.y + gridClip.height;\n              end = gridClip.y;\n              current = symbol.y;\n            }\n          }\n        }\n\n        var ratio = end === start ? 0 : (current - start) / (end - start);\n\n        if (isAxisInverse) {\n          ratio = 1 - ratio;\n        }\n\n        var delay = typeof seriesDalay === 'function' ? seriesDalay(idx) : seriesDuration * ratio + seriesDalayValue;\n        var symbolPath = el.getSymbolPath();\n        var text = symbolPath.getTextContent();\n        el.attr({\n          scaleX: 0,\n          scaleY: 0\n        });\n        el.animateTo({\n          scaleX: 1,\n          scaleY: 1\n        }, {\n          duration: 200,\n          delay: delay\n        });\n\n        if (text) {\n          text.animateFrom({\n            style: {\n              opacity: 0\n            }\n          }, {\n            duration: 300,\n            delay: delay\n          });\n        }\n\n        symbolPath.disableLabelAnimation = true;\n      }\n    });\n  };\n\n  LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n    var endLabelModel = seriesModel.getModel('endLabel');\n\n    if (endLabelModel.get('show')) {\n      var data_2 = seriesModel.getData();\n      var polyline = this._polyline;\n      var endLabel = this._endLabel;\n\n      if (!endLabel) {\n        endLabel = this._endLabel = new graphic.Text({\n          z2: 200 // should be higher than item symbol\n\n        });\n        endLabel.ignoreClip = true;\n        polyline.setTextContent(this._endLabel);\n        polyline.disableLabelAnimation = true;\n      } // Find last non-NaN data to display data\n\n\n      var dataIndex = getLastIndexNotNull(data_2.getLayout('points'));\n\n      if (dataIndex >= 0) {\n        setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n          inheritColor: inheritColor,\n          labelFetcher: seriesModel,\n          labelDataIndex: dataIndex,\n          defaultText: function (dataIndex, opt, interpolatedValue) {\n            return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n          },\n          enableTextSetter: true\n        }, getEndLabelStateSpecified(endLabelModel, coordSys));\n        polyline.textConfig.position = null;\n      }\n    } else if (this._endLabel) {\n      this._polyline.removeTextContent();\n\n      this._endLabel = null;\n    }\n  };\n\n  LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n    var endLabel = this._endLabel;\n    var polyline = this._polyline;\n\n    if (endLabel) {\n      // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n      // The label is not prepared at this time.\n      if (percent < 1 && animationRecord.originalX == null) {\n        animationRecord.originalX = endLabel.x;\n        animationRecord.originalY = endLabel.y;\n      }\n\n      var points = data.getLayout('points');\n      var seriesModel = data.hostModel;\n      var connectNulls = seriesModel.get('connectNulls');\n      var precision = endLabelModel.get('precision');\n      var distance = endLabelModel.get('distance') || 0;\n      var baseAxis = coordSys.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isBaseInversed = baseAxis.inverse;\n      var clipShape = clipRect.shape;\n      var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n      var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n      var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n      var dim = isHorizontal ? 'x' : 'y';\n      var dataIndexRange = getIndexRange(points, xOrY, dim);\n      var indices = dataIndexRange.range;\n      var diff = indices[1] - indices[0];\n      var value = void 0;\n\n      if (diff >= 1) {\n        // diff > 1 && connectNulls, which is on the null data.\n        if (diff > 1 && !connectNulls) {\n          var pt = getPointAtIndex(points, indices[0]);\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n        } else {\n          var pt = polyline.getPointOn(xOrY, dim);\n          pt && endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          var startValue = seriesModel.getRawValue(indices[0]);\n          var endValue = seriesModel.getRawValue(indices[1]);\n          valueAnimation && (value = modelUtil.interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n        }\n\n        animationRecord.lastFrameIndex = indices[0];\n      } else {\n        // If diff <= 0, which is the range is not found(Include NaN)\n        // Choose the first point or last point.\n        var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n        var pt = getPointAtIndex(points, idx);\n        valueAnimation && (value = seriesModel.getRawValue(idx));\n        endLabel.attr({\n          x: pt[0] + distanceX,\n          y: pt[1] + distanceY\n        });\n      }\n\n      if (valueAnimation) {\n        labelInner(endLabel).setLabelText(value);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n\n\n  LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n\n\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.setShape({\n        points: next\n      });\n\n      if (polygon) {\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n\n      return;\n    }\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    var target = {\n      shape: {\n        points: next\n      }\n    }; // Also animate the original points.\n    // If points reference is changed when turning into step line.\n\n    if (diff.current !== current) {\n      target.shape.__points = diff.next;\n    } // Stop previous animation.\n\n\n    polyline.stopAnimation();\n    graphic.updateProps(polyline, target, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        // Reuse the points with polyline.\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      polygon.stopAnimation();\n      graphic.updateProps(polygon, {\n        shape: {\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel); // If use attr directly in updateProps.\n\n      if (polyline.shape.points !== polygon.shape.points) {\n        polygon.shape.points = polyline.shape.points;\n      }\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        polygon && polygon.dirtyShape();\n        var points = polyline.shape.__points;\n\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          var offset = updatedDataInfo[i].ptIdx * 2;\n          el.x = points[offset];\n          el.y = points[offset + 1];\n          el.markRedraw();\n        }\n      });\n    }\n  };\n\n  LineView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n  };\n\n  LineView.type = 'line';\n  return LineView;\n}(ChartView);\n\nexport default LineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport { map } from 'zrender/lib/core/util';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper';\nimport { createFloat32Array } from '../util/vendor';\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0]\n      /*, dims[1]*/\n      )) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1]\n      /*, dims[0]*/\n      )) {\n        dims[1] = stackResultDim;\n      }\n\n      var dimInfo0 = data.getDimensionInfo(dims[0]);\n      var dimInfo1 = data.getDimensionInfo(dims[1]);\n      var dimIdx0 = dimInfo0 && dimInfo0.index;\n      var dimIdx1 = dimInfo1 && dimInfo1.index;\n      return dimLen && {\n        progress: function (params, data) {\n          var segCount = params.end - params.start;\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\n          var tmpIn = [];\n          var tmpOut = [];\n\n          for (var i = params.start, offset = 0; i < params.end; i++) {\n            var point = void 0;\n\n            if (dimLen === 1) {\n              var x = data.getByDimIdx(dimIdx0, i); // NOTE: Make sure the second parameter is null to use default strategy.\n\n              point = coordSys.dataToPoint(x, null, tmpOut);\n            } else {\n              tmpIn[0] = data.getByDimIdx(dimIdx0, i);\n              tmpIn[1] = data.getByDimIdx(dimIdx1, i); // Let coordinate system to handle the NaN data.\n\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n            }\n\n            if (useTypedArray) {\n              points[offset++] = point[0];\n              points[offset++] = point[1];\n            } else {\n              data.setItemLayout(i, point.slice());\n            }\n          }\n\n          useTypedArray && data.setLayout('points', points);\n        }\n      };\n    }\n  };\n}\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame) {\n  return Math.round(frame.length / 2);\n};\n\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count(); // Only cartesian2d support down sampling. Disable it when there is few data.\n\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio(); // Coordinste system has been resized\n\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n\n        if (rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n\n          var sampler = void 0;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LineSeries from './LineSeries';\nimport LineView from './LineView'; // In case developer forget to include grid component\n\nimport layoutPoints from '../../layout/points';\nimport dataSample from '../../processor/dataSample';\nexport function install(registers) {\n  registers.registerChartView(LineView);\n  registers.registerSeriesModel(LineSeries);\n  registers.registerLayout(layoutPoints('line', true));\n  registers.registerVisual({\n    seriesType: 'line',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData(); // Visual coding for legend\n\n      var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n\n      if (lineStyle && !lineStyle.stroke) {\n        // Fill in visual should be palette color if\n        // has color callback\n        lineStyle.stroke = data.getVisual('style').fill;\n      }\n\n      data.setVisual('legendLineStyle', lineStyle);\n    }\n  }); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n\n      if (category != null) {\n        if (typeof category === 'number') {\n          category = categoryNames[category];\n        } // If in any legend component the status is not selected.\n\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx); // Add prefix to avoid conflict with Object.prototype.\n\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    }); // Assign category color to visual\n\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n\n        if (categoryIdx != null) {\n          if (typeof categoryIdx === 'string') {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\n\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize')); // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true)); // Edge visual must after node visual\n\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util';\nvar KEY_DELIMITER = '-->';\n/**\n * params handler\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {*}\n */\n\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\n * Generate a list of edge curvatures, 20 is the default\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} appendLength\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\n */\n\n\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = []; // handler the function set\n\n  if (typeof autoCurvenessParmas === 'number') {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  } // append length\n\n\n  if (appendLength > length) {\n    length = appendLength;\n  } // make sure the length is even\n\n\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {string} key\n */\n\n\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\n * get opposite key\n * @param {string} key\n * @returns {string}\n */\n\n\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\n * get edgeMap with key\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\n * calculate all cases total length\n * @param edge\n * @param seriesModel\n * @returns {number}\n */\n\n\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\n *\n * @param key\n */\n\n\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\n * @see /graph/GraphSeries.js@getInitialData\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {}; // calc the array of curveness List\n\n  createCurveness(seriesModel);\n}\n/**\n * set edgeMap with key\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} index\n */\n\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)]; // set direction\n\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\n * get curvature for edge\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param index\n */\n\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n\n  if (!autoCurvenessParams) {\n    return null;\n  }\n\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n\n  if (!edgeArray) {\n    return null;\n  }\n\n  var edgeIndex = -1;\n\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  } // if totalLen is Longer createCurveness\n\n\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {}; // if is opposite edge, must set curvenss to opposite number\n\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList; // if pass array no need parity\n\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection]; // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n\n    edge.setLayout(points);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n\n          value.push(val);\n        }\n\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX; // Scale node when zoom changes\n\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n\n  return +symbolSize;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\n * `basedOn` can be:\n * 'value':\n *     This layout is not accurate and have same bad case. For example,\n *     if the min value is very smaller than the max value, the nodes\n *     with the min value probably overlap even though there is enough\n *     space to layout them. So we only use this approach in the as the\n *     init layout of the force layout.\n *     FIXME\n *     Probably we do not need this method any more but use\n *     `basedOn: 'symbolSize'` in force layout if\n *     delay its init operations to GraphView.\n * 'symbolSize':\n *     This approach work only if all of the symbol size calculated.\n *     That is, the progressive rendering is not applied to graph.\n *     FIXME\n *     If progressive rendering is applied to graph some day,\n *     probably we have to use `basedOn: 'value'`.\n */\n\nexport function circularLayout(seriesModel, basedOn) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n\n  if (!count) {\n    return;\n  }\n\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node); // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r); // when `symbolSize / 2` is bigger than `r`.\n\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { circularLayout } from './circularLayoutHelper';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* Some formulas were originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment of the method \"step\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as vec2 from 'zrender/lib/core/vector';\nvar scaleAndAdd = vec2.scaleAndAdd; // function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\n\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2]; // let scale = opts.scale || 1;\n\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity; // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  } // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n\n\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n\n    /**\n     * Before step hook\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n\n    /**\n     * After step hook\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n\n    /**\n     * Some formulas were originally copied from \"d3.js\"\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\n     * with some modifications made for this project.\n     * See the license statement at the head of this file.\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n\n        if (isNaN(w)) {\n          w = 0;\n        }\n\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      } // Gravity\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p); // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      } // Repulsive\n      // PENDING\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n\n      var v = [];\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { forceLayout } from './forceHelper';\nimport { simpleLayout } from './simpleLayoutHelper';\nimport { circularLayout } from './circularLayoutHelper';\nimport { linearMap } from '../../util/number';\nimport * as vec2 from 'zrender/lib/core/vector';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value'); // let edgeDataExtent = edgeData.getDataExtent('value');\n\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength]; // Larger value has smaller length\n\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      }); // let coordSys = graphSeries.coordinateSystem;\n\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1; // Step to get the layout\n\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\n\nimport * as vector from 'zrender/lib/core/vector';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport Transformable from 'zrender/lib/core/Transformable';\nvar v2ApplyTransform = vector.applyTransform;\n\nvar View =\n/** @class */\nfunction (_super) {\n  __extends(View, _super);\n\n  function View(name) {\n    var _this = _super.call(this) || this;\n\n    _this.type = 'view';\n    _this.dimensions = ['x', 'y'];\n    /**\n     * Represents the transform brought by roam/zoom.\n     * If `View['_viewRect']` applies roam transform,\n     * we can get the final displayed rect.\n     */\n\n    _this._roamTransformable = new Transformable();\n    /**\n     * Represents the transform from `View['_rect']` to `View['_viewRect']`.\n     */\n\n    _this._rawTransformable = new Transformable();\n    _this.name = name;\n    return _this;\n  }\n\n  View.prototype.setBoundingRect = function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  };\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n\n\n  View.prototype.getBoundingRect = function () {\n    return this._rect;\n  };\n\n  View.prototype.setViewRect = function (x, y, width, height) {\n    this._transformTo(x, y, width, height);\n\n    this._viewRect = new BoundingRect(x, y, width, height);\n  };\n  /**\n   * Transformed to particular position and size\n   */\n\n\n  View.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransform.parent;\n    rawTransform.parent = null;\n    rawTransform.decomposeTransform();\n    rawTransform.parent = rawParent;\n\n    this._updateTransform();\n  };\n  /**\n   * Set center of view\n   */\n\n\n  View.prototype.setCenter = function (centerCoord) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = centerCoord;\n\n    this._updateCenterAndZoom();\n  };\n\n  View.prototype.setZoom = function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  };\n  /**\n   * Get default center without roam\n   */\n\n\n  View.prototype.getDefaultCenter = function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  };\n\n  View.prototype.getCenter = function () {\n    return this._center || this.getDefaultCenter();\n  };\n\n  View.prototype.getZoom = function () {\n    return this._zoom || 1;\n  };\n\n  View.prototype.getRoamTransform = function () {\n    return this._roamTransformable.getLocalTransform();\n  };\n  /**\n   * Remove roam\n   */\n\n\n  View.prototype._updateCenterAndZoom = function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.originX = center[0];\n    roamTransform.originY = center[1];\n    roamTransform.x = defaultCenter[0] - center[0];\n    roamTransform.y = defaultCenter[1] - center[1];\n    roamTransform.scaleX = roamTransform.scaleY = zoom;\n\n    this._updateTransform();\n  };\n  /**\n   * Update transform props on `this` based on the current\n   * `this._roamTransformable` and `this._rawTransformable`.\n   */\n\n\n  View.prototype._updateTransform = function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  };\n\n  View.prototype.getTransformInfo = function () {\n    var rawTransformable = this._rawTransformable;\n    var roamTransformable = this._roamTransformable; // Becuase roamTransformabel has `originX/originY` modified,\n    // but the caller of `getTransformInfo` can not handle `originX/originY`,\n    // so need to recalcualte them.\n\n    var dummyTransformable = new Transformable();\n    dummyTransformable.transform = roamTransformable.transform;\n    dummyTransformable.decomposeTransform();\n    return {\n      roam: {\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY\n      },\n      raw: {\n        x: rawTransformable.x,\n        y: rawTransformable.y,\n        scaleX: rawTransformable.scaleX,\n        scaleY: rawTransformable.scaleY\n      }\n    };\n  };\n\n  View.prototype.getViewRect = function () {\n    return this._viewRect;\n  };\n  /**\n   * Get view rect after roam transform\n   */\n\n\n  View.prototype.getViewRectAfterRoam = function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  };\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   */\n\n\n  View.prototype.dataToPoint = function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  };\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   */\n\n\n  View.prototype.pointToData = function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  };\n\n  View.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  View.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  View.prototype.containPoint = function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  };\n\n  View.dimensions = ['x', 'y'];\n  return View;\n}(Transformable);\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  return seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n}\n\nexport default View;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View';\nimport { getLayoutRect } from '../../util/layout';\nimport * as bbox from 'zrender/lib/core/bbox';\nimport { extend } from 'zrender/lib/core/util';\n\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n\n    if (!coordSysType || coordSysType === 'view') {\n      var data_1 = seriesModel.getData();\n      var positions = data_1.mapArray(function (idx) {\n        var itemModel = data_1.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max); // If width or height is 0\n\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]); // FIXME If get view rect after data processed?\n\n      var viewRect = getViewRect(seriesModel, api, aspect); // Position may be NaN, use view rect instead\n\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight); // Update roam info\n\n      viewCoordSys.setCenter(seriesModel.get('center'));\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\n\nimport * as graphic from '../../util/graphic';\nimport * as vec2 from 'zrender/lib/core/vector';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\n\nvar StraightLineShape =\n/** @class */\nfunction () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0; // End point\n\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n\n  return StraightLineShape;\n}();\n\nvar CurveShape =\n/** @class */\nfunction (_super) {\n  __extends(CurveShape, _super);\n\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return CurveShape;\n}(StraightLineShape);\n\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\n\nvar ECLinePath =\n/** @class */\nfunction (_super) {\n  __extends(ECLinePath, _super);\n\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-line';\n    return _this;\n  }\n\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n\n  return ECLinePath;\n}(graphic.Path);\n\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each, retrieve2 } from 'zrender/lib/core/util';\nimport * as vector from 'zrender/lib/core/vector';\nimport * as symbolUtil from '../../util/symbol';\nimport ECLinePath from './LinePath';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle';\nimport { round, parsePercent } from '../../util/number';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\n\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\n/**\n * @inner\n */\n\n\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset') || 0;\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = isArray(symbolSize) ? symbolSize : [symbolSize, symbolSize];\n  var symbolOffsetArr = isArray(symbolOffset) ? symbolOffset : [symbolOffset, symbolOffset];\n  symbolOffsetArr[0] = parsePercent(symbolOffsetArr[0], symbolSizeArr[0]);\n  symbolOffsetArr[1] = parsePercent(retrieve2(symbolOffsetArr[1], symbolOffsetArr[0]), symbolSizeArr[1]);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\n\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\n\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\n\nvar Line =\n/** @class */\nfunction (_super) {\n  __extends(Line, _super);\n\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createLine(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx); // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = lineData.getItemVisual(idx, symbolCategory);\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  }; // TODO More strict on the List type in parameters?\n\n\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = lineData.getItemVisual(idx, symbolCategory);\n      var key = makeSymbolTypeKey(symbolCategory); // Symbol changed\n\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n\n      this[key] = symbolType;\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels; // Optimization for large dataset\n\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      emphasisLineStyle = itemModel.getModel(['emphasis', 'lineStyle']).getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle; // Update symbol\n\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || '#000',\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent(); // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign; // 'start', 'middle', 'end'\n\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n\n      label.__labelDistance = distance;\n    }\n\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n\n    });\n    enableHoverEmphasis(this);\n  };\n\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent(); // Quick reject\n\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n\n    var invScale = 1;\n    var parentNode = this.parent;\n\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n\n      parentNode = parentNode.parent;\n    }\n\n    var line = lineGroup.childOfName('line'); // If line not changed\n    // FIXME Parent scale changed\n\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n\n      var dir = tangent[0] < 0 ? -1 : 1;\n\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n\n        label.rotation = rotation;\n      }\n\n      var dy = void 0;\n\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n\n  return Line;\n}(graphic.Group);\n\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport LineGroup from './Line';\nimport { getLabelStatesModels } from '../../label/labelStyle';\n\nvar LineDraw =\n/** @class */\nfunction () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n\n  LineDraw.prototype.isPersistent = function () {\n    return true;\n  };\n\n  ;\n\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!oldLineData) {\n      group.removeAll();\n    }\n\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n\n  ;\n\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData; // Do not support update layout in incremental mode.\n\n    if (!lineData) {\n      return;\n    }\n\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n      }\n    }\n  };\n\n  ;\n\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n\n  return LineDraw;\n}();\n\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\n\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: hostModel.getModel(['emphasis', 'lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\n\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\n\nfunction lineNeedsDraw(pts) {\n  return !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\n\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For geo and graph.\n */\nexport function updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  target.x += dx;\n  target.y += dy;\n  target.dirty();\n}\n/**\n * For geo and graph.\n */\n\nexport function updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom; // Keep the mouse center when scaling\n\n  target.x -= (zoomX - target.x) * (zoomScale - 1);\n  target.y -= (zoomY - target.y) * (zoomScale - 1);\n  target.scaleX *= zoomScale;\n  target.scaleY *= zoomScale;\n  target.dirty();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as curveTool from 'zrender/lib/core/curve';\nimport * as vec2 from 'zrender/lib/core/vector';\nimport { getSymbolSize } from './graphHelper';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\n\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  } // Assume the segment is monotone，Find root through Bisection method\n  // At most 32 iteration\n\n\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval; // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    } // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n\n\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n\n  return t;\n} // Adjust edge to avoid\n\n\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n\n    var originalPoints = linePoints.__original; // Quadratic curve\n\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale); // Subdivide and get the second\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale); // Subdivide and get the first\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      } // Copy back to layout\n\n\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    } // Line\n    else {\n        vec2.copy(pts2[0], originalPoints[0]);\n        vec2.copy(pts2[1], originalPoints[1]);\n        vec2.sub(v, pts2[1], pts2[0]);\n        vec2.normalize(v, v);\n\n        if (fromSymbol && fromSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node1);\n          vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n        }\n\n        if (toSymbol && toSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node2);\n          vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n        }\n\n        vec2.copy(linePoints[0], pts2[0]);\n        vec2.copy(linePoints[1], pts2[1]);\n      }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SymbolDraw from '../helper/SymbolDraw';\nimport LineDraw from '../helper/LineDraw';\nimport RoamController from '../../component/helper/RoamController';\nimport * as roamHelper from '../../component/helper/roamHelper';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper';\nimport * as graphic from '../../util/graphic';\nimport adjustEdge from './adjustEdge';\nimport { getNodeGlobalScale } from './graphHelper';\nimport ChartView from '../../view/Chart';\nimport { getECData } from '../../util/innerStore';\n\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\n\nvar GraphView =\n/** @class */\nfunction (_super) {\n  __extends(GraphView, _super);\n\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphView.type;\n    return _this;\n  }\n\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  };\n\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    } // Fix edge contact point with node\n\n\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData(); // TODO: TYPE\n\n    lineDraw.updateData(edgeData);\n\n    this._updateNodeAndLinkScale();\n\n    this._updateController(seriesModel, ecModel, api);\n\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel(); // Update draggable\n\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n\n      if (draggable) {\n        el.on('drag', function () {\n          if (forceLayout) {\n            forceLayout.warmUp();\n            !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\n            forceLayout.setFixed(idx); // Write position back to layout\n\n            data.setItemLayout(idx, [el.x, el.y]);\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n\n      el.setDraggable(draggable && !!forceLayout);\n      var focus = itemModel.get(['emphasis', 'focus']);\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.eachItemGraphicEl(function (el, idx) {\n      var itemModel = data.getItemModel(idx);\n      var labelRotate = itemModel.get(['label', 'rotate']) || 0;\n      var symbolPath = el.getSymbolPath();\n\n      if (circularRotateLabel) {\n        var pos = data.getItemLayout(idx);\n        var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n\n        if (rad < 0) {\n          rad = Math.PI * 2 + rad;\n        }\n\n        var isLeft = pos[0] < cx;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n\n        var textPosition = isLeft ? 'left' : 'right';\n        symbolPath.setTextConfig({\n          rotation: -rad,\n          position: textPosition,\n          origin: 'center'\n        });\n        var emphasisState = symbolPath.ensureState('emphasis');\n        zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n          position: textPosition\n        });\n      } else {\n        symbolPath.setTextConfig({\n          rotation: labelRotate *= Math.PI / 180\n        });\n      }\n    });\n    this._firstRender = false;\n  };\n\n  GraphView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\n    var self = this;\n\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\n      controller.disable();\n      return;\n    }\n\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale();\n\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n      _this._lineDraw.updateLayout(); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n    this._symbolDraw.updateLayout();\n\n    this._lineDraw.updateLayout();\n  };\n\n  GraphView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  };\n\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\n\nexport default GraphView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util'; // id may be function name of Object, add a prefix to avoid this problem.\n\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\n\nvar Graph =\n/** @class */\nfunction () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\n     * @private\n     */\n\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\n   * If is directed graph\n   */\n\n\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n\n  ;\n  /**\n   * Add a new node\n   */\n\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n\n      return;\n    }\n\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n\n  ;\n  /**\n   * Get node by data index\n   */\n\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n\n  ;\n  /**\n   * Get node by id\n   */\n\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n\n  ;\n  /**\n   * Add a new edge\n   */\n\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap; // PNEDING\n\n    if (typeof n1 === 'number') {\n      n1 = this.nodes[n1];\n    }\n\n    if (typeof n2 === 'number') {\n      n2 = this.nodes[n2];\n    }\n\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n\n    if (!n1 || !n2) {\n      return;\n    }\n\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n\n    n1.edges.push(edge);\n\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n\n  ;\n  /**\n   * Get edge by data index\n   */\n\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n\n  ;\n  /**\n   * Get edge by two linked nodes\n   */\n\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n\n    var edgesMap = this._edgesMap;\n\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n\n  ;\n  /**\n   * Iterate all nodes\n   */\n\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Iterate all edges\n   */\n\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Breadth first traverse\n   * Return true to stop traversing\n   */\n\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n\n    if (!startNode) {\n      return;\n    }\n\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n\n    var queue = [startNode];\n\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n\n  ; // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    }); // Update edge\n\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n\n  ;\n  /**\n   * @return {module:echarts/data/Graph}\n   */\n\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n\n    return graph;\n  };\n\n  ;\n  return Graph;\n}();\n\nvar GraphNode =\n/** @class */\nfunction () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\n  * @return {number}\n  */\n\n\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n\n    return dataIndices;\n  };\n\n  return GraphNode;\n}();\n\nvar GraphEdge =\n/** @class */\nfunction () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n\n  return GraphEdge;\n}();\n\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.get(data.getDimension(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function (key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Link lists and struct (graph or tree)\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\n\nfunction linkList(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt); // Porxy data original methods.\n\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\n\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  }); // Make sure datas contains mainData.\n\n  assert(datas[mainData.dataType] === mainData);\n}\n\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n\n  return res;\n}\n\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\n\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param [dataType] If not specified, return mainData.\n */\n\n\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\n * Get list of all linked data\n */\n\n\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\n\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\n\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\n\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  } // Supplement method.\n\n\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\n\nexport default linkList;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport List from '../../data/List';\nimport Graph from '../../data/Graph';\nimport linkList from '../../data/helper/linkList';\nimport createDimensions from '../../data/helper/createDimensions';\nimport CoordinateSystem from '../../core/CoordinateSystem';\nimport createListFromArray from './createListFromArray';\nimport { convertOptionIdName } from '../../util/model';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve( // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target; // addEdge may fail when source or target not exists\n\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createListFromArray(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : []; // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n\n    var dimensionNames = createDimensions(nodes, {\n      coordDimensions: coordDimensions\n    });\n    nodeData = new List(dimensionNames, seriesModel);\n    nodeData.initData(nodes);\n  }\n\n  var edgeData = new List(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkList({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  }); // Update dataIndex of nodes and edges because invalid edge may be removed\n\n  graph.update();\n  return graph;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider =\n/** @class */\nfunction () {\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n\n  return LegendVisualProvider;\n}();\n\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport List from '../../data/List';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { defaultEmphasis } from '../../util/model';\nimport Model from '../../model/Model';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport SeriesModel from '../../model/Series';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper';\n\nvar GraphSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(GraphSeriesModel, _super);\n\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n\n    var self = this;\n\n    function getCategoriesData() {\n      return self._categoriesData;\n    } // Provide data for legend select\n\n\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n\n        return model;\n      }); // TODO Inherit resolveParentPath by default in Model#getModel?\n\n      var oldGetModel = Model.prototype.getModel;\n\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n\n          return newPathArr;\n        }\n\n        return pathArr;\n      }\n    }\n  };\n\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    } // dataType === 'node' or empty\n\n\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new List(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this) // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\n\nexport default GraphSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function updateCenterAndZoom(view, payload, zoomLimit) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.dataToPoint(center);\n\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    view.setCenter(view.pointToData(point));\n  }\n\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    } // Zoom on given point(originX, originY)\n\n\n    view.scaleX *= zoom;\n    view.scaleY *= zoom;\n    var fixX = (payload.originX - view.x) * (zoom - 1);\n    var fixY = (payload.originY - view.y) * (zoom - 1);\n    view.x -= fixX;\n    view.y -= fixY;\n    view.updateTransform(); // Get the new center\n\n    view.setCenter(view.pointToData(point));\n    view.setZoom(zoom * previousZoom);\n  }\n\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport categoryFilter from './categoryFilter';\nimport categoryVisual from './categoryVisual';\nimport edgeVisual from './edgeVisual';\nimport simpleLayout from './simpleLayout';\nimport circularLayout from './circularLayout';\nimport forceLayout from './forceLayout';\nimport createView from './createView';\nimport View from '../../coord/View';\nimport GraphView from './GraphView';\nimport GraphSeriesModel from './GraphSeries';\nimport { updateCenterAndZoom } from '../../action/roamHelper';\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  }); // Register legacy focus actions\n\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, function () {});\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, function () {}); // Register roam action.\n\n  registers.registerAction(actionInfo, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","import { __extends } from \"tslib\";\nimport * as util from '../core/util';\nimport { devicePixelRatio } from '../config';\nimport Eventful from '../core/Eventful';\nimport { getCanvasGradient } from './helper';\nimport { createCanvasPattern } from './graphic';\nimport BoundingRect from '../core/BoundingRect';\nimport { REDARAW_BIT } from '../graphic/constants';\nfunction returnFalse() {\n    return false;\n}\nfunction createDom(id, painter, dpr) {\n    var newDom = util.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            dom.onselectstart = returnFalse;\n            domStyle.webkitUserSelect = 'none';\n            domStyle.userSelect = 'none';\n            domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n            domStyle['-webkit-touch-callout'] = 'none';\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.domBack = null;\n        _this.ctxBack = null;\n        _this.painter = painter;\n        _this.config = null;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDARAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDARAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    clearColorGradientOrPattern = clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.__painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config';\nimport * as util from '../core/util';\nimport Layer from './Layer';\nimport requestAnimationFrame from '../animation/requestAnimationFrame';\nimport ZRImage from '../graphic/Image';\nimport env from '../core/env';\nimport { brush, brushSingle } from './graphic';\nimport { REDARAW_BIT } from '../graphic/constants';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            rootStyle.webkitTapHighlightColor = 'transparent';\n            rootStyle.webkitUserSelect = 'none';\n            rootStyle.userSelect = 'none';\n            rootStyle['-webkit-touch-callout'] = 'none';\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = this._getSize(0);\n            this._height = this._getSize(1);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            util.logError('ZLevel ' + zlevel + ' has been used already');\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.__painter = this;\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDARAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = this._getSize(0);\n            height = this._getSize(1);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    CanvasPainter.prototype._getSize = function (whIdx) {\n        var opts = this._opts;\n        var wh = ['width', 'height'][whIdx];\n        var cwh = ['clientWidth', 'clientHeight'][whIdx];\n        var plt = ['paddingLeft', 'paddingTop'][whIdx];\n        var prb = ['paddingRight', 'paddingBottom'][whIdx];\n        if (opts[wh] != null && opts[wh] !== 'auto') {\n            return parseFloat(opts[wh]);\n        }\n        var root = this.root;\n        var stl = document.defaultView.getComputedStyle(root);\n        return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n            - (parseInt10(stl[plt]) || 0)\n            - (parseInt10(stl[prb]) || 0)) | 0;\n    };\n    CanvasPainter.prototype.pathToImage = function (path, dpr) {\n        dpr = dpr || this.dpr;\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        var rect = path.getBoundingRect();\n        var style = path.style;\n        var shadowBlurSize = style.shadowBlur * dpr;\n        var shadowOffsetX = style.shadowOffsetX * dpr;\n        var shadowOffsetY = style.shadowOffsetY * dpr;\n        var lineWidth = path.hasStroke() ? style.lineWidth : 0;\n        var leftMargin = Math.max(lineWidth / 2, -shadowOffsetX + shadowBlurSize);\n        var rightMargin = Math.max(lineWidth / 2, shadowOffsetX + shadowBlurSize);\n        var topMargin = Math.max(lineWidth / 2, -shadowOffsetY + shadowBlurSize);\n        var bottomMargin = Math.max(lineWidth / 2, shadowOffsetY + shadowBlurSize);\n        var width = rect.width + leftMargin + rightMargin;\n        var height = rect.height + topMargin + bottomMargin;\n        canvas.width = width * dpr;\n        canvas.height = height * dpr;\n        ctx.scale(dpr, dpr);\n        ctx.clearRect(0, 0, width, height);\n        ctx.dpr = dpr;\n        var pathTransform = {\n            x: path.x,\n            y: path.y,\n            scaleX: path.scaleX,\n            scaleY: path.scaleY,\n            rotation: path.rotation,\n            originX: path.originX,\n            originY: path.originY\n        };\n        path.x = leftMargin - rect.x;\n        path.y = topMargin - rect.y;\n        path.rotation = 0;\n        path.scaleX = 1;\n        path.scaleY = 1;\n        path.updateTransform();\n        if (path) {\n            brush(ctx, path, {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            }, true);\n        }\n        var imgShape = new ZRImage({\n            style: {\n                x: 0,\n                y: 0,\n                image: canvas\n            }\n        });\n        util.extend(path, pathTransform);\n        return imgShape;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CanvasPainter from 'zrender/lib/canvas/Painter';\nexport function install(registers) {\n  registers.registerPainter('canvas', CanvasPainter);\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loss_and_time\"},[_c('el-card',{staticClass:\"box-card card\"},[_c('v-chart',{staticClass:\"chart\",attrs:{\"option\":_vm.data}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"loss_and_time\">\n        <el-card class=\"box-card card\">\n            <v-chart class=\"chart\" :option=\"data\" />\n        </el-card>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'LossAndTime',\n        props: ['loss_and_time'],\n        data() {\n            return {\n\n            };\n        },\n        methods: {\n            int2List(num) {\n                let l = []\n                for (let i = 0; i < num; i++) {\n                    l.push(i.toString());\n                }\n                return l\n            }\n        },\n        computed: {\n            data: function () {\n                // 数据：用于绘制折线图的loss与耗时数据\n                return {\n                    title: {\n                        text: '模型指标',\n                        subtext: '每5秒自动检查更新',\n                        left: 'center',\n                        align: 'right'\n                    },\n                    grid: {\n                        bottom: 80\n                    },\n                    toolbox: {\n                        feature: {\n                            saveAsImage: {}\n                        }\n                    },\n                    tooltip: {\n                        trigger: 'axis',\n                        axisPointer: {\n                            type: 'cross',\n                            animation: false,\n                            label: {\n                                backgroundColor: '#505765'\n                            }\n                        }\n                    },\n                    legend: {\n                        data: ['模型损失', '单轮训练用时'],\n                        left: 10\n                    },\n                    dataZoom: [\n                        {\n                            show: true,\n                            realtime: true,\n                            start: 0,\n                            end: 100\n                        },\n                    ],\n                    xAxis: [\n                        {\n                            type: 'category',\n                            boundaryGap: false,\n                            axisLine: {onZero: false},\n                            data: this.int2List(this.loss_and_time.loss_list.length)\n                        }\n                    ],\n                    yAxis: [\n                        {\n                            name: '模型损失值',\n                            type: 'value',\n                            min: function (value) {\n                                if (value.min < 0) {\n                                    return Math.round(value.min * 1.2);\n                                }\n                                return Math.round(value.min * 0.8);\n                            },\n                            max: function (value) {\n                                if (value.max > 0) {\n                                    return Math.round(value.max * 1.2);\n                                }\n                                return Math.round(value.max * 0.8);\n                            },\n                        },\n                        {\n                            name: '训练用时(s)',\n                            min: function (value) {\n                                if (value.min < 0) {\n                                    return value.min * 1.2;\n                                }\n                                return value.min * 0.8;\n                            },\n                            max: function (value) {\n                                if (value.max > 0) {\n                                    return value.max * 1.2;\n                                }\n                                return value.max * 0.8;\n                            },\n                            type: 'value'\n                        }\n                    ],\n                    series: [\n                        {\n                            name: '模型损失',\n                            type: 'line',\n                            lineStyle: {\n                                width: 1\n                            },\n                            emphasis: {\n                                focus: 'series'\n                            },\n                            markArea: {\n                                silent: true,\n                                itemStyle: {\n                                    opacity: 0.3\n                                }\n                            },\n                            data: this.loss_and_time.loss_list\n                        },\n                        {\n                            name: '单轮训练用时',\n                            type: 'line',\n                            yAxisIndex: 1,\n                            lineStyle: {\n                                width: 1\n                            },\n                            emphasis: {\n                                focus: 'series'\n                            },\n                            markArea: {\n                                silent: true,\n                                itemStyle: {\n                                    opacity: 0.3\n                                },\n                            },\n                            data: this.loss_and_time.time_list\n                        }\n                    ]\n                }\n            }\n        },\n    }\n</script>\n\n<style scoped>\n    .chart {\n        height: 550px;\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LossAndTime.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LossAndTime.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LossAndTime.vue?vue&type=template&id=c6fb09f0&scoped=true&\"\nimport script from \"./LossAndTime.vue?vue&type=script&lang=js&\"\nexport * from \"./LossAndTime.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LossAndTime.vue?vue&type=style&index=0&id=c6fb09f0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c6fb09f0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"train_and_validate\"},[_c('el-card',{staticClass:\"box-card card\"},[_c('v-chart',{staticClass:\"chart\",attrs:{\"option\":_vm.data}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"train_and_validate\">\n    <el-card class=\"box-card card\">\n      <v-chart class=\"chart\" :option=\"data\" />\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TrainAndValidate\",\n  props: ['train_and_validate'],\n  data() {\n    return {\n\n    };\n  },\n  methods: {\n  },\n  computed: {\n    data: function () {\n      // 数据：用于绘制折线图的train_auc和validate_auc数据\n      return {\n        title: {\n          text: '模型指标',\n          subtext: '每5秒自动检查更新',\n          left: 'center',\n          align: 'right'\n        },\n        grid: {\n          bottom: 80\n        },\n        toolbox: {\n          feature: {\n            saveAsImage: {}\n          }\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross',\n            animation: false,\n            label: {\n              backgroundColor: '#505765'\n            }\n          }\n        },\n        legend: {\n          data: ['训练AUC', '验证AUC'],\n          left: 10\n        },\n        dataZoom: [\n          {\n            show: true,\n            realtime: true,\n            start: 0,\n            end: 100\n          },\n        ],\n        xAxis: [\n          {\n            type: 'category',\n            boundaryGap: false,\n            axisLine: {onZero: false},\n            data: this.train_and_validate.x_axis\n          }\n        ],\n        yAxis: [\n          {\n            name: '训练AUC',\n            type: 'value',\n            min: function (value) {\n              if (value.min < 0) {\n                return Math.round(value.min * 1.2);\n              }\n              return Math.round(value.min * 0.8);\n            },\n            max: function (value) {\n              if (value.max > 0) {\n                return Math.round(value.max * 1.2);\n              }\n              return Math.round(value.max * 0.8);\n            },\n          },\n          {\n            name: '验证AUC',\n            min: function (value) {\n              if (value.min < 0) {\n                return Math.round(value.min * 1.2);\n              }\n              return Math.round(value.min * 0.8);\n            },\n            max: function (value) {\n              if (value.max > 0) {\n                return Math.round(value.max * 1.2);\n              }\n              return Math.round(value.max * 0.8);\n            },\n            type: 'value'\n          }\n        ],\n        series: [\n          {\n            name: '训练AUC',\n            type: 'line',\n            lineStyle: {\n              width: 1\n            },\n            emphasis: {\n              focus: 'series'\n            },\n            markArea: {\n              silent: true,\n              itemStyle: {\n                opacity: 0.3\n              }\n            },\n            data: this.train_and_validate.train_auc\n          },\n          {\n            name: '验证AUC',\n            type: 'line',\n            yAxisIndex: 1,\n            lineStyle: {\n              width: 1\n            },\n            emphasis: {\n              focus: 'series'\n            },\n            markArea: {\n              silent: true,\n              itemStyle: {\n                opacity: 0.3\n              },\n            },\n            data: this.train_and_validate.validate_auc\n          }\n        ]\n      }\n    }\n  },\n}\n</script>\n\n<style scoped>\n  .chart {\n    height: 550px;\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainAndValidate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainAndValidate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TrainAndValidate.vue?vue&type=template&id=54264f58&scoped=true&\"\nimport script from \"./TrainAndValidate.vue?vue&type=script&lang=js&\"\nexport * from \"./TrainAndValidate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TrainAndValidate.vue?vue&type=style&index=0&id=54264f58&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54264f58\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"procedure\"},[_c('el-card',{staticClass:\"box-card card\"},[_c('v-chart',{staticClass:\"chart\",attrs:{\"option\":_vm.data}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"procedure\">\n        <el-card class=\"box-card card\">\n            <v-chart class=\"chart\" :option=\"data\" />\n        </el-card>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'Procedure',\n        props: ['procedure', 'task_json_dict'],\n        data() {\n            return {\n            }\n        },\n        methods: {\n            // 计算任务模块的显示颜色\n            getTaskColor(finished_module_num, this_index) {\n                if (this_index <= finished_module_num) {\n                    return 'lightblue'\n                } else if (this_index === finished_module_num+1) {\n                    return 'lightgreen'\n                }\n                return 'lightgrey'\n            },\n            // 生成任务模块列表\n            getTaskModules() {\n                let finished_module_num = this.procedure;\n                let module_length = this.task_json_dict.length;\n                let module_series_data = [];\n                for (let i = 1; i < module_length; i++) {\n                    module_series_data.push({\n                        name: 'step.'+i.toString()+' '+this.task_json_dict[i].task_type,\n                        // x: 300+150*Math.cos(2*Math.PI / (module_length) * (i-1)),\n                        // y: 300+150*Math.sin(2*Math.PI / (module_length) * (i-1)),\n                        y: 0,\n                        x: 100 * i,\n                        itemStyle: {\n                            color: this.getTaskColor(finished_module_num, i)\n                        }\n                    })\n                }\n                return module_series_data;\n            },\n            // 生成任务指向\n            getModuleLinks() {\n                let module_length = this.task_json_dict.length - 1;\n                let module_series_link = [];\n                for (let i = 1; i < module_length; i++) {\n                    module_series_link.push({\n                        source: i-1,\n                        target: i\n                    });\n                }\n                return module_series_link\n            },\n        },\n        computed: {\n            data: function () {\n                return {\n                    title: {\n                        text: '任务调度',\n                        subtext: '蓝色-已完成，绿色-进行中，灰色-等待中',\n                        left: 'center',\n                        align: 'right'\n                    },\n                    tooltip: {},\n                    animationDurationUpdate: 500,\n                    animationEasingUpdate: 'quinticInOut',\n                    series: [\n                        {\n                            type: 'graph',\n                            layout: 'none',\n                            symbolSize: 100,\n                            // roam: true,\n                            label: {\n                                show: true\n                            },\n                            edgeSymbol: ['', 'arrow'],\n                            data: this.getTaskModules(),\n                            links: this.getModuleLinks(),\n                            lineStyle: {\n                                width: 4,\n                                curveness: 0\n                            }\n                        }\n                    ]\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .chart {\n        height: 550px;\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Procedure.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Procedure.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Procedure.vue?vue&type=template&id=16af0b26&scoped=true&\"\nimport script from \"./Procedure.vue?vue&type=script&lang=js&\"\nexport * from \"./Procedure.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Procedure.vue?vue&type=style&index=0&id=16af0b26&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16af0b26\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"task_detail\">\n        <!-- operations -->\n        <el-row id=\"top-buttons\">\n            <el-button type=\"primary\" v-on:click='$router.push(\"/task_new\")' class=\"oper-btn\">\n                发起任务\n                <i class=\"el-icon-s-promotion\"></i>\n            </el-button>\n\n            <el-button type=\"info\" v-on:click=\"changeAlias\" class=\"oper-btn\">\n                修改备注\n                <i class=\"el-icon-edit\"></i>\n            </el-button>\n\n            <el-button type=\"success\" v-on:click=\"downloadOutput(task_info.task_id)\" class=\"oper-btn\">\n                输出文件\n                <i class=\"el-icon-download\"></i>\n            </el-button>\n\n            <el-popconfirm title=\"确定要终止任务吗？\" class=\"el-popconfirm oper-btn\" @confirm=\"stopTask\">\n                <el-button type=\"warning\" slot=\"reference\">\n                    终止任务\n                    <i class=\"el-icon-close\"></i>\n                </el-button>\n            </el-popconfirm>\n\n            <el-popconfirm title=\"确定要删除任务吗？\" class=\"el-popconfirm oper-btn\" @confirm=\"deleteTask\">\n                <el-button type=\"danger\" slot=\"reference\">\n                    删除任务\n                    <i class=\"el-icon-delete\"></i>\n                </el-button>\n            </el-popconfirm>\n        </el-row>\n\n        <el-card class=\"task_info_card\" v-if=\"task_info_display_control\">\n          <div slot=\"header\" class=\"clearfix\">\n            <b>任务信息</b>\n          </div>\n          <table border=0 class=\"task_info_table\" style=\"word-break:break-all;word-wrap:break-word;\">\n            <tr><td>任务ID:{{ task_info.task_id }}</td><td><pre>&#9;</pre></td>\n              <td>任务发起方:{{ task_info.party_name }}</td><td><pre>&#9;</pre></td>\n              <td>任务参与方:{{ task_info.party_names }}</td><td><pre>&#9;</pre></td>\n              <td>任务状态:<span v-bind:class=\"task_info.status\">{{ task_info.status | task_status }}</span></td>\n            </tr>\n            <tr>\n              <td>任务创建时间:{{ task_info.create_time }}</td><td><pre>&#9;</pre></td>\n              <td>状态更新时间:{{ task_info.update_time }}</td><td><pre>&#9;</pre></td>\n              <td>任务配置：<a class=\"show-modal\" v-on:click=\"task_json_visible=true;\">点击查看</a></td><td><pre>&#9;</pre></td>\n              <td>任务备注名:{{ task_info.alias || \"暂无\" }}</td>\n            </tr>\n            <tr v-for=\"(item,index) in this.metrics_task_info\" v-bind:key=\"index\">\n              <td v-for=\"(value,key,index2) in item\" v-bind:key=\"index2\" colspan=\"2\">{{key}}:{{value}}</td>\n            </tr>\n          </table>\n        </el-card>\n\n        <el-row :gutter=\"10\">\n            <!-- meta -->\n            <el-col v-if=\"!task_info_display_control\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"6\">\n                <el-card class=\"box-card card\">\n                    <div slot=\"header\" class=\"clearfix\">\n                        <b>任务信息</b>\n                    </div>\n                    <p>任务ID：{{ task_info.task_id }}</p>\n                    <p>任务发起方：{{ task_info.party_name }}</p>\n                    <p>任务参与方：{{ task_info.party_names }}</p>\n                    <p>任务状态：<span v-bind:class=\"task_info.status\">{{ task_info.status | task_status }}</span></p>\n                    <p>任务备注名：{{ task_info.alias || \"暂无\" }}</p>\n                    <p>任务创建时间：{{ task_info.create_time }}</p>\n                    <p>状态更新时间：{{ task_info.update_time }}</p>\n                    <p>任务配置：<a class=\"show-modal\" v-on:click=\"task_json_visible=true;\">点击查看</a></p>\n                    <div v-if=\"metrics !== null && metrics.length > 0\">\n                        <p>模型评估指标：</p>\n                        <div v-for=\"(m, index) in metrics\" v-bind:key='index'>\n                            <div v-for=\"(value,key,index2) in m\" v-bind:key='index2'>\n                                <p>{{key}}={{value}}</p>\n                            </div>\n                        </div>\n                    </div>\n                </el-card>\n            </el-col>\n\n            <!-- charts -->\n            <el-col v-if=\"!task_info_display_control\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"9\">\n                <Procedure class=\"cards\" v-bind:procedure=\"procedure\" v-bind:task_json_dict=\"task_json_dict\"></Procedure>\n            </el-col>\n\n            <!-- charts -->\n            <el-col v-if=\"!task_info_display_control\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"9\">\n                <LossAndTime class=\"cards\" v-bind:loss_and_time=\"loss_and_time\"></LossAndTime>\n            </el-col>\n\n            <!-- charts -->\n            <el-col v-if=\"task_info_display_control\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"8\">\n              <Procedure class=\"cards\" v-bind:procedure=\"procedure\" v-bind:task_json_dict=\"task_json_dict\"></Procedure>\n            </el-col>\n\n            <!-- charts -->\n            <el-col v-if=\"task_info_display_control\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"8\">\n              <LossAndTime class=\"cards\" v-bind:loss_and_time=\"loss_and_time\"></LossAndTime>\n            </el-col>\n\n            <!-- charts -->\n            <el-col v-if=\"task_info_display_control\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"8\">\n              <TrainAndValidate class=\"cards\" v-bind:train_and_validate=\"train_and_validate\"></TrainAndValidate>\n            </el-col>\n\n        </el-row>\n\n        <!-- error logs -->\n        <el-row v-if=\"error_msg.length > 0\">\n            <el-card class=\"box-card\">\n                <div slot=\"header\" class=\"clearfix\">\n                    <b>任务错误信息</b>\n                </div>\n                <div id=\"error_msg\">\n                    <div v-for=\"(msg, index) in error_msg\" v-bind:key='index'>\n                        <span class=\"line-number\">{{ index+1 }}</span> {{ msg }}\n                    </div>\n                </div>\n            </el-card>\n        </el-row>\n\n        <!-- logs -->\n        <el-row>\n            <el-card class=\"box-card\">\n                <div slot=\"header\" class=\"clearfix\">\n                    <b>日志信息</b>\n                    <span class=\"log-span\">每5秒日志自动更新</span>\n                    <el-button\n                        icon=\"el-icon-refresh-right\"\n                        size=\"mini\"\n                        class=\"log-span\"\n                        v-on:click=\"refreshLog\"\n                        circle>\n                    </el-button>\n                    <span id=\"scroll-switch\">\n                        日志更新后划到底部\n                        <el-switch\n                            v-model=\"scroll_to_bottom\"\n                            class=\"log-span\" >\n                        </el-switch>\n                    </span>\n                </div>\n                <div id=\"task_log\">\n                    <div v-for=\"(task_log, index) in task_logs\" v-bind:key='index'>\n                        <span class=\"line-number\">{{ index+1 }}</span> {{ task_log }}\n                    </div>\n                </div>\n            </el-card>\n        </el-row>\n\n        <el-dialog\n            title=\"任务配置\"\n            :visible.sync=\"task_json_visible\"\n            width=\"80%\" >\n            <vue-json-editor\n                v-model=\"task_json_dict\"\n                mode=\"code\"\n                lang=\"zh\"\n                id=\"task-json-dialog\" />\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button type=\"primary\" v-on:click=\"copyTaskJSON\" >一键复制</el-button>\n                <el-button v-on:click=\"task_json_visible=false\">关闭</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    import vueJsonEditor from 'vue-json-editor';\n    import { use } from \"echarts/core\";\n    import {\n        TitleComponent,\n        ToolboxComponent,\n        TooltipComponent,\n        GridComponent,\n        LegendComponent,\n        DataZoomComponent,\n        MarkAreaComponent\n    } from 'echarts/components';\n    import {\n        LineChart,\n        GraphChart\n    } from 'echarts/charts';\n    import {\n        CanvasRenderer\n    } from 'echarts/renderers';\n\n    // sub-components\n    import LossAndTime from \"./TaskDetail/LossAndTime\";\n    import TrainAndValidate from \"./TaskDetail/TrainAndValidate\";\n    import Procedure from \"./TaskDetail/Procedure\";\n\n    use([\n        TitleComponent,\n        ToolboxComponent,\n        TooltipComponent,\n        GridComponent,\n        LegendComponent,\n        DataZoomComponent,\n        MarkAreaComponent,\n        LineChart,\n        GraphChart,\n        CanvasRenderer\n    ]);\n\n    export default {\n\n        name: 'TaskDetail',\n        data() {\n            return {\n                // 数据：任务信息\n                task_info: {},\n                // 数据：任务配置\n                task_json_dict: [],\n                // 数据：日志信息\n                task_logs: [],\n                // 数据：用于绘图的数值\n                loss_and_time: {\n                    loss_list: [],\n                    time_list: []\n                },\n                //数据：train_auc & validate_auc\n                train_and_validate:{\n                    train_auc: [],\n                    validate_auc:[],\n                    x_axis:[]\n                },\n                task_info_display_control: false,\n                // 数据：metrics\n                metrics: [],\n                // 把metrics每4个放一组，把task_info卡片置于上方时使用\n                metrics_task_info:[],\n                // 数据：任务错误信息\n                error_msg: [],\n\n                procedure: '',\n                // 标识：是否展示任务配置\n                task_json_visible: false,\n                // 标识：是否将日志划到底部\n                scroll_to_bottom: true,\n                // 定时器\n                timer: null,\n            };\n        },\n        components: {\n            vueJsonEditor,\n            LossAndTime,\n            Procedure,\n            TrainAndValidate\n        },\n        methods: {\n            // 更新日志\n            refreshLog() {\n                if (typeof(this.$route.query.task_id) === \"undefined\") {\n                    clearTimeout(this.timer);\n                    return;\n                }\n                // get logs from server\n                this.$axios.get(\"/board/task/\"+this.$route.query.task_id+\"?type=dlog&start_offset=\"+this.task_logs.length, {\n                    headers: {\n                        'auth': window.localStorage.getItem('jeddak_token')\n                    }\n                })\n                .then(resp => {\n                    this.task_logs = this.task_logs.concat(resp.data.data.log_list);\n                    this.task_info.status = resp.data.data.task_status;\n                    if (this.scroll_to_bottom) {\n                        setTimeout(this.scrollToBottom, 1000);\n                    }\n                    if (this.task_info.status === \"finish\" || this.task_info.status === \"error\") {\n                        clearTimeout(this.timer);\n                    }\n                }).catch(err => {\n                    console.log(err);\n                    this.$notify.error({\n                        title: '提示',\n                        message: '操作失败，可能不具备权限，请尝试注销重新登录或联系管理员'\n                    });\n                    clearTimeout(this.timer);\n                });\n\n                // refresh task_progress\n                this.$axios.get(\"/board/task_progress/\"+this.$route.query.task_id,{\n                    headers: {\n                        'auth': window.localStorage.getItem('jeddak_token')\n                    }\n                })\n                .then(resp => {\n                    this.procedure = resp.data.data.progress;\n                    this.loss_and_time.loss_list = resp.data.data.losses;\n                    this.loss_and_time.time_list = resp.data.data.times;\n                    this.metrics = resp.data.data.metrics;\n                    let ta = resp.data.data.train_auc;\n                    let va = resp.data.data.validate_auc;\n                    //处理train_auc&validate_auc为折线图所需要的形式\n                    this.train_and_validate.train_auc=[];\n                    this.train_and_validate.validate_auc=[];\n                    this.train_and_validate.x_axis=[];\n                    for(let i=0;i<ta.length;i++){\n                      if((ta[i] !== 0) && (va[i]!==0)){\n                        this.train_and_validate.train_auc.push(ta[i]);\n                        this.train_and_validate.validate_auc.push(va[i]);\n                        this.train_and_validate.x_axis.push(i.toString());\n                      }\n                    }\n                    this.task_info_display_control = this.train_and_validate.train_auc.length > 0\n                        && this.train_and_validate.validate_auc.length > 0;\n                    //每4个一组放在用于task info展示信息\n                    this.metrics_task_info = [];\n                    let count = 0;\n                    let metrics_row = {};\n                    for(let prop in this.metrics){\n                      // eslint-disable-next-line no-prototype-builtins\n                      if(this.metrics.hasOwnProperty(prop)){\n                        metrics_row[prop] = this.metrics[prop];\n                        if(count===3){\n                          this.metrics_task_info.push(metrics_row);\n                          metrics_row = {};\n                        }\n                        count = (count + 1)%4;\n                      }\n                    }\n                    if(!(JSON.stringify(metrics_row) === '{}')){\n                      this.metrics_task_info.push(metrics_row);\n                    }\n                    if (resp.data.data.error_msg !== null) {\n                        this.error_msg = resp.data.data.error_msg.split('\\n');\n                    }\n                })\n                .catch(err => {\n                    console.log(err);\n                    this.$notify.error({\n                        title: '提示',\n                        message: '操作失败，可能不具备权限，请尝试注销重新登录或联系管理员'\n                    });\n                    clearTimeout(this.timer);\n                });\n            },\n\n            // 一键复制任务配置\n            copyTaskJSON() {\n                let that = this;\n                this.$copyText(this.task_info.task_chain)\n                    .then(function () {\n                        that.$notify.success({\n                            title: '提示',\n                            message: '复制成功'\n                        });\n                    });\n                this.task_json_visible=false;\n            },\n\n            // 日志滚动到末尾\n            scrollToBottom() {\n                let container = this.$el.querySelector(\"#task_log\");\n                container.scrollTop = container.scrollHeight;\n            },\n\n            // 修改备注名\n            changeAlias() {\n                this.$prompt('请输入备注名', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    inputValue: this.task_info.alias,\n                }).then(({ value }) => {\n                    if (value === null) {\n                        this.$notify.error({\n                            title: '提示',\n                            message: '输入备注名不能为空'\n                        });\n                        return;\n                    }\n                    // send post to backend\n                    this.$axios.patch(\"/board/task/\"+this.$route.query.task_id, {\n                        'field': {\n                            'alias': value\n                        },\n                    }, {\n                        headers: {\n                            'auth': window.localStorage.getItem('jeddak_token')\n                        }\n                    })\n                    // eslint-disable-next-line no-unused-vars\n                    .then(resp => {\n                        this.$notify.success({\n                            title: '提示',\n                            message: '修改成功'\n                        });\n                        this.task_info.alias = value;\n                    }).catch(err => {\n                        console.log(err);\n                        this.$notify.error({\n                            title: '提示',\n                            message: '操作失败，可能不具备权限，请尝试注销重新登录或联系管理员'\n                        });\n                    });\n                });\n            },\n\n            // 终止任务\n            stopTask() {\n                if (this.task_info.status !== 'run') {\n                    this.$notify.error({\n                        title: '提示',\n                        message: '只有进行中的任务才需要终止哦'\n                    });\n                    return;\n                }\n                // send post to backend\n                this.$axios.patch(\"/board/task/\"+this.$route.query.task_id, {\n                    'type': 'stop',\n                }, {\n                    headers: {\n                        'auth': window.localStorage.getItem('jeddak_token')\n                    }\n                })\n                // eslint-disable-next-line no-unused-vars\n                .then(resp => {\n                    this.$notify.success({\n                        title: '提示',\n                        message: resp.data.data.message\n                    });\n                }).catch(err => {\n                    console.log(err);\n                    this.$notify.error({\n                        title: '提示',\n                        message: '操作失败，可能不具备权限，请尝试注销重新登录或联系管理员'\n                    });\n                    clearTimeout(this.timer);\n                });\n            },\n\n            // 删除任务\n            deleteTask() {\n                if (this.task_info.status === 'run') {\n                    this.$notify.error({\n                        title: '提示',\n                        message: '进行中的任务需要先终止哦'\n                    });\n                    return;\n                }\n                // send post to backend\n                this.$axios.delete(\"/board/task/\"+this.$route.query.task_id, {\n                    headers: {\n                        'auth': window.localStorage.getItem('jeddak_token')\n                    }\n                })\n                // eslint-disable-next-line no-unused-vars\n                .then(resp => {\n                    this.$notify.success({\n                        title: '提示',\n                        message: '任务删除成功，页面跳转中'\n                    });\n                    clearTimeout(this.timer);\n                    this.$router.back();\n                }).catch(err => {\n                    console.log(err);\n                    this.$notify.error({\n                        title: '提示',\n                        message: '操作失败，可能不具备权限，请尝试注销重新登录或联系管理员'\n                    });\n                    clearTimeout(this.timer);\n                });\n            },\n\n            // 下载输出文件\n            downloadOutput(task_id) {\n                const url = \"/board/task/\"+task_id+\"?type=output\";\n                const file_name = task_id + \".csv\"\n                this.$axios({\n                    url:url,\n                    method:'get',\n                    responseType: 'blob',\n                    headers: {\n                        'auth': window.localStorage.getItem('jeddak_token')\n                    }\n                }).then(res => {\n                    let blob = new Blob([res.data]);\n                    if (window.navigator.msSaveOrOpenBlob) {\n                        navigator.msSaveBlob(blob, file_name);\n                    } else {\n                        let link = document.createElement(\"a\");\n                        let evt = document.createEvent(\"HTMLEvents\");\n                        evt.initEvent(\"click\", false, false);\n                        link.href = URL.createObjectURL(blob);\n                        link.download = file_name;\n                        link.style.display = \"none\";\n                        document.body.appendChild(link);\n                        link.click();\n                        window.URL.revokeObjectURL(link.href);\n                    }\n                }).catch(err => {\n                    console.log(err);\n                    this.$notify.error({\n                        title: '提示',\n                        message: '没有找到输出文件。请确认：1.该任务是否有配置data_saver模块 2.该任务已经运行完成'\n                    });\n                });\n            },\n        },\n        mounted() {\n            this.$axios.get(\"/board/task/\"+this.$route.query.task_id+\"?type=detail\", {\n                headers: {\n                    'auth': window.localStorage.getItem('jeddak_token')\n                }\n            })\n            .then(resp => {\n                this.task_info = resp.data.data;\n                this.task_info.create_time = new Date(this.task_info.create_time+'Z').toLocaleString();\n                this.task_info.update_time = new Date(this.task_info.update_time+'Z').toLocaleString();\n                this.task_json_dict = JSON.parse(this.task_info.task_chain);\n\n                // start timer\n                if (typeof(this.task_info.task_id) !== \"undefined\") {\n                    this.refreshLog();\n                    this.timer = setInterval(this.refreshLog, 5000);\n                }\n            }).catch(err => {\n                console.log(err.response);\n                if (err.response.status === 400 && err.response.data.message === 'task_id not found') {\n                    this.$notify.error({\n                        title: '提示',\n                        message: '该任务已删除'\n                    });\n                    return;\n                }\n                this.$notify.error({\n                    title: '提示',\n                    message: '操作失败，可能不具备权限，请尝试注销重新登录或联系管理员'\n                });\n            });\n        }\n    }\n</script>\n\n<style scoped>\n    .card {\n        margin-bottom: 10px;\n        height: 590px;\n    }\n    #task_log, #error_msg {\n        height: 400px;\n        overflow: scroll;\n    }\n    .el-popconfirm {\n        margin-left: 10px;\n    }\n    .log-span {\n        margin-left: 10px;\n    }\n    .show-modal {\n        color: grey;\n        cursor: pointer;\n    }\n    #task-json-dialog {\n        height: 600px;\n    }\n    .line-number {\n        color: green;\n        margin-right: 10px;\n    }\n    #scroll-switch {\n        float: right;\n    }\n    .oper-btn {\n      margin-left: 0;\n      margin-right: 5px;\n    }\n    .task_info_card{\n      margin-bottom: 10px;\n    }\n    .cards{\n      margin-bottom: 10px;\n    }\n</style>\n\n\n<style>\n    .jsoneditor-vue {\n        height: 600px;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskDetail.vue?vue&type=template&id=7690e010&scoped=true&\"\nimport script from \"./TaskDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TaskDetail.vue?vue&type=style&index=0&id=7690e010&scoped=true&lang=css&\"\nimport style1 from \"./TaskDetail.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7690e010\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDetail.vue?vue&type=style&index=1&lang=css&\""],"sourceRoot":""}