{"version":3,"sources":["webpack:///./src/views/Admin.vue?8983","webpack:///src/views/Admin.vue","webpack:///./src/views/Admin.vue?5b90","webpack:///./src/views/Admin.vue?52f7","webpack:///./src/views/Admin.vue?575b","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","addUser","_v","$event","deleteUserDialogVisible","staticStyle","userTable","scopedSlots","_u","key","fn","scope","_s","getRolesDescription","row","modifyUser","deleteUser","name","page_size","page_count","total_count","handleCurrentChange","addUserDialogVisible","cancelAddUser","ref","formPosition","addUserForm","model","value","callback","$$v","$set","expression","_l","getRoles","item","label","addUserFormButton","cancelAddUserFormButton","modifyUserDialogVisible","cancelModifyUser","modifyUserForm","modifyUserFormButton","cancelModifyUserFormButton","cancelDeleteUser","deleteUserForm","cancelDeleteUserFormButton","staticRenderFns","data","username","password","role","modifyUsername","adminRole","salt","new_salt","roles1","roles2","current_page","created","checkAdmin","mounted","getUserList","methods","$axios","post","headers","window","localStorage","getItem","console","log","err","resp","title","message","x","req_type","filter","JSON","stringify","curr_page","cleanAddUserForm","cleanModifyUserForm","cleanDeleteUserForm","val","sc","component","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"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","file":"js/chunk-0ff2cbc4.0995e48e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"admin\"},[_c('el-row',{attrs:{\"id\":\"top-buttons\"}},[_c('el-button',{staticClass:\"oper-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\" 添加用户 \"),_c('i',{staticClass:\"el-icon-circle-plus\"})]),_c('el-button',{staticClass:\"oper-btn\",attrs:{\"type\":\"danger\"},on:{\"click\":function($event){_vm.deleteUserDialogVisible=true}}},[_vm._v(\" 删除用户 \"),_c('i',{staticClass:\"el-icon-remove\"})])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userTable,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"用户名\"}}),_c('el-table-column',{attrs:{\"label\":\"角色\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.getRolesDescription(scope.row['role']))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"content\":\"修改\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.modifyUser(scope)}}})],1),_c('el-tooltip',{attrs:{\"content\":\"删除\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteUser(scope.row.name)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"id\":\"pagination\",\"background\":\"\",\"page-size\":_vm.page_size,\"page-count\":_vm.page_count,\"total\":_vm.total_count,\"layout\":\"prev, pager, next, jumper\"},on:{\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addUserDialogVisible,\"before-close\":_vm.cancelAddUser,\"width\":\"35%\"}},[_c('el-form',{ref:\"form\",attrs:{\"label-position\":_vm.formPosition,\"model\":_vm.addUserForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{model:{value:(_vm.addUserForm.username),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"username\", $$v)},expression:\"addUserForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\"}},[_c('el-input',{model:{value:(_vm.addUserForm.password),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"password\", $$v)},expression:\"addUserForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择角色\"},model:{value:(_vm.addUserForm.role),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"role\", $$v)},expression:\"addUserForm.role\"}},_vm._l((_vm.getRoles()),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUserFormButton}},[_vm._v(\"增加\")]),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.cancelAddUserFormButton}},[_vm._v(\"取消\")])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户\",\"visible\":_vm.modifyUserDialogVisible,\"before-close\":_vm.cancelModifyUser,\"width\":\"30%\"}},[_c('el-form',{ref:\"form\",attrs:{\"label-position\":_vm.formPosition,\"model\":_vm.modifyUserForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(this.modifyUsername),callback:function ($$v) {_vm.$set(this, \"modifyUsername\", $$v)},expression:\"this.modifyUsername\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\"}},[_c('el-input',{model:{value:(_vm.modifyUserForm.password),callback:function ($$v) {_vm.$set(_vm.modifyUserForm, \"password\", $$v)},expression:\"modifyUserForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择角色\"},model:{value:(_vm.modifyUserForm.role),callback:function ($$v) {_vm.$set(_vm.modifyUserForm, \"role\", $$v)},expression:\"modifyUserForm.role\"}},_vm._l((_vm.getRoles()),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.modifyUserFormButton}},[_vm._v(\"修改\")]),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.cancelModifyUserFormButton}},[_vm._v(\"取消\")])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"删除用户\",\"visible\":_vm.deleteUserDialogVisible,\"before-close\":_vm.cancelDeleteUser,\"width\":\"30%\"}},[_c('el-form',{ref:\"form\",attrs:{\"label-position\":_vm.formPosition,\"model\":_vm.deleteUserForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名：\"}},[_c('el-input',{model:{value:(_vm.deleteUserForm.name),callback:function ($$v) {_vm.$set(_vm.deleteUserForm, \"name\", $$v)},expression:\"deleteUserForm.name\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.deleteUser(_vm.deleteUserForm.name)}}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.cancelDeleteUserFormButton}},[_vm._v(\"取消\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"admin\">\n    <!-- add module & start task button -->\n    <el-row id=\"top-buttons\">\n      <el-button type=\"primary\" @click=\"addUser\" class=\"oper-btn\">\n        添加用户\n        <i class=\"el-icon-circle-plus\"></i>\n      </el-button>\n      <el-button type=\"danger\" @click=\"deleteUserDialogVisible=true\" class=\"oper-btn\">\n        删除用户\n        <i class=\"el-icon-remove\"></i>\n      </el-button>\n    </el-row>\n\n    <el-card class=\"box-card\">\n      <!-- task table -->\n      <el-table\n          :data=\"userTable\"\n          stripe\n          style=\"width: 100%\">\n        <!-- column 1: index -->\n        <el-table-column type=\"index\"> </el-table-column>\n        <!-- column 2: user name -->\n        <el-table-column prop=\"name\" label=\"用户名\"> </el-table-column>\n        <!-- column 3: role -->\n        <el-table-column label=\"角色\">\n          <template v-slot=\"scope\">\n            {{getRolesDescription(scope.row['role'])}}\n          </template>\n        </el-table-column>\n        <!-- column 4: operation -->\n        <el-table-column label=\"操作\" >\n          <template v-slot=\"scope\">\n            <!-- tip for modify button -->\n            <el-tooltip content=\"修改\" placement=\"top\" :enterable=\"false\">\n              <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"modifyUser(scope)\"></el-button>\n            </el-tooltip>\n            <!-- tip for delete button -->\n            <el-tooltip content=\"删除\" placement=\"top\" :enterable=\"false\">\n              <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteUser(scope.row.name)\"></el-button>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n          id=\"pagination\"\n          background\n          :page-size=\"page_size\"\n          :page-count=\"page_count\"\n          :total=\"total_count\"\n          layout=\"prev, pager, next, jumper\"\n          @current-change=\"handleCurrentChange\"\n      >\n      </el-pagination>\n    </el-card>\n    <!-- add user dialog -->\n    <el-dialog\n        title=\"添加用户\"\n        :visible=\"addUserDialogVisible\"\n        :before-close=\"cancelAddUser\"\n        width=\"35%\">\n      <el-form ref=\"form\" :label-position=\"formPosition\" :model=\"addUserForm\" label-width=\"80px\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"addUserForm.username\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\">\n          <el-input v-model=\"addUserForm.password\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色\">\n          <el-select v-model=\"addUserForm.role\" placeholder=\"请选择角色\">\n            <el-option\n                v-for=\"item in getRoles()\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"addUserFormButton\">增加</el-button>\n          <el-button type=\"info\" @click=\"cancelAddUserFormButton\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n    <!-- modify user dialog -->\n    <el-dialog\n        title=\"修改用户\"\n        :visible=\"modifyUserDialogVisible\"\n        :before-close=\"cancelModifyUser\"\n        width=\"30%\">\n      <el-form ref=\"form\" :label-position=\"formPosition\" :model=\"modifyUserForm\" label-width=\"80px\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"this.modifyUsername\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\">\n          <el-input v-model=\"modifyUserForm.password\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色\">\n          <el-select v-model=\"modifyUserForm.role\" placeholder=\"请选择角色\">\n            <el-option\n                v-for=\"item in getRoles()\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"modifyUserFormButton\">修改</el-button>\n          <el-button type=\"info\" @click=\"cancelModifyUserFormButton\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n    <!-- delete user dialog -->\n    <el-dialog\n        title=\"删除用户\"\n        :visible=\"deleteUserDialogVisible\"\n        :before-close=\"cancelDeleteUser\"\n        width=\"30%\">\n      <el-form ref=\"form\" :label-position=\"formPosition\" :model=\"deleteUserForm\" label-width=\"80px\">\n        <el-form-item label=\"用户名：\">\n          <el-input v-model=\"deleteUserForm.name\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"deleteUser(deleteUserForm.name)\">删除</el-button>\n          <el-button type=\"info\" @click=\"cancelDeleteUserFormButton\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { sha256 } from 'js-sha256'\nexport default {\n  name: \"Admin\",\n  data: function (){\n    return{\n      //用户表\n      userTable:[],\n      //添加用户对话框是否可见\n      addUserDialogVisible:false,\n      //添加用户信息表单\n      addUserForm:{\n        username:'',\n        password:'',\n        role: null\n      },\n      formPosition:'left',\n      //修改用户信息表单\n      modifyUserForm:{\n        password:'',\n        role: null\n      },\n      modifyUsername:'',\n      modifyUserDialogVisible:false,\n      deleteUserDialogVisible:false,\n      deleteUserForm:{\n        name:''\n      },\n      //管理员角色初始化\n      adminRole:32,\n      //盐值\n      salt: '',\n      new_salt: '',\n      //一级管理员可以增加的用户角色\n      roles1:[{value: 2, label: '管理员'\n      }, {value: 4, label: '一级用户'\n      }, {value: 8, label: '二级用户'\n      }, {value: 16, label: '三级用户'\n      }, {value: 32, label: '四级用户'\n      }, {value: 64, label: '五级用户'\n      }],\n      //二级管理员可以增加的用户角色\n      roles2:[{value: 4, label: '一级用户'\n      }, {value: 8, label: '二级用户'\n      }, {value: 16, label: '三级用户'\n      }, {value: 32, label: '四级用户'\n      }, {value: 64, label: '五级用户'\n      }],\n      // 数据：每页显示的 task 数量\n      page_size: 10,\n      page_count: 1,\n      total_count: 1,\n      current_page: 1\n    }\n  },\n  created() {\n    //每次都需要预先检验用户是否为admin\n    this.checkAdmin()\n  },\n  mounted() {\n    this.getUserList(1)\n  },\n  methods:{\n    checkAdmin: function () {\n      this.$axios.post(\"/board/user/admin_auth\", {},{\n        headers: {\n          'auth': window.localStorage.getItem('jeddak_token')\n        }\n      }).then(resp => {\n        this.adminRole = resp.data.data.role;\n        // console.log(this.adminRole)\n      }).catch(err => {\n        console.log(err);\n        this.$router.push(\"/\");\n      });\n    },\n    addUser(){\n      this.addUserDialogVisible = true;\n    },\n    deleteUser(username){\n      this.$axios.post(\"/board/user\", {\n        'filter': {name: username},\n        'req_type': 'delete_user'\n      },{\n        headers: {\n          'auth': window.localStorage.getItem('jeddak_token')\n        }\n      }).then(resp => {\n        console.log(resp)\n        this.$notify.success({\n          title: '提示',\n          message: '删除成功'\n        });\n        this.loading = false;\n      }).catch(err => {\n        console.log(err);\n        this.$notify.error({\n          title: '提示',\n          message: '获取用户列表失败'\n        });\n        this.loading = false;\n      });\n      this.getUserList(this.current_page);\n      this.deleteUserDialogVisible=false;\n    },\n    cancelAddUser(){\n      this.addUserDialogVisible = false;\n    },\n    cancelModifyUser(){\n      this.modifyUserDialogVisible = false;\n    },\n    cancelDeleteUser(){\n      this.deleteUserDialogVisible = false;\n    },\n    getRoles(){\n      if(this.adminRole === 1){\n        return this.roles1;\n      }\n      if(this.adminRole === 2){\n        return this.roles2;\n      }\n    },\n    getRolesDescription(x){\n      switch (x){\n        case 1:\n          return '一级管理员'\n        case 2:\n          return '二级管理员'\n        case 4:\n          return '一级用户'\n        case 8:\n          return '二级用户'\n        case 16:\n          return '三级用户'\n        case 32:\n          return '四级用户'\n        case 64:\n          return '五级用户'\n      }\n    },\n    getUserList(curr_page){\n      // console.log(curr_page);\n      this.$axios.post(\"/board/user\",{\n        req_type: 'get_user_list',\n        filter: JSON.stringify({\n          'deleted': false,\n        }),\n        page_size: this.page_size+1,\n        curr_page: curr_page,\n      },{\n        headers: {\n          'auth': window.localStorage.getItem('jeddak_token')\n        }\n      }).then(resp => {\n          console.log(resp.data)\n          this.userTable = resp.data.data.users;\n          this.total_count = resp.data.data.total_count;\n          this.page_count = Math.ceil(this.total_count/this.page_size);\n          this.loading = false;\n        }).catch(err => {\n        console.log(err);\n        this.$notify.error({\n          title: '提示',\n          message: '获取用户列表失败'\n        });\n        this.loading = false;\n      });\n    },\n    async addUserFormButton(){\n      this.loading = true;\n      // get salt\n      try{\n        const { data: resp } = await this.$axios.post(\"/board/user\", {\n          'filter': {name: this.addUserForm.username, role: this.addUserForm.role},\n          'req_type': 'get_add_user_salt'\n        },{\n          headers: {\n            'auth': window.localStorage.getItem('jeddak_token')\n          }\n        });\n        if(resp.data.salt !== \"\"){\n          console.log(resp.data.salt)\n          this.salt = resp.data.salt;\n        }\n      }catch (error) {\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        }\n        console.log(error);\n      }\n      try{\n        const { data: res } = await this.$axios.post(\"/board/user\", {\n          'filter': {\n            name: this.addUserForm.username,\n            password: sha256(this.salt + this.addUserForm.password).toString(),\n            salt: this.salt,\n            role: this.addUserForm.role\n          },\n          'req_type': 'add_user'\n        },{\n          headers: {\n            'auth': window.localStorage.getItem('jeddak_token')\n          }\n        })\n        if(res.status === 200){\n          this.loading = false;\n          this.$notify.success({\n            title: '提示',\n            message: '添加成功'\n          });\n          this.loading = false;\n        }\n      } catch (error) {\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n          this.$notify.error({\n            title: '提示',\n            message: '添加用户失败，用户名已存在'\n          });\n          this.loading = false;\n        }\n        console.log(error);\n      }\n      this.cleanAddUserForm();\n      this.getUserList(this.current_page);\n      this.addUserDialogVisible=false;\n    },\n    cancelAddUserFormButton(){\n      this.cleanAddUserForm();\n      this.addUserDialogVisible=false;\n    },\n    cancelModifyUserFormButton(){\n      this.cleanModifyUserForm();\n      this.modifyUserDialogVisible=false;\n    },\n    cancelDeleteUserFormButton(){\n      this.cleanDeleteUserForm();\n      this.deleteUserDialogVisible=false;\n    },\n    cleanDeleteUserForm(){\n      this.deleteUserForm={\n        name:''\n      }\n    },\n    // 分页跳转\n    handleCurrentChange(val) {\n      this.getUserList(val);\n      this.current_page = val;\n    },\n    modifyUser(sc){\n      this.modifyUserDialogVisible=true;\n      this.modifyUsername = sc.row.name;\n    },\n    async modifyUserFormButton(){\n      // get salt\n      try{\n        const { data: resp } = await this.$axios.post(\"/board/user\", {\n          'filter': {name: this.modifyUsername},\n          'req_type': 'get_change_password_salt'\n        });\n        if(resp.data.salt !== \"\"){\n          this.new_salt = resp.data.new_salt\n        }\n      }catch (error) {\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n          this.$notify.error({\n            title: '提示',\n            message: '获取盐值失败'\n          });\n          this.loading = false;\n        }\n        console.log(error);\n      }\n      this.new_password = sha256(this.new_salt + this.modifyUserForm.password).toString();\n      if(this.modifyUserForm.password===''){\n        this.new_password = null;\n        this.new_salt = null;\n      }\n      // send update user request\n      this.$axios.patch(\"/board/user\", {\n        req_type: 'update_user',\n        filter: {\n          'name': this.modifyUsername,\n        },\n        field: {\n          'password': this.new_password,\n          'salt': this.new_salt,\n          'role': this.modifyUserForm.role\n        }\n      }, {\n        headers: {\n          'auth': window.localStorage.getItem('jeddak_token')\n        }\n      }).then(resp => {\n          console.log(resp);\n          this.loading = false;\n          this.$notify.success({\n            title: '提示',\n            message: '修改成功'\n          });\n        }).catch(err => {\n        console.log(err);\n        this.$notify.error({\n          title: '提示',\n          message: '修改失败'\n        });\n        this.loading = false;\n      });\n      this.getUserList(this.current_page);\n      this.cleanModifyUserForm();\n      this.modifyUserDialogVisible = false;\n    },\n    cleanAddUserForm(){\n      this.addUserForm={\n        username:'',\n        password:'',\n        role: null\n      }\n    },\n    cleanModifyUserForm(){\n      this.modifyUserForm={\n        password:'',\n        role: null\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n  #pagination {\n    margin-top: 20px;\n    margin-bottom: 20px;\n    float: right;\n  }\n  .oper-btn {\n    margin-left: 0;\n    margin-right: 5px;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Admin.vue?vue&type=template&id=8744d336&scoped=true&\"\nimport script from \"./Admin.vue?vue&type=script&lang=js&\"\nexport * from \"./Admin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Admin.vue?vue&type=style&index=0&id=8744d336&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8744d336\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admin.vue?vue&type=style&index=0&id=8744d336&scoped=true&lang=css&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}