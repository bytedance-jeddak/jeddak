(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-273a07dd"],{"2e73":function(e,t,a){"use strict";a("f611")},a55b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{attrs:{id:"login-panel"}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{shadow:"always",id:"login-card"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",[a("h2",[e._v("JEDDAK 协同计算平台")])]),a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",id:"btn-submit"},on:{click:e.onSubmit}},[e._v("登录")])],1)],1)],1)],1)])},o=[],n=a("1da1"),s=(a("96cf"),a("b0c0"),a("d3b7"),a("25f0"),a("6c27")),l={name:"Login",data:function(){return{form:{name:null,password:null},rules:{name:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur"}]},loading:!1,salt:"",password:""}},methods:{onSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$axios.post("/board/user",{filter:{name:e.form.name},req_type:"get_salt"});case 4:a=t.sent,r=a.data,""!==r.data.salt&&(e.salt=r.data.salt),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),t.t0.response&&(console.log(t.t0.response.data),console.log(t.t0.response.status),console.log(t.t0.response.headers),e.$notify.error({title:"提示",message:"获取盐值失败"}),e.loading=!1),console.log(t.t0);case 13:return e.password=Object(s["sha256"])(e.salt+e.form.password).toString(),t.prev=14,t.next=17,e.$axios.post("/board/user",{filter:{name:e.form.name,password:e.password},req_type:"login"});case 17:if(o=t.sent,n=o.data,200!==n.status){t.next=29;break}return e.loading=!1,e.$notify.success({title:"提示",message:"登录成功"}),window.localStorage.setItem("jeddak_token",n.data.token),window.localStorage.setItem("jeddak_username",e.form.name),e.$global.isAdmin=!0===n.data.isAdmin,window.localStorage.setItem("jeddak_isAdmin",JSON.stringify(e.$global.isAdmin)),t.next=28,e.$router.push("/");case 28:e.loading=!1;case 29:t.next=35;break;case 31:t.prev=31,t.t1=t["catch"](14),t.t1.response&&(console.log(t.t1.response.data),console.log(t.t1.response.status),console.log(t.t1.response.headers),e.$notify.error({title:"提示",message:"用户名或密码错误"}),e.loading=!1),console.log(t.t1);case 35:case"end":return t.stop()}}),t,null,[[1,9],[14,31]])})))()}}},i=l,d=(a("2e73"),a("2877")),c=Object(d["a"])(i,r,o,!1,null,"080624fb",null);t["default"]=c.exports},b0c0:function(e,t,a){var r=a("83ab"),o=a("9bf2").f,n=Function.prototype,s=n.toString,l=/^\s*function ([^ (]*)/,i="name";r&&!(i in n)&&o(n,i,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(e){return""}}})},f611:function(e,t,a){}}]);
//# sourceMappingURL=chunk-273a07dd.1f289a38.js.map